(function(){const G=document.createElement("link").relList;if(G&&G.supports&&G.supports("modulepreload"))return;for(const q of document.querySelectorAll('link[rel="modulepreload"]'))pt(q);new MutationObserver(q=>{for(const Ct of q)if(Ct.type==="childList")for(const R of Ct.addedNodes)R.tagName==="LINK"&&R.rel==="modulepreload"&&pt(R)}).observe(document,{childList:!0,subtree:!0});function et(q){const Ct={};return q.integrity&&(Ct.integrity=q.integrity),q.referrerpolicy&&(Ct.referrerPolicy=q.referrerpolicy),q.crossorigin==="use-credentials"?Ct.credentials="include":q.crossorigin==="anonymous"?Ct.credentials="omit":Ct.credentials="same-origin",Ct}function pt(q){if(q.ep)return;q.ep=!0;const Ct=et(q);fetch(q.href,Ct)}})();var dn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},An={exports:{}};/*! For license information please see lsplugin.user.js.LICENSE.txt */(function(K,G){(function(et,pt){K.exports=pt()})(self,()=>(()=>{var et={227:(R,p,S)=>{var N=S(155);p.formatArgs=function(T){if(T[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+T[0]+(this.useColors?"%c ":" ")+"+"+R.exports.humanize(this.diff),!this.useColors)return;const U="color: "+this.color;T.splice(1,0,U,"color: inherit");let m=0,l=0;T[0].replace(/%[a-zA-Z%]/g,g=>{g!=="%%"&&(m++,g==="%c"&&(l=m))}),T.splice(l,0,U)},p.save=function(T){try{T?p.storage.setItem("debug",T):p.storage.removeItem("debug")}catch{}},p.load=function(){let T;try{T=p.storage.getItem("debug")}catch{}return!T&&N!==void 0&&"env"in N&&(T=N.env.DEBUG),T},p.useColors=function(){return!(typeof window>"u"||!window.process||window.process.type!=="renderer"&&!window.process.__nwjs)||(typeof navigator>"u"||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},p.storage=function(){try{return localStorage}catch{}}(),p.destroy=(()=>{let T=!1;return()=>{T||(T=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),p.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],p.log=console.debug||console.log||(()=>{}),R.exports=S(447)(p);const{formatters:w}=R.exports;w.j=function(T){try{return JSON.stringify(T)}catch(U){return"[UnexpectedJSONParseError]: "+U.message}}},447:(R,p,S)=>{R.exports=function(N){function w(m){let l,g,y,z=null;function I(...A){if(!I.enabled)return;const H=I,k=Number(new Date),F=k-(l||k);H.diff=F,H.prev=l,H.curr=k,l=k,A[0]=w.coerce(A[0]),typeof A[0]!="string"&&A.unshift("%O");let i=0;A[0]=A[0].replace(/%([a-zA-Z%])/g,(s,d)=>{if(s==="%%")return"%";i++;const C=w.formatters[d];if(typeof C=="function"){const $=A[i];s=C.call(H,$),A.splice(i,1),i--}return s}),w.formatArgs.call(H,A),(H.log||w.log).apply(H,A)}return I.namespace=m,I.useColors=w.useColors(),I.color=w.selectColor(m),I.extend=T,I.destroy=w.destroy,Object.defineProperty(I,"enabled",{enumerable:!0,configurable:!1,get:()=>z!==null?z:(g!==w.namespaces&&(g=w.namespaces,y=w.enabled(m)),y),set:A=>{z=A}}),typeof w.init=="function"&&w.init(I),I}function T(m,l){const g=w(this.namespace+(l===void 0?":":l)+m);return g.log=this.log,g}function U(m){return m.toString().substring(2,m.toString().length-2).replace(/\.\*\?$/,"*")}return w.debug=w,w.default=w,w.coerce=function(m){return m instanceof Error?m.stack||m.message:m},w.disable=function(){const m=[...w.names.map(U),...w.skips.map(U).map(l=>"-"+l)].join(",");return w.enable(""),m},w.enable=function(m){let l;w.save(m),w.namespaces=m,w.names=[],w.skips=[];const g=(typeof m=="string"?m:"").split(/[\s,]+/),y=g.length;for(l=0;l<y;l++)g[l]&&((m=g[l].replace(/\*/g,".*?"))[0]==="-"?w.skips.push(new RegExp("^"+m.slice(1)+"$")):w.names.push(new RegExp("^"+m+"$")))},w.enabled=function(m){if(m[m.length-1]==="*")return!0;let l,g;for(l=0,g=w.skips.length;l<g;l++)if(w.skips[l].test(m))return!1;for(l=0,g=w.names.length;l<g;l++)if(w.names[l].test(m))return!0;return!1},w.humanize=S(824),w.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(N).forEach(m=>{w[m]=N[m]}),w.names=[],w.skips=[],w.formatters={},w.selectColor=function(m){let l=0;for(let g=0;g<m.length;g++)l=(l<<5)-l+m.charCodeAt(g),l|=0;return w.colors[Math.abs(l)%w.colors.length]},w.enable(w.load()),w}},856:function(R){R.exports=function(){function p(D){return p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},p(D)}function S(D,v){return S=Object.setPrototypeOf||function(E,W){return E.__proto__=W,E},S(D,v)}function N(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function w(D,v,E){return w=N()?Reflect.construct:function(W,rt,Ot){var Jt=[null];Jt.push.apply(Jt,rt);var Ht=new(Function.bind.apply(W,Jt));return Ot&&S(Ht,Ot.prototype),Ht},w.apply(null,arguments)}function T(D){return function(v){if(Array.isArray(v))return U(v)}(D)||function(v){if(typeof Symbol<"u"&&v[Symbol.iterator]!=null||v["@@iterator"]!=null)return Array.from(v)}(D)||function(v,E){if(v){if(typeof v=="string")return U(v,E);var W=Object.prototype.toString.call(v).slice(8,-1);return W==="Object"&&v.constructor&&(W=v.constructor.name),W==="Map"||W==="Set"?Array.from(v):W==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(W)?U(v,E):void 0}}(D)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function U(D,v){(v==null||v>D.length)&&(v=D.length);for(var E=0,W=new Array(v);E<v;E++)W[E]=D[E];return W}var m=Object.hasOwnProperty,l=Object.setPrototypeOf,g=Object.isFrozen,y=Object.getPrototypeOf,z=Object.getOwnPropertyDescriptor,I=Object.freeze,A=Object.seal,H=Object.create,k=typeof Reflect<"u"&&Reflect,F=k.apply,i=k.construct;F||(F=function(D,v,E){return D.apply(v,E)}),I||(I=function(D){return D}),A||(A=function(D){return D}),i||(i=function(D,v){return w(D,T(v))});var s,d=c(Array.prototype.forEach),C=c(Array.prototype.pop),$=c(Array.prototype.push),J=c(String.prototype.toLowerCase),nt=c(String.prototype.match),st=c(String.prototype.replace),xt=c(String.prototype.indexOf),_t=c(String.prototype.trim),at=c(RegExp.prototype.test),Wt=(s=TypeError,function(){for(var D=arguments.length,v=new Array(D),E=0;E<D;E++)v[E]=arguments[E];return i(s,v)});function c(D){return function(v){for(var E=arguments.length,W=new Array(E>1?E-1:0),rt=1;rt<E;rt++)W[rt-1]=arguments[rt];return F(D,v,W)}}function u(D,v){l&&l(D,null);for(var E=v.length;E--;){var W=v[E];if(typeof W=="string"){var rt=J(W);rt!==W&&(g(v)||(v[E]=rt),W=rt)}D[W]=!0}return D}function L(D){var v,E=H(null);for(v in D)F(m,D,[v])&&(E[v]=D[v]);return E}function X(D,v){for(;D!==null;){var E=z(D,v);if(E){if(E.get)return c(E.get);if(typeof E.value=="function")return c(E.value)}D=y(D)}return function(W){return console.warn("fallback value for",W),null}}var bt=I(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),ft=I(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),B=I(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),ct=I(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),mt=I(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),gt=I(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Pt=I(["#text"]),St=I(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),lt=I(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Q=I(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),dt=I(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Et=A(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Gt=A(/<%[\w\W]*|[\w\W]*%>/gm),Ut=A(/^data-[\-\w.\u00B7-\uFFFF]/),zt=A(/^aria-[\-\w]+$/),pe=A(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),ee=A(/^(?:\w+script|data):/i),$e=A(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),gn=A(/^html$/i),qe=function(){return typeof window>"u"?null:window},yn=function(D,v){if(p(D)!=="object"||typeof D.createPolicy!="function")return null;var E=null,W="data-tt-policy-suffix";v.currentScript&&v.currentScript.hasAttribute(W)&&(E=v.currentScript.getAttribute(W));var rt="dompurify"+(E?"#"+E:"");try{return D.createPolicy(rt,{createHTML:function(Ot){return Ot}})}catch{return console.warn("TrustedTypes policy "+rt+" could not be created."),null}};return function D(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:qe(),E=function(r){return D(r)};if(E.version="2.3.8",E.removed=[],!v||!v.document||v.document.nodeType!==9)return E.isSupported=!1,E;var W=v.document,rt=v.document,Ot=v.DocumentFragment,Jt=v.HTMLTemplateElement,Ht=v.Node,Be=v.Element,we=v.NodeFilter,fe=v.NamedNodeMap,Ce=fe===void 0?v.NamedNodeMap||v.MozNamedAttrMap:fe,We=v.HTMLFormElement,xe=v.DOMParser,Ge=v.trustedTypes,ne=Be.prototype,Je=X(ne,"cloneNode"),Ze=X(ne,"nextSibling"),bn=X(ne,"childNodes"),Se=X(ne,"parentNode");if(typeof Jt=="function"){var de=rt.createElement("template");de.content&&de.content.ownerDocument&&(rt=de.content.ownerDocument)}var Nt=yn(Ge,W),Ke=Nt?Nt.createHTML(""):"",Y=rt,he=Y.implementation,re=Y.createNodeIterator,Oe=Y.createDocumentFragment,Ve=Y.getElementsByTagName,Ye=W.importNode,ke={};try{ke=L(rt).documentMode?rt.documentMode:{}}catch{}var kt={};E.isSupported=typeof Se=="function"&&he&&he.createHTMLDocument!==void 0&&ke!==9;var oe,$t,Te=Et,me=Gt,vn=Ut,_n=zt,wn=ee,Xe=$e,ge=pe,ht=null,Qe=u({},[].concat(T(bt),T(ft),T(B),T(mt),T(Pt))),yt=null,Ae=u({},[].concat(T(St),T(lt),T(Q),T(dt))),ut=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Zt=null,Ee=null,tn=!0,je=!0,en=!1,Kt=!1,jt=!1,Vt=!1,Ie=!1,Yt=!1,ye=!1,ie=!1,Le=!0,Xt=!0,se=!1,Ft={},Qt=null,nn=u({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Ne=null,Mt=u({},["audio","video","img","source","image","track"]),Fe=null,rn=u({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ae="http://www.w3.org/1998/Math/MathML",Me="http://www.w3.org/2000/svg",Rt="http://www.w3.org/1999/xhtml",be=Rt,on=!1,sn=["application/xhtml+xml","text/html"],Re="text/html",te=null,Cn=rt.createElement("form"),an=function(r){return r instanceof RegExp||r instanceof Function},De=function(r){te&&te===r||(r&&p(r)==="object"||(r={}),r=L(r),ht="ALLOWED_TAGS"in r?u({},r.ALLOWED_TAGS):Qe,yt="ALLOWED_ATTR"in r?u({},r.ALLOWED_ATTR):Ae,Fe="ADD_URI_SAFE_ATTR"in r?u(L(rn),r.ADD_URI_SAFE_ATTR):rn,Ne="ADD_DATA_URI_TAGS"in r?u(L(Mt),r.ADD_DATA_URI_TAGS):Mt,Qt="FORBID_CONTENTS"in r?u({},r.FORBID_CONTENTS):nn,Zt="FORBID_TAGS"in r?u({},r.FORBID_TAGS):{},Ee="FORBID_ATTR"in r?u({},r.FORBID_ATTR):{},Ft="USE_PROFILES"in r&&r.USE_PROFILES,tn=r.ALLOW_ARIA_ATTR!==!1,je=r.ALLOW_DATA_ATTR!==!1,en=r.ALLOW_UNKNOWN_PROTOCOLS||!1,Kt=r.SAFE_FOR_TEMPLATES||!1,jt=r.WHOLE_DOCUMENT||!1,Yt=r.RETURN_DOM||!1,ye=r.RETURN_DOM_FRAGMENT||!1,ie=r.RETURN_TRUSTED_TYPE||!1,Ie=r.FORCE_BODY||!1,Le=r.SANITIZE_DOM!==!1,Xt=r.KEEP_CONTENT!==!1,se=r.IN_PLACE||!1,ge=r.ALLOWED_URI_REGEXP||ge,be=r.NAMESPACE||Rt,r.CUSTOM_ELEMENT_HANDLING&&an(r.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ut.tagNameCheck=r.CUSTOM_ELEMENT_HANDLING.tagNameCheck),r.CUSTOM_ELEMENT_HANDLING&&an(r.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ut.attributeNameCheck=r.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),r.CUSTOM_ELEMENT_HANDLING&&typeof r.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ut.allowCustomizedBuiltInElements=r.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),oe=oe=sn.indexOf(r.PARSER_MEDIA_TYPE)===-1?Re:r.PARSER_MEDIA_TYPE,$t=oe==="application/xhtml+xml"?function(x){return x}:J,Kt&&(je=!1),ye&&(Yt=!0),Ft&&(ht=u({},T(Pt)),yt=[],Ft.html===!0&&(u(ht,bt),u(yt,St)),Ft.svg===!0&&(u(ht,ft),u(yt,lt),u(yt,dt)),Ft.svgFilters===!0&&(u(ht,B),u(yt,lt),u(yt,dt)),Ft.mathMl===!0&&(u(ht,mt),u(yt,Q),u(yt,dt))),r.ADD_TAGS&&(ht===Qe&&(ht=L(ht)),u(ht,r.ADD_TAGS)),r.ADD_ATTR&&(yt===Ae&&(yt=L(yt)),u(yt,r.ADD_ATTR)),r.ADD_URI_SAFE_ATTR&&u(Fe,r.ADD_URI_SAFE_ATTR),r.FORBID_CONTENTS&&(Qt===nn&&(Qt=L(Qt)),u(Qt,r.FORBID_CONTENTS)),Xt&&(ht["#text"]=!0),jt&&u(ht,["html","head","body"]),ht.table&&(u(ht,["tbody"]),delete Zt.tbody),I&&I(r),te=r)},It=u({},["mi","mo","mn","ms","mtext"]),ce=u({},["foreignobject","desc","title","annotation-xml"]),cn=u({},["title","style","font","a","script"]),qt=u({},ft);u(qt,B),u(qt,ct);var Pe=u({},mt);u(Pe,gt);var ln=function(r){var x=Se(r);x&&x.tagName||(x={namespaceURI:Rt,tagName:"template"});var b=J(r.tagName),V=J(x.tagName);return r.namespaceURI===Me?x.namespaceURI===Rt?b==="svg":x.namespaceURI===ae?b==="svg"&&(V==="annotation-xml"||It[V]):Boolean(qt[b]):r.namespaceURI===ae?x.namespaceURI===Rt?b==="math":x.namespaceURI===Me?b==="math"&&ce[V]:Boolean(Pe[b]):r.namespaceURI===Rt&&!(x.namespaceURI===Me&&!ce[V])&&!(x.namespaceURI===ae&&!It[V])&&!Pe[b]&&(cn[b]||!qt[b])},Lt=function(r){$(E.removed,{element:r});try{r.parentNode.removeChild(r)}catch{try{r.outerHTML=Ke}catch{r.remove()}}},Ue=function(r,x){try{$(E.removed,{attribute:x.getAttributeNode(r),from:x})}catch{$(E.removed,{attribute:null,from:x})}if(x.removeAttribute(r),r==="is"&&!yt[r])if(Yt||ye)try{Lt(x)}catch{}else try{x.setAttribute(r,"")}catch{}},un=function(r){var x,b;if(Ie)r="<remove></remove>"+r;else{var V=nt(r,/^[\r\n\t ]+/);b=V&&V[0]}oe==="application/xhtml+xml"&&(r='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+r+"</body></html>");var it=Nt?Nt.createHTML(r):r;if(be===Rt)try{x=new xe().parseFromString(it,oe)}catch{}if(!x||!x.documentElement){x=he.createDocument(be,"template",null);try{x.documentElement.innerHTML=on?"":it}catch{}}var e=x.body||x.documentElement;return r&&b&&e.insertBefore(rt.createTextNode(b),e.childNodes[0]||null),be===Rt?Ve.call(x,jt?"html":"body")[0]:jt?x.documentElement:e},ve=function(r){return re.call(r.ownerDocument||r,r,we.SHOW_ELEMENT|we.SHOW_COMMENT|we.SHOW_TEXT,null,!1)},xn=function(r){return r instanceof We&&(typeof r.nodeName!="string"||typeof r.textContent!="string"||typeof r.removeChild!="function"||!(r.attributes instanceof Ce)||typeof r.removeAttribute!="function"||typeof r.setAttribute!="function"||typeof r.namespaceURI!="string"||typeof r.insertBefore!="function")},le=function(r){return p(Ht)==="object"?r instanceof Ht:r&&p(r)==="object"&&typeof r.nodeType=="number"&&typeof r.nodeName=="string"},wt=function(r,x,b){kt[r]&&d(kt[r],function(V){V.call(E,x,b,te)})},ue=function(r){var x;if(wt("beforeSanitizeElements",r,null),xn(r)||at(/[\u0080-\uFFFF]/,r.nodeName))return Lt(r),!0;var b=$t(r.nodeName);if(wt("uponSanitizeElement",r,{tagName:b,allowedTags:ht}),r.hasChildNodes()&&!le(r.firstElementChild)&&(!le(r.content)||!le(r.content.firstElementChild))&&at(/<[/\w]/g,r.innerHTML)&&at(/<[/\w]/g,r.textContent)||b==="select"&&at(/<template/i,r.innerHTML))return Lt(r),!0;if(!ht[b]||Zt[b]){if(!Zt[b]&&ze(b)&&(ut.tagNameCheck instanceof RegExp&&at(ut.tagNameCheck,b)||ut.tagNameCheck instanceof Function&&ut.tagNameCheck(b)))return!1;if(Xt&&!Qt[b]){var V=Se(r)||r.parentNode,it=bn(r)||r.childNodes;if(it&&V)for(var e=it.length-1;e>=0;--e)V.insertBefore(Je(it[e],!0),Ze(r))}return Lt(r),!0}return r instanceof Be&&!ln(r)?(Lt(r),!0):b!=="noscript"&&b!=="noembed"||!at(/<\/no(script|embed)/i,r.innerHTML)?(Kt&&r.nodeType===3&&(x=r.textContent,x=st(x,Te," "),x=st(x,me," "),r.textContent!==x&&($(E.removed,{element:r.cloneNode()}),r.textContent=x)),wt("afterSanitizeElements",r,null),!1):(Lt(r),!0)},pn=function(r,x,b){if(Le&&(x==="id"||x==="name")&&(b in rt||b in Cn))return!1;if(!(je&&!Ee[x]&&at(vn,x))){if(!(tn&&at(_n,x))){if(!yt[x]||Ee[x]){if(!(ze(r)&&(ut.tagNameCheck instanceof RegExp&&at(ut.tagNameCheck,r)||ut.tagNameCheck instanceof Function&&ut.tagNameCheck(r))&&(ut.attributeNameCheck instanceof RegExp&&at(ut.attributeNameCheck,x)||ut.attributeNameCheck instanceof Function&&ut.attributeNameCheck(x))||x==="is"&&ut.allowCustomizedBuiltInElements&&(ut.tagNameCheck instanceof RegExp&&at(ut.tagNameCheck,b)||ut.tagNameCheck instanceof Function&&ut.tagNameCheck(b))))return!1}else if(!Fe[x]){if(!at(ge,st(b,Xe,""))){if((x!=="src"&&x!=="xlink:href"&&x!=="href"||r==="script"||xt(b,"data:")!==0||!Ne[r])&&!(en&&!at(wn,st(b,Xe,"")))){if(b)return!1}}}}}return!0},ze=function(r){return r.indexOf("-")>0},fn=function(r){var x,b,V,it;wt("beforeSanitizeAttributes",r,null);var e=r.attributes;if(e){var t={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:yt};for(it=e.length;it--;){var n=x=e[it],o=n.name,a=n.namespaceURI;if(b=o==="value"?x.value:_t(x.value),V=$t(o),t.attrName=V,t.attrValue=b,t.keepAttr=!0,t.forceKeepAttr=void 0,wt("uponSanitizeAttribute",r,t),b=t.attrValue,!t.forceKeepAttr&&(Ue(o,r),t.keepAttr))if(at(/\/>/i,b))Ue(o,r);else{Kt&&(b=st(b,Te," "),b=st(b,me," "));var f=$t(r.nodeName);if(pn(f,V,b))try{a?r.setAttributeNS(a,o,b):r.setAttribute(o,b),C(E.removed)}catch{}}}wt("afterSanitizeAttributes",r,null)}},Sn=function r(x){var b,V=ve(x);for(wt("beforeSanitizeShadowDOM",x,null);b=V.nextNode();)wt("uponSanitizeShadowNode",b,null),ue(b)||(b.content instanceof Ot&&r(b.content),fn(b));wt("afterSanitizeShadowDOM",x,null)};return E.sanitize=function(r,x){var b,V,it,e,t;if((on=!r)&&(r="<!-->"),typeof r!="string"&&!le(r)){if(typeof r.toString!="function")throw Wt("toString is not a function");if(typeof(r=r.toString())!="string")throw Wt("dirty is not a string, aborting")}if(!E.isSupported){if(p(v.toStaticHTML)==="object"||typeof v.toStaticHTML=="function"){if(typeof r=="string")return v.toStaticHTML(r);if(le(r))return v.toStaticHTML(r.outerHTML)}return r}if(Vt||De(x),E.removed=[],typeof r=="string"&&(se=!1),se){if(r.nodeName){var n=$t(r.nodeName);if(!ht[n]||Zt[n])throw Wt("root node is forbidden and cannot be sanitized in-place")}}else if(r instanceof Ht)(V=(b=un("<!---->")).ownerDocument.importNode(r,!0)).nodeType===1&&V.nodeName==="BODY"||V.nodeName==="HTML"?b=V:b.appendChild(V);else{if(!Yt&&!Kt&&!jt&&r.indexOf("<")===-1)return Nt&&ie?Nt.createHTML(r):r;if(!(b=un(r)))return Yt?null:ie?Ke:""}b&&Ie&&Lt(b.firstChild);for(var o=ve(se?r:b);it=o.nextNode();)it.nodeType===3&&it===e||ue(it)||(it.content instanceof Ot&&Sn(it.content),fn(it),e=it);if(e=null,se)return r;if(Yt){if(ye)for(t=Oe.call(b.ownerDocument);b.firstChild;)t.appendChild(b.firstChild);else t=b;return yt.shadowroot&&(t=Ye.call(W,t,!0)),t}var a=jt?b.outerHTML:b.innerHTML;return jt&&ht["!doctype"]&&b.ownerDocument&&b.ownerDocument.doctype&&b.ownerDocument.doctype.name&&at(gn,b.ownerDocument.doctype.name)&&(a="<!DOCTYPE "+b.ownerDocument.doctype.name+`>
`+a),Kt&&(a=st(a,Te," "),a=st(a,me," ")),Nt&&ie?Nt.createHTML(a):a},E.setConfig=function(r){De(r),Vt=!0},E.clearConfig=function(){te=null,Vt=!1},E.isValidAttribute=function(r,x,b){te||De({});var V=$t(r),it=$t(x);return pn(V,it,b)},E.addHook=function(r,x){typeof x=="function"&&(kt[r]=kt[r]||[],$(kt[r],x))},E.removeHook=function(r){if(kt[r])return C(kt[r])},E.removeHooks=function(r){kt[r]&&(kt[r]=[])},E.removeAllHooks=function(){kt={}},E}()}()},729:R=>{var p=Object.prototype.hasOwnProperty,S="~";function N(){}function w(l,g,y){this.fn=l,this.context=g,this.once=y||!1}function T(l,g,y,z,I){if(typeof y!="function")throw new TypeError("The listener must be a function");var A=new w(y,z||l,I),H=S?S+g:g;return l._events[H]?l._events[H].fn?l._events[H]=[l._events[H],A]:l._events[H].push(A):(l._events[H]=A,l._eventsCount++),l}function U(l,g){--l._eventsCount==0?l._events=new N:delete l._events[g]}function m(){this._events=new N,this._eventsCount=0}Object.create&&(N.prototype=Object.create(null),new N().__proto__||(S=!1)),m.prototype.eventNames=function(){var l,g,y=[];if(this._eventsCount===0)return y;for(g in l=this._events)p.call(l,g)&&y.push(S?g.slice(1):g);return Object.getOwnPropertySymbols?y.concat(Object.getOwnPropertySymbols(l)):y},m.prototype.listeners=function(l){var g=S?S+l:l,y=this._events[g];if(!y)return[];if(y.fn)return[y.fn];for(var z=0,I=y.length,A=new Array(I);z<I;z++)A[z]=y[z].fn;return A},m.prototype.listenerCount=function(l){var g=S?S+l:l,y=this._events[g];return y?y.fn?1:y.length:0},m.prototype.emit=function(l,g,y,z,I,A){var H=S?S+l:l;if(!this._events[H])return!1;var k,F,i=this._events[H],s=arguments.length;if(i.fn){switch(i.once&&this.removeListener(l,i.fn,void 0,!0),s){case 1:return i.fn.call(i.context),!0;case 2:return i.fn.call(i.context,g),!0;case 3:return i.fn.call(i.context,g,y),!0;case 4:return i.fn.call(i.context,g,y,z),!0;case 5:return i.fn.call(i.context,g,y,z,I),!0;case 6:return i.fn.call(i.context,g,y,z,I,A),!0}for(F=1,k=new Array(s-1);F<s;F++)k[F-1]=arguments[F];i.fn.apply(i.context,k)}else{var d,C=i.length;for(F=0;F<C;F++)switch(i[F].once&&this.removeListener(l,i[F].fn,void 0,!0),s){case 1:i[F].fn.call(i[F].context);break;case 2:i[F].fn.call(i[F].context,g);break;case 3:i[F].fn.call(i[F].context,g,y);break;case 4:i[F].fn.call(i[F].context,g,y,z);break;default:if(!k)for(d=1,k=new Array(s-1);d<s;d++)k[d-1]=arguments[d];i[F].fn.apply(i[F].context,k)}}return!0},m.prototype.on=function(l,g,y){return T(this,l,g,y,!1)},m.prototype.once=function(l,g,y){return T(this,l,g,y,!0)},m.prototype.removeListener=function(l,g,y,z){var I=S?S+l:l;if(!this._events[I])return this;if(!g)return U(this,I),this;var A=this._events[I];if(A.fn)A.fn!==g||z&&!A.once||y&&A.context!==y||U(this,I);else{for(var H=0,k=[],F=A.length;H<F;H++)(A[H].fn!==g||z&&!A[H].once||y&&A[H].context!==y)&&k.push(A[H]);k.length?this._events[I]=k.length===1?k[0]:k:U(this,I)}return this},m.prototype.removeAllListeners=function(l){var g;return l?(g=S?S+l:l,this._events[g]&&U(this,g)):(this._events=new N,this._eventsCount=0),this},m.prototype.off=m.prototype.removeListener,m.prototype.addListener=m.prototype.on,m.prefixed=S,m.EventEmitter=m,R.exports=m},824:R=>{var p=1e3,S=60*p,N=60*S,w=24*N;function T(U,m,l,g){var y=m>=1.5*l;return Math.round(U/l)+" "+g+(y?"s":"")}R.exports=function(U,m){m=m||{};var l,g,y=typeof U;if(y==="string"&&U.length>0)return function(z){if(!((z=String(z)).length>100)){var I=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(z);if(I){var A=parseFloat(I[1]);switch((I[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*A;case"weeks":case"week":case"w":return 6048e5*A;case"days":case"day":case"d":return A*w;case"hours":case"hour":case"hrs":case"hr":case"h":return A*N;case"minutes":case"minute":case"mins":case"min":case"m":return A*S;case"seconds":case"second":case"secs":case"sec":case"s":return A*p;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return A;default:return}}}}(U);if(y==="number"&&isFinite(U))return m.long?(l=U,(g=Math.abs(l))>=w?T(l,g,w,"day"):g>=N?T(l,g,N,"hour"):g>=S?T(l,g,S,"minute"):g>=p?T(l,g,p,"second"):l+" ms"):function(z){var I=Math.abs(z);return I>=w?Math.round(z/w)+"d":I>=N?Math.round(z/N)+"h":I>=S?Math.round(z/S)+"m":I>=p?Math.round(z/p)+"s":z+"ms"}(U);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(U))}},520:(R,p,S)=>{var N=S(155),w=N.platform==="win32",T=S(539);function U(i,s){for(var d=[],C=0;C<i.length;C++){var $=i[C];$&&$!=="."&&($===".."?d.length&&d[d.length-1]!==".."?d.pop():s&&d.push(".."):d.push($))}return d}function m(i){for(var s=i.length-1,d=0;d<=s&&!i[d];d++);for(var C=s;C>=0&&!i[C];C--);return d===0&&C===s?i:d>C?[]:i.slice(d,C+1)}var l=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,g=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,y={};function z(i){var s=l.exec(i),d=(s[1]||"")+(s[2]||""),C=s[3]||"",$=g.exec(C);return[d,$[1],$[2],$[3]]}function I(i){var s=l.exec(i),d=s[1]||"",C=!!d&&d[1]!==":";return{device:d,isUnc:C,isAbsolute:C||!!s[2],tail:s[3]}}function A(i){return"\\\\"+i.replace(/^[\\\/]+/,"").replace(/[\\\/]+/g,"\\")}y.resolve=function(){for(var i="",s="",d=!1,C=arguments.length-1;C>=-1;C--){var $;if(C>=0?$=arguments[C]:i?($=N.env["="+i])&&$.substr(0,3).toLowerCase()===i.toLowerCase()+"\\"||($=i+"\\"):$=N.cwd(),!T.isString($))throw new TypeError("Arguments to path.resolve must be strings");if($){var J=I($),nt=J.device,st=J.isUnc,xt=J.isAbsolute,_t=J.tail;if((!nt||!i||nt.toLowerCase()===i.toLowerCase())&&(i||(i=nt),d||(s=_t+"\\"+s,d=xt),i&&d))break}}return st&&(i=A(i)),i+(d?"\\":"")+(s=U(s.split(/[\\\/]+/),!d).join("\\"))||"."},y.normalize=function(i){var s=I(i),d=s.device,C=s.isUnc,$=s.isAbsolute,J=s.tail,nt=/[\\\/]$/.test(J);return(J=U(J.split(/[\\\/]+/),!$).join("\\"))||$||(J="."),J&&nt&&(J+="\\"),C&&(d=A(d)),d+($?"\\":"")+J},y.isAbsolute=function(i){return I(i).isAbsolute},y.join=function(){for(var i=[],s=0;s<arguments.length;s++){var d=arguments[s];if(!T.isString(d))throw new TypeError("Arguments to path.join must be strings");d&&i.push(d)}var C=i.join("\\");return/^[\\\/]{2}[^\\\/]/.test(i[0])||(C=C.replace(/^[\\\/]{2,}/,"\\")),y.normalize(C)},y.relative=function(i,s){i=y.resolve(i),s=y.resolve(s);for(var d=i.toLowerCase(),C=s.toLowerCase(),$=m(s.split("\\")),J=m(d.split("\\")),nt=m(C.split("\\")),st=Math.min(J.length,nt.length),xt=st,_t=0;_t<st;_t++)if(J[_t]!==nt[_t]){xt=_t;break}if(xt==0)return s;var at=[];for(_t=xt;_t<J.length;_t++)at.push("..");return(at=at.concat($.slice(xt))).join("\\")},y._makeLong=function(i){if(!T.isString(i))return i;if(!i)return"";var s=y.resolve(i);return/^[a-zA-Z]\:\\/.test(s)?"\\\\?\\"+s:/^\\\\[^?.]/.test(s)?"\\\\?\\UNC\\"+s.substring(2):i},y.dirname=function(i){var s=z(i),d=s[0],C=s[1];return d||C?(C&&(C=C.substr(0,C.length-1)),d+C):"."},y.basename=function(i,s){var d=z(i)[2];return s&&d.substr(-1*s.length)===s&&(d=d.substr(0,d.length-s.length)),d},y.extname=function(i){return z(i)[3]},y.format=function(i){if(!T.isObject(i))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof i);var s=i.root||"";if(!T.isString(s))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof i.root);var d=i.dir,C=i.base||"";return d?d[d.length-1]===y.sep?d+C:d+y.sep+C:C},y.parse=function(i){if(!T.isString(i))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof i);var s=z(i);if(!s||s.length!==4)throw new TypeError("Invalid path '"+i+"'");return{root:s[0],dir:s[0]+s[1].slice(0,-1),base:s[2],ext:s[3],name:s[2].slice(0,s[2].length-s[3].length)}},y.sep="\\",y.delimiter=";";var H=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,k={};function F(i){return H.exec(i).slice(1)}k.resolve=function(){for(var i="",s=!1,d=arguments.length-1;d>=-1&&!s;d--){var C=d>=0?arguments[d]:N.cwd();if(!T.isString(C))throw new TypeError("Arguments to path.resolve must be strings");C&&(i=C+"/"+i,s=C[0]==="/")}return(s?"/":"")+(i=U(i.split("/"),!s).join("/"))||"."},k.normalize=function(i){var s=k.isAbsolute(i),d=i&&i[i.length-1]==="/";return(i=U(i.split("/"),!s).join("/"))||s||(i="."),i&&d&&(i+="/"),(s?"/":"")+i},k.isAbsolute=function(i){return i.charAt(0)==="/"},k.join=function(){for(var i="",s=0;s<arguments.length;s++){var d=arguments[s];if(!T.isString(d))throw new TypeError("Arguments to path.join must be strings");d&&(i+=i?"/"+d:d)}return k.normalize(i)},k.relative=function(i,s){i=k.resolve(i).substr(1),s=k.resolve(s).substr(1);for(var d=m(i.split("/")),C=m(s.split("/")),$=Math.min(d.length,C.length),J=$,nt=0;nt<$;nt++)if(d[nt]!==C[nt]){J=nt;break}var st=[];for(nt=J;nt<d.length;nt++)st.push("..");return(st=st.concat(C.slice(J))).join("/")},k._makeLong=function(i){return i},k.dirname=function(i){var s=F(i),d=s[0],C=s[1];return d||C?(C&&(C=C.substr(0,C.length-1)),d+C):"."},k.basename=function(i,s){var d=F(i)[2];return s&&d.substr(-1*s.length)===s&&(d=d.substr(0,d.length-s.length)),d},k.extname=function(i){return F(i)[3]},k.format=function(i){if(!T.isObject(i))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof i);var s=i.root||"";if(!T.isString(s))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof i.root);return(i.dir?i.dir+k.sep:"")+(i.base||"")},k.parse=function(i){if(!T.isString(i))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof i);var s=F(i);if(!s||s.length!==4)throw new TypeError("Invalid path '"+i+"'");return s[1]=s[1]||"",s[2]=s[2]||"",s[3]=s[3]||"",{root:s[0],dir:s[0]+s[1].slice(0,-1),base:s[2],ext:s[3],name:s[2].slice(0,s[2].length-s[3].length)}},k.sep="/",k.delimiter=":",R.exports=w?y:k,R.exports.posix=k,R.exports.win32=y},155:R=>{var p,S,N=R.exports={};function w(){throw new Error("setTimeout has not been defined")}function T(){throw new Error("clearTimeout has not been defined")}function U(k){if(p===setTimeout)return setTimeout(k,0);if((p===w||!p)&&setTimeout)return p=setTimeout,setTimeout(k,0);try{return p(k,0)}catch{try{return p.call(null,k,0)}catch{return p.call(this,k,0)}}}(function(){try{p=typeof setTimeout=="function"?setTimeout:w}catch{p=w}try{S=typeof clearTimeout=="function"?clearTimeout:T}catch{S=T}})();var m,l=[],g=!1,y=-1;function z(){g&&m&&(g=!1,m.length?l=m.concat(l):y=-1,l.length&&I())}function I(){if(!g){var k=U(z);g=!0;for(var F=l.length;F;){for(m=l,l=[];++y<F;)m&&m[y].run();y=-1,F=l.length}m=null,g=!1,function(i){if(S===clearTimeout)return clearTimeout(i);if((S===T||!S)&&clearTimeout)return S=clearTimeout,clearTimeout(i);try{S(i)}catch{try{return S.call(null,i)}catch{return S.call(this,i)}}}(k)}}function A(k,F){this.fun=k,this.array=F}function H(){}N.nextTick=function(k){var F=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)F[i-1]=arguments[i];l.push(new A(k,F)),l.length!==1||g||U(I)},A.prototype.run=function(){this.fun.apply(null,this.array)},N.title="browser",N.browser=!0,N.env={},N.argv=[],N.version="",N.versions={},N.on=H,N.addListener=H,N.once=H,N.off=H,N.removeListener=H,N.removeAllListeners=H,N.emit=H,N.prependListener=H,N.prependOnceListener=H,N.listeners=function(k){return[]},N.binding=function(k){throw new Error("process.binding is not supported")},N.cwd=function(){return"/"},N.chdir=function(k){throw new Error("process.chdir is not supported")},N.umask=function(){return 0}},496:R=>{typeof Object.create=="function"?R.exports=function(p,S){p.super_=S,p.prototype=Object.create(S.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}})}:R.exports=function(p,S){p.super_=S;var N=function(){};N.prototype=S.prototype,p.prototype=new N,p.prototype.constructor=p}},384:R=>{R.exports=function(p){return p&&typeof p=="object"&&typeof p.copy=="function"&&typeof p.fill=="function"&&typeof p.readUInt8=="function"}},539:(R,p,S)=>{var N=S(155),w=/%[sdj%]/g;p.format=function(c){if(!i(c)){for(var u=[],L=0;L<arguments.length;L++)u.push(m(arguments[L]));return u.join(" ")}L=1;for(var X=arguments,bt=X.length,ft=String(c).replace(w,function(ct){if(ct==="%%")return"%";if(L>=bt)return ct;switch(ct){case"%s":return String(X[L++]);case"%d":return Number(X[L++]);case"%j":try{return JSON.stringify(X[L++])}catch{return"[Circular]"}default:return ct}}),B=X[L];L<bt;B=X[++L])k(B)||!C(B)?ft+=" "+B:ft+=" "+m(B);return ft},p.deprecate=function(c,u){if(s(S.g.process))return function(){return p.deprecate(c,u).apply(this,arguments)};if(N.noDeprecation===!0)return c;var L=!1;return function(){if(!L){if(N.throwDeprecation)throw new Error(u);N.traceDeprecation?console.trace(u):console.error(u),L=!0}return c.apply(this,arguments)}};var T,U={};function m(c,u){var L={seen:[],stylize:g};return arguments.length>=3&&(L.depth=arguments[2]),arguments.length>=4&&(L.colors=arguments[3]),H(u)?L.showHidden=u:u&&p._extend(L,u),s(L.showHidden)&&(L.showHidden=!1),s(L.depth)&&(L.depth=2),s(L.colors)&&(L.colors=!1),s(L.customInspect)&&(L.customInspect=!0),L.colors&&(L.stylize=l),y(L,c,L.depth)}function l(c,u){var L=m.styles[u];return L?"\x1B["+m.colors[L][0]+"m"+c+"\x1B["+m.colors[L][1]+"m":c}function g(c,u){return c}function y(c,u,L){if(c.customInspect&&u&&nt(u.inspect)&&u.inspect!==p.inspect&&(!u.constructor||u.constructor.prototype!==u)){var X=u.inspect(L,c);return i(X)||(X=y(c,X,L)),X}var bt=function(lt,Q){if(s(Q))return lt.stylize("undefined","undefined");if(i(Q)){var dt="'"+JSON.stringify(Q).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return lt.stylize(dt,"string")}return F(Q)?lt.stylize(""+Q,"number"):H(Q)?lt.stylize(""+Q,"boolean"):k(Q)?lt.stylize("null","null"):void 0}(c,u);if(bt)return bt;var ft=Object.keys(u),B=function(lt){var Q={};return lt.forEach(function(dt,Et){Q[dt]=!0}),Q}(ft);if(c.showHidden&&(ft=Object.getOwnPropertyNames(u)),J(u)&&(ft.indexOf("message")>=0||ft.indexOf("description")>=0))return z(u);if(ft.length===0){if(nt(u)){var ct=u.name?": "+u.name:"";return c.stylize("[Function"+ct+"]","special")}if(d(u))return c.stylize(RegExp.prototype.toString.call(u),"regexp");if($(u))return c.stylize(Date.prototype.toString.call(u),"date");if(J(u))return z(u)}var mt,gt="",Pt=!1,St=["{","}"];return A(u)&&(Pt=!0,St=["[","]"]),nt(u)&&(gt=" [Function"+(u.name?": "+u.name:"")+"]"),d(u)&&(gt=" "+RegExp.prototype.toString.call(u)),$(u)&&(gt=" "+Date.prototype.toUTCString.call(u)),J(u)&&(gt=" "+z(u)),ft.length!==0||Pt&&u.length!=0?L<0?d(u)?c.stylize(RegExp.prototype.toString.call(u),"regexp"):c.stylize("[Object]","special"):(c.seen.push(u),mt=Pt?function(lt,Q,dt,Et,Gt){for(var Ut=[],zt=0,pe=Q.length;zt<pe;++zt)Wt(Q,String(zt))?Ut.push(I(lt,Q,dt,Et,String(zt),!0)):Ut.push("");return Gt.forEach(function(ee){ee.match(/^\d+$/)||Ut.push(I(lt,Q,dt,Et,ee,!0))}),Ut}(c,u,L,B,ft):ft.map(function(lt){return I(c,u,L,B,lt,Pt)}),c.seen.pop(),function(lt,Q,dt){return lt.reduce(function(Et,Gt){return Gt.indexOf(`
`),Et+Gt.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?dt[0]+(Q===""?"":Q+`
 `)+" "+lt.join(`,
  `)+" "+dt[1]:dt[0]+Q+" "+lt.join(", ")+" "+dt[1]}(mt,gt,St)):St[0]+gt+St[1]}function z(c){return"["+Error.prototype.toString.call(c)+"]"}function I(c,u,L,X,bt,ft){var B,ct,mt;if((mt=Object.getOwnPropertyDescriptor(u,bt)||{value:u[bt]}).get?ct=mt.set?c.stylize("[Getter/Setter]","special"):c.stylize("[Getter]","special"):mt.set&&(ct=c.stylize("[Setter]","special")),Wt(X,bt)||(B="["+bt+"]"),ct||(c.seen.indexOf(mt.value)<0?(ct=k(L)?y(c,mt.value,null):y(c,mt.value,L-1)).indexOf(`
`)>-1&&(ct=ft?ct.split(`
`).map(function(gt){return"  "+gt}).join(`
`).substr(2):`
`+ct.split(`
`).map(function(gt){return"   "+gt}).join(`
`)):ct=c.stylize("[Circular]","special")),s(B)){if(ft&&bt.match(/^\d+$/))return ct;(B=JSON.stringify(""+bt)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(B=B.substr(1,B.length-2),B=c.stylize(B,"name")):(B=B.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),B=c.stylize(B,"string"))}return B+": "+ct}function A(c){return Array.isArray(c)}function H(c){return typeof c=="boolean"}function k(c){return c===null}function F(c){return typeof c=="number"}function i(c){return typeof c=="string"}function s(c){return c===void 0}function d(c){return C(c)&&st(c)==="[object RegExp]"}function C(c){return typeof c=="object"&&c!==null}function $(c){return C(c)&&st(c)==="[object Date]"}function J(c){return C(c)&&(st(c)==="[object Error]"||c instanceof Error)}function nt(c){return typeof c=="function"}function st(c){return Object.prototype.toString.call(c)}function xt(c){return c<10?"0"+c.toString(10):c.toString(10)}p.debuglog=function(c){if(s(T)&&(T=N.env.NODE_DEBUG||""),c=c.toUpperCase(),!U[c])if(new RegExp("\\b"+c+"\\b","i").test(T)){var u=N.pid;U[c]=function(){var L=p.format.apply(p,arguments);console.error("%s %d: %s",c,u,L)}}else U[c]=function(){};return U[c]},p.inspect=m,m.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},m.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},p.isArray=A,p.isBoolean=H,p.isNull=k,p.isNullOrUndefined=function(c){return c==null},p.isNumber=F,p.isString=i,p.isSymbol=function(c){return typeof c=="symbol"},p.isUndefined=s,p.isRegExp=d,p.isObject=C,p.isDate=$,p.isError=J,p.isFunction=nt,p.isPrimitive=function(c){return c===null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||typeof c=="symbol"||c===void 0},p.isBuffer=S(384);var _t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function at(){var c=new Date,u=[xt(c.getHours()),xt(c.getMinutes()),xt(c.getSeconds())].join(":");return[c.getDate(),_t[c.getMonth()],u].join(" ")}function Wt(c,u){return Object.prototype.hasOwnProperty.call(c,u)}p.log=function(){console.log("%s - %s",at(),p.format.apply(p,arguments))},p.inherits=S(496),p._extend=function(c,u){if(!u||!C(u))return c;for(var L=Object.keys(u),X=L.length;X--;)c[L[X]]=u[L[X]];return c}}},pt={};function q(R){var p=pt[R];if(p!==void 0)return p.exports;var S=pt[R]={exports:{}};return et[R].call(S.exports,S,S.exports,q),S.exports}q.n=R=>{var p=R&&R.__esModule?()=>R.default:()=>R;return q.d(p,{a:p}),p},q.d=(R,p)=>{for(var S in p)q.o(p,S)&&!q.o(R,S)&&Object.defineProperty(R,S,{enumerable:!0,get:p[S]})},q.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),q.o=(R,p)=>Object.prototype.hasOwnProperty.call(R,p),q.r=R=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(R,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(R,"__esModule",{value:!0})};var Ct={};return(()=>{q.r(Ct),q.d(Ct,{LSPluginUser:()=>V,setupPluginUserInstance:()=>it});var R=q(520);q(856);const p=function(e,t){return e===t||e!=e&&t!=t},S=function(e,t){for(var n=e.length;n--;)if(p(e[n][0],t))return n;return-1};var N=Array.prototype.splice;function w(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}w.prototype.clear=function(){this.__data__=[],this.size=0},w.prototype.delete=function(e){var t=this.__data__,n=S(t,e);return!(n<0||(n==t.length-1?t.pop():N.call(t,n,1),--this.size,0))},w.prototype.get=function(e){var t=this.__data__,n=S(t,e);return n<0?void 0:t[n][1]},w.prototype.has=function(e){return S(this.__data__,e)>-1},w.prototype.set=function(e,t){var n=this.__data__,o=S(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this};const T=w,U=typeof dn=="object"&&dn&&dn.Object===Object&&dn;var m=typeof self=="object"&&self&&self.Object===Object&&self;const l=U||m||Function("return this")(),g=l.Symbol;var y=Object.prototype,z=y.hasOwnProperty,I=y.toString,A=g?g.toStringTag:void 0,H=Object.prototype.toString,k=g?g.toStringTag:void 0;const F=function(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":k&&k in Object(e)?function(t){var n=z.call(t,A),o=t[A];try{t[A]=void 0;var a=!0}catch{}var f=I.call(t);return a&&(n?t[A]=o:delete t[A]),f}(e):function(t){return H.call(t)}(e)},i=function(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")},s=function(e){if(!i(e))return!1;var t=F(e);return t=="[object Function]"||t=="[object GeneratorFunction]"||t=="[object AsyncFunction]"||t=="[object Proxy]"},d=l["__core-js_shared__"];var C,$=(C=/[^.]+$/.exec(d&&d.keys&&d.keys.IE_PROTO||""))?"Symbol(src)_1."+C:"",J=Function.prototype.toString,nt=/^\[object .+?Constructor\]$/,st=Function.prototype,xt=Object.prototype,_t=st.toString,at=xt.hasOwnProperty,Wt=RegExp("^"+_t.call(at).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const c=function(e){return!(!i(e)||(t=e,$&&$ in t))&&(s(e)?Wt:nt).test(function(n){if(n!=null){try{return J.call(n)}catch{}try{return n+""}catch{}}return""}(e));var t},u=function(e,t){var n=function(o,a){return o?.[a]}(e,t);return c(n)?n:void 0},L=u(l,"Map"),X=u(Object,"create");var bt=Object.prototype.hasOwnProperty,ft=Object.prototype.hasOwnProperty;function B(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}B.prototype.clear=function(){this.__data__=X?X(null):{},this.size=0},B.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},B.prototype.get=function(e){var t=this.__data__;if(X){var n=t[e];return n==="__lodash_hash_undefined__"?void 0:n}return bt.call(t,e)?t[e]:void 0},B.prototype.has=function(e){var t=this.__data__;return X?t[e]!==void 0:ft.call(t,e)},B.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=X&&t===void 0?"__lodash_hash_undefined__":t,this};const ct=B,mt=function(e,t){var n,o,a=e.__data__;return((o=typeof(n=t))=="string"||o=="number"||o=="symbol"||o=="boolean"?n!=="__proto__":n===null)?a[typeof t=="string"?"string":"hash"]:a.map};function gt(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}gt.prototype.clear=function(){this.size=0,this.__data__={hash:new ct,map:new(L||T),string:new ct}},gt.prototype.delete=function(e){var t=mt(this,e).delete(e);return this.size-=t?1:0,t},gt.prototype.get=function(e){return mt(this,e).get(e)},gt.prototype.has=function(e){return mt(this,e).has(e)},gt.prototype.set=function(e,t){var n=mt(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this};const Pt=gt;function St(e){var t=this.__data__=new T(e);this.size=t.size}St.prototype.clear=function(){this.__data__=new T,this.size=0},St.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},St.prototype.get=function(e){return this.__data__.get(e)},St.prototype.has=function(e){return this.__data__.has(e)},St.prototype.set=function(e,t){var n=this.__data__;if(n instanceof T){var o=n.__data__;if(!L||o.length<199)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new Pt(o)}return n.set(e,t),this.size=n.size,this};const lt=St,Q=function(){try{var e=u(Object,"defineProperty");return e({},"",{}),e}catch{}}(),dt=function(e,t,n){t=="__proto__"&&Q?Q(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},Et=function(e,t,n){(n!==void 0&&!p(e[t],n)||n===void 0&&!(t in e))&&dt(e,t,n)},Gt=function(e,t,n){for(var o=-1,a=Object(e),f=n(e),h=f.length;h--;){var O=f[++o];if(t(a[O],O,a)===!1)break}return e};var Ut=G&&!G.nodeType&&G,zt=Ut&&!0&&K&&!K.nodeType&&K,pe=zt&&zt.exports===Ut?l.Buffer:void 0,ee=pe?pe.allocUnsafe:void 0;const $e=l.Uint8Array,gn=function(e,t){var n,o,a=t?(n=e.buffer,o=new n.constructor(n.byteLength),new $e(o).set(new $e(n)),o):e.buffer;return new e.constructor(a,e.byteOffset,e.length)};var qe=Object.create;const yn=function(){function e(){}return function(t){if(!i(t))return{};if(qe)return qe(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),D=(v=Object.getPrototypeOf,E=Object,function(e){return v(E(e))});var v,E,W=Object.prototype;const rt=function(e){var t=e&&e.constructor;return e===(typeof t=="function"&&t.prototype||W)},Ot=function(e){return e!=null&&typeof e=="object"},Jt=function(e){return Ot(e)&&F(e)=="[object Arguments]"};var Ht=Object.prototype,Be=Ht.hasOwnProperty,we=Ht.propertyIsEnumerable;const fe=Jt(function(){return arguments}())?Jt:function(e){return Ot(e)&&Be.call(e,"callee")&&!we.call(e,"callee")},Ce=Array.isArray,We=function(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=9007199254740991},xe=function(e){return e!=null&&We(e.length)&&!s(e)};var Ge=G&&!G.nodeType&&G,ne=Ge&&!0&&K&&!K.nodeType&&K,Je=ne&&ne.exports===Ge?l.Buffer:void 0;const Ze=(Je?Je.isBuffer:void 0)||function(){return!1};var bn=Function.prototype,Se=Object.prototype,de=bn.toString,Nt=Se.hasOwnProperty,Ke=de.call(Object),Y={};Y["[object Float32Array]"]=Y["[object Float64Array]"]=Y["[object Int8Array]"]=Y["[object Int16Array]"]=Y["[object Int32Array]"]=Y["[object Uint8Array]"]=Y["[object Uint8ClampedArray]"]=Y["[object Uint16Array]"]=Y["[object Uint32Array]"]=!0,Y["[object Arguments]"]=Y["[object Array]"]=Y["[object ArrayBuffer]"]=Y["[object Boolean]"]=Y["[object DataView]"]=Y["[object Date]"]=Y["[object Error]"]=Y["[object Function]"]=Y["[object Map]"]=Y["[object Number]"]=Y["[object Object]"]=Y["[object RegExp]"]=Y["[object Set]"]=Y["[object String]"]=Y["[object WeakMap]"]=!1;var he=G&&!G.nodeType&&G,re=he&&!0&&K&&!K.nodeType&&K,Oe=re&&re.exports===he&&U.process,Ve=function(){try{return re&&re.require&&re.require("util").types||Oe&&Oe.binding&&Oe.binding("util")}catch{}}(),Ye=Ve&&Ve.isTypedArray;const ke=Ye?function(e){return function(t){return e(t)}}(Ye):function(e){return Ot(e)&&We(e.length)&&!!Y[F(e)]},kt=function(e,t){if((t!=="constructor"||typeof e[t]!="function")&&t!="__proto__")return e[t]};var oe=Object.prototype.hasOwnProperty;const $t=function(e,t,n){var o=e[t];oe.call(e,t)&&p(o,n)&&(n!==void 0||t in e)||dt(e,t,n)};var Te=/^(?:0|[1-9]\d*)$/;const me=function(e,t){var n=typeof e;return!!(t=t??9007199254740991)&&(n=="number"||n!="symbol"&&Te.test(e))&&e>-1&&e%1==0&&e<t};var vn=Object.prototype.hasOwnProperty;const _n=function(e,t){var n=Ce(e),o=!n&&fe(e),a=!n&&!o&&Ze(e),f=!n&&!o&&!a&&ke(e),h=n||o||a||f,O=h?function(M,P){for(var Z=-1,tt=Array(M);++Z<M;)tt[Z]=P(Z);return tt}(e.length,String):[],j=O.length;for(var _ in e)!t&&!vn.call(e,_)||h&&(_=="length"||a&&(_=="offset"||_=="parent")||f&&(_=="buffer"||_=="byteLength"||_=="byteOffset")||me(_,j))||O.push(_);return O};var wn=Object.prototype.hasOwnProperty;const Xe=function(e){if(!i(e))return function(a){var f=[];if(a!=null)for(var h in Object(a))f.push(h);return f}(e);var t=rt(e),n=[];for(var o in e)(o!="constructor"||!t&&wn.call(e,o))&&n.push(o);return n},ge=function(e){return xe(e)?_n(e,!0):Xe(e)},ht=function(e){return function(t,n,o,a){var f=!o;o||(o={});for(var h=-1,O=n.length;++h<O;){var j=n[h],_=a?a(o[j],t[j],j,o,t):void 0;_===void 0&&(_=t[j]),f?dt(o,j,_):$t(o,j,_)}return o}(e,ge(e))},Qe=function(e,t,n,o,a,f,h){var O,j=kt(e,n),_=kt(t,n),M=h.get(_);if(M)Et(e,n,M);else{var P=f?f(j,_,n+"",e,t,h):void 0,Z=P===void 0;if(Z){var tt=Ce(_),vt=!tt&&Ze(_),Bt=!tt&&!vt&&ke(_);P=_,tt||vt||Bt?Ce(j)?P=j:Ot(O=j)&&xe(O)?P=function(ot,At){var Tt=-1,He=ot.length;for(At||(At=Array(He));++Tt<He;)At[Tt]=ot[Tt];return At}(j):vt?(Z=!1,P=function(ot,At){if(At)return ot.slice();var Tt=ot.length,He=ee?ee(Tt):new ot.constructor(Tt);return ot.copy(He),He}(_,!0)):Bt?(Z=!1,P=gn(_,!0)):P=[]:function(ot){if(!Ot(ot)||F(ot)!="[object Object]")return!1;var At=D(ot);if(At===null)return!0;var Tt=Nt.call(At,"constructor")&&At.constructor;return typeof Tt=="function"&&Tt instanceof Tt&&de.call(Tt)==Ke}(_)||fe(_)?(P=j,fe(j)?P=ht(j):i(j)&&!s(j)||(P=function(ot){return typeof ot.constructor!="function"||rt(ot)?{}:yn(D(ot))}(_))):Z=!1}Z&&(h.set(_,P),a(P,_,o,f,h),h.delete(_)),Et(e,n,P)}},yt=function e(t,n,o,a,f){t!==n&&Gt(n,function(h,O){if(f||(f=new lt),i(h))Qe(t,n,O,o,e,a,f);else{var j=a?a(kt(t,O),h,O+"",t,n,f):void 0;j===void 0&&(j=h),Et(t,O,j)}},ge)},Ae=function(e){return e},ut=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)};var Zt=Math.max;const Ee=Q?function(e,t){return Q(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0});var n}:Ae;var tn=Date.now;const je=function(e){var t=0,n=0;return function(){var o=tn(),a=16-(o-n);if(n=o,a>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(Ee),en=function(e,t){return je(function(n,o,a){return o=Zt(o===void 0?n.length-1:o,0),function(){for(var f=arguments,h=-1,O=Zt(f.length-o,0),j=Array(O);++h<O;)j[h]=f[o+h];h=-1;for(var _=Array(o+1);++h<o;)_[h]=f[h];return _[o]=a(j),ut(n,this,_)}}(e,t,Ae),e+"")},Kt=(jt=function(e,t,n){yt(e,t,n)},en(function(e,t){var n=-1,o=t.length,a=o>1?t[o-1]:void 0,f=o>2?t[2]:void 0;for(a=jt.length>3&&typeof a=="function"?(o--,a):void 0,f&&function(O,j,_){if(!i(_))return!1;var M=typeof j;return!!(M=="number"?xe(_)&&me(j,_.length):M=="string"&&j in _)&&p(_[j],O)}(t[0],t[1],f)&&(a=o<3?void 0:a,o=1),e=Object(e);++n<o;){var h=t[n];h&&jt(e,h,n)}return e}));var jt,Vt=function(){return Vt=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Vt.apply(this,arguments)};function Ie(e){return e.toLowerCase()}var Yt=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],ye=/[^A-Z0-9]+/gi;function ie(e,t,n){return t instanceof RegExp?e.replace(t,n):t.reduce(function(o,a){return o.replace(a,n)},e)}const Le=navigator.platform.toLowerCase()==="win32"?R.win32:R.posix,Xt=function(e,t){return t===void 0&&(t={}),function(n,o){return o===void 0&&(o={}),function(a,f){f===void 0&&(f={});for(var h=f.splitRegexp,O=h===void 0?Yt:h,j=f.stripRegexp,_=j===void 0?ye:j,M=f.transform,P=M===void 0?Ie:M,Z=f.delimiter,tt=Z===void 0?" ":Z,vt=ie(ie(a,O,"$1\0$2"),_,"\0"),Bt=0,ot=vt.length;vt.charAt(Bt)==="\0";)Bt++;for(;vt.charAt(ot-1)==="\0";)ot--;return vt.slice(Bt,ot).split("\0").map(P).join(tt)}(n,Vt({delimiter:"."},o))}(e,Vt({delimiter:"_"},t))},se=Kt;function Ft(e,t){let n,o,a=!1;const f=O=>j=>{e&&clearTimeout(e),O(j),a=!0},h=new Promise((O,j)=>{n=f(O),o=f(j),e&&(e=setTimeout(()=>o(new Error(`[deferred timeout] ${t}`)),e))});return{created:Date.now(),setTag:O=>t=O,resolve:n,reject:o,promise:h,get settled(){return a}}}const Qt=new Map;window.__injectedUIEffects=Qt;var nn=q(227),Ne=q.n(nn);const Mt="application/x-postmate-v1+json";let Fe=0;const rn={handshake:1,"handshake-reply":1,call:1,emit:1,reply:1,request:1},ae=(e,t)=>!(typeof t=="string"&&e.origin!==t||!e.data||typeof e.data=="object"&&!("postmate"in e.data)||e.data.type!==Mt||!rn[e.data.postmate]);class Me{parent;frame;child;events={};childOrigin;listener;constructor(t){this.parent=t.parent,this.frame=t.frame,this.child=t.child,this.childOrigin=t.childOrigin,this.listener=n=>{if(!ae(n,this.childOrigin))return!1;const{data:o,name:a}=((n||{}).data||{}).value||{};n.data.postmate==="emit"&&a in this.events&&this.events[a].forEach(f=>{f.call(this,o)})},this.parent.addEventListener("message",this.listener,!1)}get(t){return new Promise(n=>{const o=++Fe,a=f=>{f.data.uid===o&&f.data.postmate==="reply"&&(this.parent.removeEventListener("message",a,!1),n(f.data.value))};this.parent.addEventListener("message",a,!1),this.child.postMessage({postmate:"request",type:Mt,property:t,uid:o},this.childOrigin)})}call(t,n){this.child.postMessage({postmate:"call",type:Mt,property:t,data:n},this.childOrigin)}on(t,n){this.events[t]||(this.events[t]=[]),this.events[t].push(n)}destroy(){window.removeEventListener("message",this.listener,!1),this.frame.parentNode.removeChild(this.frame)}}class Rt{model;parent;parentOrigin;child;constructor(t){this.model=t.model,this.parent=t.parent,this.parentOrigin=t.parentOrigin,this.child=t.child,this.child.addEventListener("message",n=>{if(!ae(n,this.parentOrigin))return;const{property:o,uid:a,data:f}=n.data;n.data.postmate!=="call"?((h,O)=>{const j=typeof h[O]=="function"?h[O]():h[O];return Promise.resolve(j)})(this.model,o).then(h=>{n.source.postMessage({property:o,postmate:"reply",type:Mt,uid:a,value:h},n.origin)}):o in this.model&&typeof this.model[o]=="function"&&this.model[o](f)})}emit(t,n){this.parent.postMessage({postmate:"emit",type:Mt,value:{name:t,data:n}},this.parentOrigin)}}class be{static debug=!1;container;parent;frame;child;childOrigin;url;model;static Model;constructor(t){this.container=t.container,this.url=t.url,this.parent=window,this.frame=document.createElement("iframe"),t.id&&(this.frame.id=t.id),t.name&&(this.frame.name=t.name),this.frame.classList.add.apply(this.frame.classList,t.classListArray||[]),this.container.appendChild(this.frame),this.child=this.frame.contentWindow,this.model=t.model||{}}sendHandshake(t){const n=(f=>{const h=document.createElement("a");h.href=f;const O=h.protocol.length>4?h.protocol:window.location.protocol,j=h.host.length?h.port==="80"||h.port==="443"?h.hostname:h.host:window.location.host;return h.origin||`${O}//${j}`})(t=t||this.url);let o,a=0;return new Promise((f,h)=>{const O=_=>!!ae(_,n)&&(_.data.postmate==="handshake-reply"?(clearInterval(o),this.parent.removeEventListener("message",O,!1),this.childOrigin=_.origin,f(new Me(this))):h("Failed handshake"));this.parent.addEventListener("message",O,!1);const j=()=>{a++,this.child.postMessage({postmate:"handshake",type:Mt,model:this.model},n),a===5&&clearInterval(o)};this.frame.addEventListener("load",()=>{j(),o=setInterval(j,500)}),this.frame.src=t})}destroy(){this.frame.parentNode.removeChild(this.frame)}}class on{child;model;parent;parentOrigin;constructor(t){this.child=window,this.model=t,this.parent=this.child.parent}sendHandshakeReply(){return new Promise((t,n)=>{const o=a=>{if(a.data.postmate){if(a.data.postmate==="handshake"){this.child.removeEventListener("message",o,!1),a.source.postMessage({postmate:"handshake-reply",type:Mt},a.origin),this.parentOrigin=a.origin;const f=a.data.model;return f&&Object.keys(f).forEach(h=>{this.model[h]=f[h]}),t(new Rt(this))}return n("Handshake Reply Failed")}};this.child.addEventListener("message",o,!1)})}}var sn=q(729),Re=q.n(sn);const{importHTML:te,createSandboxContainer:Cn}=window.QSandbox||{};function an(e,t){return e.startsWith("http")?fetch(e,t):(e=e.replace("file://",""),new Promise(async(n,o)=>{try{const a=await window.apis.doAction(["readFile",e]);n({text:()=>a})}catch(a){console.error(a),o(a)}}))}class De extends Re(){_pluginLocal;_frame;_root;_loaded=!1;_unmountFns=[];constructor(t){super(),this._pluginLocal=t,t._dispose(()=>{this._unmount()})}async load(){const{name:t,entry:n}=this._pluginLocal.options;if(this.loaded||!n)return;const{template:o,execScripts:a}=await te(n,{fetch:an});this._mount(o,document.body);const f=Cn(t,{elementGetter:()=>this._root?.firstChild}).instance.proxy;f.__shadow_mode__=!0,f.LSPluginLocal=this._pluginLocal,f.LSPluginShadow=this,f.LSPluginUser=f.logseq=new V(this._pluginLocal.toJSON(),this._pluginLocal.caller);const h=await a(f,!0);this._unmountFns.push(h.unmount),this._loaded=!0}_mount(t,n){const o=this._frame=document.createElement("div");o.classList.add("lsp-shadow-sandbox"),o.id=this._pluginLocal.id,this._root=o.attachShadow({mode:"open"}),this._root.innerHTML=`<div>${t}</div>`,n.appendChild(o),this.emit("mounted")}_unmount(){for(const t of this._unmountFns)t&&t.call(null)}destroy(){this.frame?.parentNode?.removeChild(this.frame)}get loaded(){return this._loaded}get document(){return this._root?.firstChild}get frame(){return this._frame}}const It=Ne()("LSPlugin:caller"),ce="#await#response#",cn="#lspmsg#error#",qt=e=>`#lspmsg#${e}`;class Pe extends Re(){_pluginLocal;_connected=!1;_parent;_child;_shadow;_status;_userModel={};_call;_callUserModel;_debugTag="";constructor(t){super(),this._pluginLocal=t,t&&(this._debugTag=t.debugTag)}async connectToChild(){if(this._connected)return;const{shadow:t}=this._pluginLocal;t?await this._setupShadowSandbox():await this._setupIframeSandbox()}async connectToParent(t={}){if(this._connected)return;const n=this,o=this._pluginLocal!=null;let a=0;const f=new Map,h=Ft(6e4),O=this._extendUserModel({"#lspmsg#ready#":async _=>{O[qt(_?.pid)]=({type:M,payload:P})=>{It(`[host (_call) -> *user] ${this._debugTag}`,M,P),n.emit(M,P)},await h.resolve()},"#lspmsg#beforeunload#":async _=>{const M=Ft(1e4);n.emit("beforeunload",Object.assign({actor:M},_)),await M.promise},"#lspmsg#settings#":async({type:_,payload:M})=>{n.emit("settings:changed",M)},"#lspmsg#":async({ns:_,type:M,payload:P})=>{It(`[host (async) -> *user] ${this._debugTag} ns=${_} type=${M}`,P),_&&_.startsWith("hook")?n.emit(`${_}:${M}`,P):n.emit(M,P)},"#lspmsg#reply#":({_sync:_,result:M})=>{if(It(`[sync host -> *user] #${_}`,M),f.has(_)){const P=f.get(_);P&&(M?.hasOwnProperty(cn)?P.reject(M[cn]):P.resolve(M),f.delete(_))}},...t});if(o)return await h.promise,JSON.parse(JSON.stringify(this._pluginLocal?.toJSON()));const j=new on(O).sendHandshakeReply();return this._status="pending",await j.then(_=>{this._child=_,this._connected=!0,this._call=async(M,P={},Z)=>{if(Z){const tt=++a;f.set(tt,Z),P._sync=tt,Z.setTag(`async call #${tt}`),It(`async call #${tt}`)}return _.emit(qt(O.baseInfo.id),{type:M,payload:P}),Z?.promise},this._callUserModel=async(M,P)=>{try{O[M](P)}catch{It(`[model method] #${M} not existed`)}},setInterval(()=>{if(f.size>100)for(const[M,P]of f)P.settled&&f.delete(M)},18e5)}).finally(()=>{this._status=void 0}),await h.promise,O.baseInfo}async call(t,n={}){return this._call?.call(this,t,n)}async callAsync(t,n={}){const o=Ft(1e4);return this._call?.call(this,t,n,o)}async callUserModel(t,n={}){return this._callUserModel?.call(this,t,n)}async _setupIframeSandbox(){const t=this._pluginLocal,n=t.id,o=`${n}_lsp_main`,a=new URL(t.options.entry);a.searchParams.set("__v__",t.options.version);const f=document.querySelector(`#${o}`);f&&f.parentElement.removeChild(f);const h=document.createElement("div");h.classList.add("lsp-iframe-sandbox-container"),h.id=o,h.dataset.pid=n;try{const M=(await this._pluginLocal._loadLayoutsData())?.$$0;if(M){h.dataset.inited_layout="true";const{width:P,height:Z,left:tt,top:vt}=M;Object.assign(h.style,{width:P+"px",height:Z+"px",left:tt+"px",top:vt+"px"})}}catch(M){console.error("[Restore Layout Error]",M)}document.body.appendChild(h);const O=new be({id:n+"_iframe",container:h,url:a.href,classListArray:["lsp-iframe-sandbox"],model:{baseInfo:JSON.parse(JSON.stringify(t.toJSON()))}});let j,_=O.sendHandshake();return this._status="pending",new Promise((M,P)=>{j=setTimeout(()=>{P(new Error("handshake Timeout")),O.destroy()},4e3),_.then(Z=>{this._parent=Z,this._connected=!0,this.emit("connected"),Z.on(qt(t.id),({type:tt,payload:vt})=>{It("[user -> *host] ",tt,vt),this._pluginLocal?.emit(tt,vt||{})}),this._call=async(...tt)=>{await Z.call(qt(t.id),{type:tt[0],payload:Object.assign(tt[1]||{},{$$pid:t.id})})},this._callUserModel=async(tt,vt)=>{if(tt.startsWith(ce))return await Z.get(tt.replace(ce,""));Z.call(tt,vt)},M(null)}).catch(Z=>{P(Z)}).finally(()=>{clearTimeout(j)})}).catch(M=>{throw It("[iframe sandbox] error",M),M}).finally(()=>{this._status=void 0})}async _setupShadowSandbox(){const t=this._pluginLocal,n=this._shadow=new De(t);try{this._status="pending",await n.load(),this._connected=!0,this.emit("connected"),this._call=async(o,a={},f)=>(f&&(a.actor=f),this._pluginLocal?.emit(o,Object.assign(a,{$$pid:t.id})),f?.promise),this._callUserModel=async(...o)=>{let a=o[0];a?.startsWith(ce)&&(a=a.replace(ce,""));const f=o[1]||{},h=this._userModel[a];typeof h=="function"&&await h.call(null,f)}}catch(o){throw It("[shadow sandbox] error",o),o}finally{this._status=void 0}}_extendUserModel(t){return Object.assign(this._userModel,t)}_getSandboxIframeContainer(){return this._parent?.frame.parentNode}_getSandboxShadowContainer(){return this._shadow?.frame.parentNode}_getSandboxIframeRoot(){return this._parent?.frame}_getSandboxShadowRoot(){return this._shadow?.frame}set debugTag(t){this._debugTag=t}async destroy(){let t=null;this._parent&&(t=this._getSandboxIframeContainer(),await this._parent.destroy()),this._shadow&&(t=this._getSandboxShadowContainer(),this._shadow.destroy()),t?.parentNode.removeChild(t)}}class ln{ctx;opts;constructor(t,n){this.ctx=t,this.opts=n}get ctxId(){return this.ctx.baseInfo.id}setItem(t,n){return this.ctx.caller.callAsync("api:call",{method:"write-plugin-storage-file",args:[this.ctxId,t,n,this.opts?.assets]})}getItem(t){return this.ctx.caller.callAsync("api:call",{method:"read-plugin-storage-file",args:[this.ctxId,t,this.opts?.assets]})}removeItem(t){return this.ctx.caller.call("api:call",{method:"unlink-plugin-storage-file",args:[this.ctxId,t,this.opts?.assets]})}allKeys(){return this.ctx.caller.callAsync("api:call",{method:"list-plugin-storage-files",args:[this.ctxId,this.opts?.assets]})}clear(){return this.ctx.caller.call("api:call",{method:"clear-plugin-storage-files",args:[this.ctxId,this.opts?.assets]})}hasItem(t){return this.ctx.caller.callAsync("api:call",{method:"exist-plugin-storage-file",args:[this.ctxId,t,this.opts?.assets]})}}class Lt{ctx;constructor(t){this.ctx=t}get React(){return this.ensureHostScope().React}get ReactDOM(){return this.ensureHostScope().ReactDOM}get pluginLocal(){return this.ensureHostScope().LSPluginCore.ensurePlugin(this.ctx.baseInfo.id)}invokeExperMethod(t,...n){const o=this.ensureHostScope();return t=Xt(t)?.toLowerCase(),o.logseq.api["exper_"+t]?.apply(o,n)}async loadScripts(...t){(t=t.map(n=>n?.startsWith("http")?n:this.ctx.resolveResourceFullUrl(n))).unshift(this.ctx.baseInfo.id),await this.invokeExperMethod("loadScripts",...t)}registerFencedCodeRenderer(t,n){return this.ensureHostScope().logseq.api.exper_register_fenced_code_renderer(this.ctx.baseInfo.id,t,n)}registerExtensionsEnhancer(t,n){const o=this.ensureHostScope();return t==="katex"&&o.katex&&n(o.katex).catch(console.error),o.logseq.api.exper_register_extensions_enhancer(this.ctx.baseInfo.id,t,n)}ensureHostScope(){if(window===top)throw new Error("Can not access host scope!");return top}}const Ue=e=>`task_callback_${e}`;class un{_client;_requestId;_requestOptions;_promise;_aborted=!1;constructor(t,n,o={}){this._client=t,this._requestId=n,this._requestOptions=o,this._promise=new Promise((O,j)=>{if(!this._requestId)return j(null);this._client.once(Ue(this._requestId),_=>{_&&_ instanceof Error?j(_):O(_)})});const{success:a,fail:f,final:h}=this._requestOptions;this._promise.then(O=>{a?.(O)}).catch(O=>{f?.(O)}).finally(()=>{h?.()})}abort(){this._requestOptions.abortable&&!this._aborted&&(this._client.ctx._execCallableAPI("http_request_abort",this._requestId),this._aborted=!0)}get promise(){return this._promise}get client(){return this._client}get requestId(){return this._requestId}}class ve extends sn.EventEmitter{_ctx;constructor(t){super(),this._ctx=t,this.ctx.caller.on("#lsp#request#callback",n=>{const o=n?.requestId;o&&this.emit(Ue(o),n?.payload)})}static createRequestTask(t,n,o){return new un(t,n,o)}async _request(t){const n=this.ctx.baseInfo.id,{success:o,fail:a,final:f,...h}=t,O=this.ctx.Experiments.invokeExperMethod("request",n,h),j=ve.createRequestTask(this.ctx.Request,O,t);return h.abortable?j:j.promise}get ctx(){return this._ctx}}const xn=Symbol.for("proxy-continue"),le=Ne()("LSPlugin:user");function wt(e,t,n){if(typeof n!="function")return!1;const{key:o,label:a,desc:f,palette:h,keybinding:O,extras:j}=t,_=`SimpleCommandHook${o}${++ze}`;this.Editor["on"+_](n),this.caller?.call("api:call",{method:"register-plugin-simple-command",args:[this.baseInfo.id,[{key:o,label:a,type:e,desc:f,keybinding:O,extras:j},["editor/hook",_]],h]})}let ue=null;const pn={async getInfo(e){return ue||(ue=await this._execCallableAPIAsync("get-app-info")),typeof e=="string"?ue[e]:ue},registerCommand:wt,registerCommandPalette(e,t){const{key:n,label:o,keybinding:a}=e;return wt.call(this,"$palette$",{key:n,label:o,palette:!0,keybinding:a},t)},registerCommandShortcut(e,t){const{binding:n}=e,o="$shortcut$",a=o+Xt(n);return wt.call(this,o,{key:a,palette:!1,keybinding:e},t)},registerUIItem(e,t){const n=this.baseInfo.id;this.caller?.call("api:call",{method:"register-plugin-ui-item",args:[n,e,t]})},registerPageMenuItem(e,t){if(typeof t!="function")return!1;const n=e+"_"+this.baseInfo.id,o=e;wt.call(this,"page-menu-item",{key:n,label:o},t)},setFullScreen(e){const t=(...n)=>this._callWin("setFullScreen",...n);e==="toggle"?this._callWin("isFullScreen").then(n=>{n?t():t(!0)}):e?t(!0):t()}};let ze=0;const fn={newBlockUUID(){return this._execCallableAPIAsync("new_block_uuid")},registerSlashCommand(e,t){le("Register slash command #",this.baseInfo.id,e,t),typeof t=="function"&&(t=[["editor/clear-current-slash",!1],["editor/restore-saved-cursor"],["editor/hook",t]]),t=t.map(n=>{const[o,...a]=n;if(o==="editor/hook"){let f=a[0],h=()=>{this.caller?.callUserModel(f)};typeof f=="function"&&(h=f);const O=`SlashCommandHook${o}${++ze}`;n[1]=O,this.Editor["on"+O](h)}return n}),this.caller?.call("api:call",{method:"register-plugin-slash-command",args:[this.baseInfo.id,[e,t]]})},registerBlockContextMenuItem(e,t){if(typeof t!="function")return!1;const n=e+"_"+this.baseInfo.id;wt.call(this,"block-context-menu-item",{key:n,label:e},t)},registerHighlightContextMenuItem(e,t,n){if(typeof t!="function")return!1;const o=e+"_"+this.baseInfo.id;wt.call(this,"highlight-context-menu-item",{key:o,label:e,extras:n},t)},scrollToBlockInPage(e,t,n){const o="block-content-"+t;n?.replaceState?this.App.replaceState("page",{name:e},{anchor:o}):this.App.pushState("page",{name:e},{anchor:o})}},Sn={onBlockChanged(e,t){const n=this.baseInfo.id,o=`hook:db:${Xt(`block:${e}`)}`,a=({block:f,txData:h,txMeta:O})=>{f.uuid===e&&t(f,h,O)};return this.caller.on(o,a),this.App._installPluginHook(n,o),()=>{this.caller.off(o,a),this.App._uninstallPluginHook(n,o)}}},r={},x={},b={makeSandboxStorage(){return new ln(this,{assets:!0})}};class V extends Re(){_baseInfo;_caller;_version="0.0.10";_debugTag="";_settingsSchema;_connected=!1;_ui=new Map;_mFileStorage;_mRequest;_mExperiments;_beforeunloadCallback;constructor(t,n){super(),this._baseInfo=t,this._caller=n,n.on("sys:ui:visible",o=>{o?.toggle&&this.toggleMainUI()}),n.on("settings:changed",o=>{const a=Object.assign({},this.settings),f=Object.assign(this._baseInfo.settings,o);this.emit("settings:changed",{...f},a)}),n.on("beforeunload",async o=>{const{actor:a,...f}=o,h=this._beforeunloadCallback;try{h&&await h(f),a?.resolve(null)}catch(O){console.debug(`${n.debugTag} [beforeunload] `,O),a?.reject(O)}})}async ready(t,n){if(!this._connected)try{typeof t=="function"&&(n=t,t={});let o=await this._caller.connectToParent(t);this._connected=!0,o=se(this._baseInfo,o),this._settingsSchema&&(o.settings=function(a,f){const h=(f||[]).reduce((O,j)=>("default"in j&&(O[j.key]=j.default),O),{});return Object.assign(h,a)}(o.settings,this._settingsSchema),await this.useSettingsSchema(this._settingsSchema)),o?.id&&(this._debugTag=this._caller.debugTag=`#${o.id} [${o.name}]`);try{await this._execCallableAPIAsync("setSDKMetadata",{version:this._version})}catch(a){console.warn(a)}n&&n.call(this,o)}catch(o){console.error(`${this._debugTag} [Ready Error]`,o)}}ensureConnected(){if(!this._connected)throw new Error("not connected")}beforeunload(t){typeof t=="function"&&(this._beforeunloadCallback=t)}provideModel(t){return this.caller._extendUserModel(t),this}provideTheme(t){return this.caller.call("provider:theme",t),this}provideStyle(t){return this.caller.call("provider:style",t),this}provideUI(t){return this.caller.call("provider:ui",t),this}useSettingsSchema(t){return this.connected&&this.caller.call("settings:schema",{schema:t,isSync:!0}),this._settingsSchema=t,this}updateSettings(t){this.caller.call("settings:update",t)}onSettingsChanged(t){const n="settings:changed";return this.on(n,t),()=>this.off(n,t)}showSettingsUI(){this.caller.call("settings:visible:changed",{visible:!0})}hideSettingsUI(){this.caller.call("settings:visible:changed",{visible:!1})}setMainUIAttrs(t){this.caller.call("main-ui:attrs",t)}setMainUIInlineStyle(t){this.caller.call("main-ui:style",t)}hideMainUI(t){const n={key:0,visible:!1,cursor:t?.restoreEditingCursor};this.caller.call("main-ui:visible",n),this.emit("ui:visible:changed",n),this._ui.set(n.key,n)}showMainUI(t){const n={key:0,visible:!0,autoFocus:t?.autoFocus};this.caller.call("main-ui:visible",n),this.emit("ui:visible:changed",n),this._ui.set(n.key,n)}toggleMainUI(){const t=this._ui.get(0);t&&t.visible?this.hideMainUI():this.showMainUI()}get version(){return this._version}get isMainUIVisible(){const t=this._ui.get(0);return Boolean(t&&t.visible)}get connected(){return this._connected}get baseInfo(){return this._baseInfo}get settings(){return this.baseInfo?.settings}get caller(){return this._caller}resolveResourceFullUrl(t){if(this.ensureConnected(),t)return t=t.replace(/^[.\\/]+/,""),function(n,...o){try{const a=new URL(n);if(!a.origin)throw new Error(null);const f=Le.join(n.substr(a.origin.length),...o);return a.origin+f}catch{return Le.join(n,...o)}}(this._baseInfo.lsr,t)}_makeUserProxy(t,n){const o=this,a=this.caller;return new Proxy(t,{get(f,h,O){const j=f[h];return function(..._){if(j){const P=j.apply(o,_.concat(n));if(P!==xn)return P}if(n){const P=h.toString().match(/^(once|off|on)/i);if(P!=null){const Z=P[0].toLowerCase(),tt=P.input.slice(Z.length),vt=Z==="off",Bt=o.baseInfo.id,ot=`hook:${n}:${Xt(tt)}`,At=_[0];a[Z](ot,At);const Tt=()=>{a.off(ot,At),a.listenerCount(ot)||o.App._uninstallPluginHook(Bt,ot)};return vt?void Tt():(o.App._installPluginHook(Bt,ot),Tt)}}let M=h;return["git","ui","assets"].includes(n)&&(M=n+"_"+M),a.callAsync("api:call",{tag:n,method:M,args:_})}}})}_execCallableAPIAsync(t,...n){return this._caller.callAsync("api:call",{method:t,args:n})}_execCallableAPI(t,...n){this._caller.call("api:call",{method:t,args:n})}_callWin(...t){return this._execCallableAPIAsync("_callMainWin",...t)}get App(){return this._makeUserProxy(pn,"app")}get Editor(){return this._makeUserProxy(fn,"editor")}get DB(){return this._makeUserProxy(Sn,"db")}get Git(){return this._makeUserProxy(r,"git")}get UI(){return this._makeUserProxy(x,"ui")}get Assets(){return this._makeUserProxy(b,"assets")}get FileStorage(){let t=this._mFileStorage;return t||(t=this._mFileStorage=new ln(this)),t}get Request(){let t=this._mRequest;return t||(t=this._mRequest=new ve(this)),t}get Experiments(){let t=this._mExperiments;return t||(t=this._mExperiments=new Lt(this)),t}}function it(e,t){return new V(e,t)}if(window.__LSP__HOST__==null){const e=new Pe(null);window.logseq=it({},e)}})(),Ct})())})(An,An.exports);const Mn={title:"Sticky Headers",icon:"./icon.png",id:"logseq-sticky-headers"};const Rn=`#main-content-container .page-blocks-inner .ls-block:not([haschild='']):not([data-refs-self='["quote"]']):not([data-refs-self='["card"]']):not(.pre-block)`,kn=":is(h1, h2, h3, h4, h5)";let Dt,In,_e,On,hn,Ln,Tn,En;const Dn=async()=>{Ln={childList:!0,subtree:!0},hn=new MutationObserver(Pn)},Pn=function(K){for(let G=0;G<K.length;G++){const et=K[G].addedNodes[0];if(et&&et.nodeType!==Node.TEXT_NODE&&et.classList.contains("flex")&&et.classList.contains("flex-row")){const pt=et.closest(".ls-block")?.closest(".ls-block:not([haschild=''])");pt&&!pt.classList.contains("will-stick")&&pt.firstChild?.querySelector(kn)&&mn([pt])}}},Nn=()=>{!_e||hn.observe(_e,Ln)},Fn=()=>{$n(),En={root:_e,rootMargin:`${On}px 0px 0px 0px`,threshold:[1]},Tn=new IntersectionObserver(Un,En)},Un=K=>{for(let G=0;G<K.length;G++){const et=K[G];if(et.target.querySelector(kn)){const q=et.intersectionRatio<1&&et.boundingClientRect.top<et.intersectionRect.top;et.target.classList.toggle("is-sticky",q)}}},mn=K=>{if(K||(K=Dt.querySelectorAll(Rn)),!!K)for(let G=0;G<K.length;G++){const et=K[G];if(et){const pt=et.firstChild;pt.querySelector(kn)&&(et.classList.add("will-stick"),Tn.observe(pt))}}},zn=()=>{Tn.disconnect();const K=Dt.querySelectorAll(".will-stick");for(let G=0;G<K.length;G++){const et=K[G],pt=et.firstChild;et.classList.remove("will-stick"),pt.classList.remove("is-sticky")}},Hn=()=>{hn.disconnect()},$n=()=>{let K=0,G=0,et=0,pt=0;if(Dt.body.classList.contains("is-awUi-enabled")&&(pt=Dt.getElementById("head")?.getBoundingClientRect().height||0),_e){et=parseInt(getComputedStyle(_e).paddingTop,10);const q=Dt.getElementById("logseq-tabs_iframe");q&&(G=q.getBoundingClientRect().height),On=et-G-pt,K=On*-1-1}In.style.setProperty("--sticky-headers-top",`${K}px`)},qn=async()=>{Dt=parent.document,In=Dt.documentElement,_e=Dt.getElementById("main-content-container")},Bn=async()=>{const K=Mn.id;Dt.head&&Dt.head.insertAdjacentHTML("beforeend",`<link rel="stylesheet" id="css-awesomeLinks" href="lsp://logseq.io/${K}/dist/assets/stickyHeaders.css">`)},Wn=async()=>{setTimeout(()=>{Fn(),mn(),Dn(),Nn()},5e3)},jn=()=>{zn(),setTimeout(()=>{Fn(),mn()},1e3)},Gn=()=>{hn.disconnect(),setTimeout(()=>{mn(),Nn()},1e3)},Jn=async()=>{setTimeout(()=>{logseq.App.onRouteChanged(()=>{Gn()}),logseq.App.onThemeChanged(()=>{jn()}),logseq.App.onThemeModeChanged(()=>{jn()}),logseq.beforeunload(async()=>{Hn()})},5e3)},Zn=async()=>{console.log("StickyHeaders: plugin loaded"),qn(),Bn(),Wn(),Jn()};logseq.ready(Zn).catch(null);
//# sourceMappingURL=stickyHeaders.js.map
