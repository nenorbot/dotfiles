var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},o=e.parcelRequire8b64;function r(e,t,n,o){return new(n||(n=Promise))((function(r,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))}function i(e,t,n,o){if("a"===n&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?o:"a"===n?o.call(e):o?o.value:t.get(e)}function s(e,t,n,o,r){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?r.call(e,n):r?r.value=n:t.set(e,n),n}async function a(e,t={}){const{local:n=!1,version:o="latest",cdnUrl:r,...i}=t,s=function(e,t,n){let o=`https://cdn.jsdelivr.net/npm/emojibase-data@${t}/${e}`;return"function"==typeof n?o=n(e,t):"string"==typeof n&&(o=`${n}/${e}`),o}(e,o,r),a=n?localStorage:sessionStorage,c=`emojibase/${o}/${e}`,l=a.getItem(c);if(l)return Promise.resolve(JSON.parse(l));const h=await fetch(s,{credentials:"omit",mode:"cors",redirect:"error",...i});if(!h.ok)throw new Error("Failed to load Emojibase dataset.");const d=await h.json();try{a.setItem(c,JSON.stringify(d))}catch{}return d}null==o&&((o=function(e){if(e in t)return t[e].exports;if(e in n){var o=n[e];delete n[e];var r={id:e,exports:{}};return t[e]=r,o.call(r.exports,r,r.exports),r.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){n[e]=t},e.parcelRequire8b64=o),o.register("cVm5l",(function(t,n){
/*! For license information please see lsplugin.user.js.LICENSE.txt */self,t.exports=(()=>{var o={227:(e,t,n)=>{var o=n(155);t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let o=0,r=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(o++,"%c"===e&&(r=o))})),t.splice(r,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&void 0!==o&&"env"in o&&(e=o.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=n(447)(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},447:(e,t,n)=>{e.exports=function(e){function t(e){let n,r=null;function i(...e){if(!i.enabled)return;const o=i,r=Number(new Date),s=r-(n||r);o.diff=s,o.prev=n,o.curr=r,n=r,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((n,r)=>{if("%%"===n)return"%";a++;const i=t.formatters[r];if("function"==typeof i){const t=e[a];n=i.call(o,t),e.splice(a,1),a--}return n})),t.formatArgs.call(o,e),(o.log||t.log).apply(o,e)}return i.namespace=e,i.useColors=t.useColors(),i.color=t.selectColor(e),i.extend=o,i.destroy=t.destroy,Object.defineProperty(i,"enabled",{enumerable:!0,configurable:!1,get:()=>null===r?t.enabled(e):r,set:e=>{r=e}}),"function"==typeof t.init&&t.init(i),i}function o(e,n){const o=t(this.namespace+(void 0===n?":":n)+e);return o.log=this.log,o}function r(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(r),...t.skips.map(r).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.names=[],t.skips=[];const o=("string"==typeof e?e:"").split(/[\s,]+/),r=o.length;for(n=0;n<r;n++)o[n]&&("-"===(e=o[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,o;for(n=0,o=t.skips.length;n<o;n++)if(t.skips[n].test(e))return!1;for(n=0,o=t.names.length;n<o;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(824),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((n=>{t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}},856:function(e){e.exports=function(){var e=Object.hasOwnProperty,t=Object.setPrototypeOf,n=Object.isFrozen,o=Object.getPrototypeOf,r=Object.getOwnPropertyDescriptor,i=Object.freeze,s=Object.seal,a=Object.create,c="undefined"!=typeof Reflect&&Reflect,l=c.apply,h=c.construct;l||(l=function(e,t,n){return e.apply(t,n)}),i||(i=function(e){return e}),s||(s=function(e){return e}),h||(h=function(e,t){return new(Function.prototype.bind.apply(e,[null].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t))))});var d,u=j(Array.prototype.forEach),p=j(Array.prototype.pop),m=j(Array.prototype.push),f=j(String.prototype.toLowerCase),g=j(String.prototype.match),v=j(String.prototype.replace),y=j(String.prototype.indexOf),b=j(String.prototype.trim),w=j(RegExp.prototype.test),_=(d=TypeError,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return h(d,t)});function j(e){return function(t){for(var n=arguments.length,o=Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return l(e,t,o)}}function C(e,o){t&&t(e,null);for(var r=o.length;r--;){var i=o[r];if("string"==typeof i){var s=f(i);s!==i&&(n(o)||(o[r]=s),i=s)}e[i]=!0}return e}function x(t){var n=a(null),o=void 0;for(o in t)l(e,t,[o])&&(n[o]=t[o]);return n}function k(e,t){for(;null!==e;){var n=r(e,t);if(n){if(n.get)return j(n.get);if("function"==typeof n.value)return j(n.value)}e=o(e)}return function(e){return console.warn("fallback value for",e),null}}var E=i(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),S=i(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),P=i(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),O=i(["animate","color-profile","cursor","discard","fedropshadow","feimage","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),A=i(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),L=i(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),T=i(["#text"]),F=i(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),z=i(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),M=i(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),I=i(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),D=s(/\{\{[\s\S]*|[\s\S]*\}\}/gm),R=s(/<%[\s\S]*|[\s\S]*%>/gm),$=s(/^data-[\-\w.\u00B7-\uFFFF]/),N=s(/^aria-[\-\w]+$/),B=s(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),H=s(/^(?:\w+script|data):/i),U=s(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function q(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var W=function(){return"undefined"==typeof window?null:window},K=function(e,t){if("object"!==(void 0===e?"undefined":V(e))||"function"!=typeof e.createPolicy)return null;var n=null,o="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(o)&&(n=t.currentScript.getAttribute(o));var r="dompurify"+(n?"#"+n:"");try{return e.createPolicy(r,{createHTML:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+r+" could not be created."),null}};return function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W(),n=function(t){return e(t)};if(n.version="2.3.1",n.removed=[],!t||!t.document||9!==t.document.nodeType)return n.isSupported=!1,n;var o=t.document,r=t.document,s=t.DocumentFragment,a=t.HTMLTemplateElement,c=t.Node,l=t.Element,h=t.NodeFilter,d=t.NamedNodeMap,j=void 0===d?t.NamedNodeMap||t.MozNamedAttrMap:d,G=t.Text,J=t.Comment,Y=t.DOMParser,Q=t.trustedTypes,Z=l.prototype,X=k(Z,"cloneNode"),ee=k(Z,"nextSibling"),te=k(Z,"childNodes"),ne=k(Z,"parentNode");if("function"==typeof a){var oe=r.createElement("template");oe.content&&oe.content.ownerDocument&&(r=oe.content.ownerDocument)}var re=K(Q,o),ie=re&&De?re.createHTML(""):"",se=r,ae=se.implementation,ce=se.createNodeIterator,le=se.createDocumentFragment,he=se.getElementsByTagName,de=o.importNode,ue={};try{ue=x(r).documentMode?r.documentMode:{}}catch(e){}var pe={};n.isSupported="function"==typeof ne&&ae&&void 0!==ae.createHTMLDocument&&9!==ue;var me=D,fe=R,ge=$,ve=N,ye=H,be=U,we=B,_e=null,je=C({},[].concat(q(E),q(S),q(P),q(A),q(T))),Ce=null,xe=C({},[].concat(q(F),q(z),q(M),q(I))),ke=null,Ee=null,Se=!0,Pe=!0,Oe=!1,Ae=!1,Le=!1,Te=!1,Fe=!1,ze=!1,Me=!1,Ie=!0,De=!1,Re=!0,$e=!0,Ne=!1,Be={},He=null,Ue=C({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Ve=null,qe=C({},["audio","video","img","source","image","track"]),We=null,Ke=C({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ge="http://www.w3.org/1998/Math/MathML",Je="http://www.w3.org/2000/svg",Ye="http://www.w3.org/1999/xhtml",Qe=Ye,Ze=!1,Xe=null,et=r.createElement("form"),tt=function(e){Xe&&Xe===e||(e&&"object"===(void 0===e?"undefined":V(e))||(e={}),e=x(e),_e="ALLOWED_TAGS"in e?C({},e.ALLOWED_TAGS):je,Ce="ALLOWED_ATTR"in e?C({},e.ALLOWED_ATTR):xe,We="ADD_URI_SAFE_ATTR"in e?C(x(Ke),e.ADD_URI_SAFE_ATTR):Ke,Ve="ADD_DATA_URI_TAGS"in e?C(x(qe),e.ADD_DATA_URI_TAGS):qe,He="FORBID_CONTENTS"in e?C({},e.FORBID_CONTENTS):Ue,ke="FORBID_TAGS"in e?C({},e.FORBID_TAGS):{},Ee="FORBID_ATTR"in e?C({},e.FORBID_ATTR):{},Be="USE_PROFILES"in e&&e.USE_PROFILES,Se=!1!==e.ALLOW_ARIA_ATTR,Pe=!1!==e.ALLOW_DATA_ATTR,Oe=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Ae=e.SAFE_FOR_TEMPLATES||!1,Le=e.WHOLE_DOCUMENT||!1,ze=e.RETURN_DOM||!1,Me=e.RETURN_DOM_FRAGMENT||!1,Ie=!1!==e.RETURN_DOM_IMPORT,De=e.RETURN_TRUSTED_TYPE||!1,Fe=e.FORCE_BODY||!1,Re=!1!==e.SANITIZE_DOM,$e=!1!==e.KEEP_CONTENT,Ne=e.IN_PLACE||!1,we=e.ALLOWED_URI_REGEXP||we,Qe=e.NAMESPACE||Ye,Ae&&(Pe=!1),Me&&(ze=!0),Be&&(_e=C({},[].concat(q(T))),Ce=[],!0===Be.html&&(C(_e,E),C(Ce,F)),!0===Be.svg&&(C(_e,S),C(Ce,z),C(Ce,I)),!0===Be.svgFilters&&(C(_e,P),C(Ce,z),C(Ce,I)),!0===Be.mathMl&&(C(_e,A),C(Ce,M),C(Ce,I))),e.ADD_TAGS&&(_e===je&&(_e=x(_e)),C(_e,e.ADD_TAGS)),e.ADD_ATTR&&(Ce===xe&&(Ce=x(Ce)),C(Ce,e.ADD_ATTR)),e.ADD_URI_SAFE_ATTR&&C(We,e.ADD_URI_SAFE_ATTR),e.FORBID_CONTENTS&&(He===Ue&&(He=x(He)),C(He,e.FORBID_CONTENTS)),$e&&(_e["#text"]=!0),Le&&C(_e,["html","head","body"]),_e.table&&(C(_e,["tbody"]),delete ke.tbody),i&&i(e),Xe=e)},nt=C({},["mi","mo","mn","ms","mtext"]),ot=C({},["foreignobject","desc","title","annotation-xml"]),rt=C({},S);C(rt,P),C(rt,O);var it=C({},A);C(it,L);var st=function(e){var t=ne(e);t&&t.tagName||(t={namespaceURI:Ye,tagName:"template"});var n=f(e.tagName),o=f(t.tagName);if(e.namespaceURI===Je)return t.namespaceURI===Ye?"svg"===n:t.namespaceURI===Ge?"svg"===n&&("annotation-xml"===o||nt[o]):Boolean(rt[n]);if(e.namespaceURI===Ge)return t.namespaceURI===Ye?"math"===n:t.namespaceURI===Je?"math"===n&&ot[o]:Boolean(it[n]);if(e.namespaceURI===Ye){if(t.namespaceURI===Je&&!ot[o])return!1;if(t.namespaceURI===Ge&&!nt[o])return!1;var r=C({},["title","style","font","a","script"]);return!it[n]&&(r[n]||!rt[n])}return!1},at=function(e){m(n.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){try{e.outerHTML=ie}catch(t){e.remove()}}},ct=function(e,t){try{m(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){m(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!Ce[e])if(ze||Me)try{at(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},lt=function(e){var t=void 0,n=void 0;if(Fe)e="<remove></remove>"+e;else{var o=g(e,/^[\r\n\t ]+/);n=o&&o[0]}var i=re?re.createHTML(e):e;if(Qe===Ye)try{t=(new Y).parseFromString(i,"text/html")}catch(e){}if(!t||!t.documentElement){t=ae.createDocument(Qe,"template",null);try{t.documentElement.innerHTML=Ze?"":i}catch(e){}}var s=t.body||t.documentElement;return e&&n&&s.insertBefore(r.createTextNode(n),s.childNodes[0]||null),Qe===Ye?he.call(t,Le?"html":"body")[0]:Le?t.documentElement:s},ht=function(e){return ce.call(e.ownerDocument||e,e,h.SHOW_ELEMENT|h.SHOW_COMMENT|h.SHOW_TEXT,null,!1)},dt=function(e){return!(e instanceof G||e instanceof J||"string"==typeof e.nodeName&&"string"==typeof e.textContent&&"function"==typeof e.removeChild&&e.attributes instanceof j&&"function"==typeof e.removeAttribute&&"function"==typeof e.setAttribute&&"string"==typeof e.namespaceURI&&"function"==typeof e.insertBefore)},ut=function(e){return"object"===(void 0===c?"undefined":V(c))?e instanceof c:e&&"object"===(void 0===e?"undefined":V(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},pt=function(e,t,o){pe[e]&&u(pe[e],(function(e){e.call(n,t,o,Xe)}))},mt=function(e){var t=void 0;if(pt("beforeSanitizeElements",e,null),dt(e))return at(e),!0;if(g(e.nodeName,/[\u0080-\uFFFF]/))return at(e),!0;var o=f(e.nodeName);if(pt("uponSanitizeElement",e,{tagName:o,allowedTags:_e}),!ut(e.firstElementChild)&&(!ut(e.content)||!ut(e.content.firstElementChild))&&w(/<[/\w]/g,e.innerHTML)&&w(/<[/\w]/g,e.textContent))return at(e),!0;if("select"===o&&w(/<template/i,e.innerHTML))return at(e),!0;if(!_e[o]||ke[o]){if($e&&!He[o]){var r=ne(e)||e.parentNode,i=te(e)||e.childNodes;if(i&&r)for(var s=i.length-1;s>=0;--s)r.insertBefore(X(i[s],!0),ee(e))}return at(e),!0}return e instanceof l&&!st(e)?(at(e),!0):"noscript"!==o&&"noembed"!==o||!w(/<\/no(script|embed)/i,e.innerHTML)?(Ae&&3===e.nodeType&&(t=e.textContent,t=v(t,me," "),t=v(t,fe," "),e.textContent!==t&&(m(n.removed,{element:e.cloneNode()}),e.textContent=t)),pt("afterSanitizeElements",e,null),!1):(at(e),!0)},ft=function(e,t,n){if(Re&&("id"===t||"name"===t)&&(n in r||n in et))return!1;if(Pe&&!Ee[t]&&w(ge,t));else if(Se&&w(ve,t));else{if(!Ce[t]||Ee[t])return!1;if(We[t]);else if(w(we,v(n,be,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==y(n,"data:")||!Ve[e])if(Oe&&!w(ye,v(n,be,"")));else if(n)return!1}return!0},gt=function(e){var t=void 0,o=void 0,r=void 0,i=void 0;pt("beforeSanitizeAttributes",e,null);var s=e.attributes;if(s){var a={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Ce};for(i=s.length;i--;){var c=t=s[i],l=c.name,h=c.namespaceURI;if(o=b(t.value),r=f(l),a.attrName=r,a.attrValue=o,a.keepAttr=!0,a.forceKeepAttr=void 0,pt("uponSanitizeAttribute",e,a),o=a.attrValue,!a.forceKeepAttr&&(ct(l,e),a.keepAttr))if(w(/\/>/i,o))ct(l,e);else{Ae&&(o=v(o,me," "),o=v(o,fe," "));var d=e.nodeName.toLowerCase();if(ft(d,r,o))try{h?e.setAttributeNS(h,l,o):e.setAttribute(l,o),p(n.removed)}catch(e){}}}pt("afterSanitizeAttributes",e,null)}},vt=function e(t){var n=void 0,o=ht(t);for(pt("beforeSanitizeShadowDOM",t,null);n=o.nextNode();)pt("uponSanitizeShadowNode",n,null),mt(n)||(n.content instanceof s&&e(n.content),gt(n));pt("afterSanitizeShadowDOM",t,null)};return n.sanitize=function(e,r){var i=void 0,a=void 0,l=void 0,h=void 0,d=void 0;if((Ze=!e)&&(e="\x3c!--\x3e"),"string"!=typeof e&&!ut(e)){if("function"!=typeof e.toString)throw _("toString is not a function");if("string"!=typeof(e=e.toString()))throw _("dirty is not a string, aborting")}if(!n.isSupported){if("object"===V(t.toStaticHTML)||"function"==typeof t.toStaticHTML){if("string"==typeof e)return t.toStaticHTML(e);if(ut(e))return t.toStaticHTML(e.outerHTML)}return e}if(Te||tt(r),n.removed=[],"string"==typeof e&&(Ne=!1),Ne);else if(e instanceof c)1===(a=(i=lt("\x3c!----\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===a.nodeName||"HTML"===a.nodeName?i=a:i.appendChild(a);else{if(!ze&&!Ae&&!Le&&-1===e.indexOf("<"))return re&&De?re.createHTML(e):e;if(!(i=lt(e)))return ze?null:ie}i&&Fe&&at(i.firstChild);for(var u=ht(Ne?e:i);l=u.nextNode();)3===l.nodeType&&l===h||mt(l)||(l.content instanceof s&&vt(l.content),gt(l),h=l);if(h=null,Ne)return e;if(ze){if(Me)for(d=le.call(i.ownerDocument);i.firstChild;)d.appendChild(i.firstChild);else d=i;return Ie&&(d=de.call(o,d,!0)),d}var p=Le?i.outerHTML:i.innerHTML;return Ae&&(p=v(p,me," "),p=v(p,fe," ")),re&&De?re.createHTML(p):p},n.setConfig=function(e){tt(e),Te=!0},n.clearConfig=function(){Xe=null,Te=!1},n.isValidAttribute=function(e,t,n){Xe||tt({});var o=f(e),r=f(t);return ft(o,r,n)},n.addHook=function(e,t){"function"==typeof t&&(pe[e]=pe[e]||[],m(pe[e],t))},n.removeHook=function(e){pe[e]&&p(pe[e])},n.removeHooks=function(e){pe[e]&&(pe[e]=[])},n.removeAllHooks=function(){pe={}},n}()}()},729:e=>{var t=Object.prototype.hasOwnProperty,n="~";function o(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(e,t,o,i,s){if("function"!=typeof o)throw new TypeError("The listener must be a function");var a=new r(o,i||e,s),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new o:delete e._events[t]}function a(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(n=!1)),a.prototype.eventNames=function(){var e,o,r=[];if(0===this._eventsCount)return r;for(o in e=this._events)t.call(e,o)&&r.push(n?o.slice(1):o);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},a.prototype.listeners=function(e){var t=n?n+e:e,o=this._events[t];if(!o)return[];if(o.fn)return[o.fn];for(var r=0,i=o.length,s=new Array(i);r<i;r++)s[r]=o[r].fn;return s},a.prototype.listenerCount=function(e){var t=n?n+e:e,o=this._events[t];return o?o.fn?1:o.length:0},a.prototype.emit=function(e,t,o,r,i,s){var a=n?n+e:e;if(!this._events[a])return!1;var c,l,h=this._events[a],d=arguments.length;if(h.fn){switch(h.once&&this.removeListener(e,h.fn,void 0,!0),d){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,t),!0;case 3:return h.fn.call(h.context,t,o),!0;case 4:return h.fn.call(h.context,t,o,r),!0;case 5:return h.fn.call(h.context,t,o,r,i),!0;case 6:return h.fn.call(h.context,t,o,r,i,s),!0}for(l=1,c=new Array(d-1);l<d;l++)c[l-1]=arguments[l];h.fn.apply(h.context,c)}else{var u,p=h.length;for(l=0;l<p;l++)switch(h[l].once&&this.removeListener(e,h[l].fn,void 0,!0),d){case 1:h[l].fn.call(h[l].context);break;case 2:h[l].fn.call(h[l].context,t);break;case 3:h[l].fn.call(h[l].context,t,o);break;case 4:h[l].fn.call(h[l].context,t,o,r);break;default:if(!c)for(u=1,c=new Array(d-1);u<d;u++)c[u-1]=arguments[u];h[l].fn.apply(h[l].context,c)}}return!0},a.prototype.on=function(e,t,n){return i(this,e,t,n,!1)},a.prototype.once=function(e,t,n){return i(this,e,t,n,!0)},a.prototype.removeListener=function(e,t,o,r){var i=n?n+e:e;if(!this._events[i])return this;if(!t)return s(this,i),this;var a=this._events[i];if(a.fn)a.fn!==t||r&&!a.once||o&&a.context!==o||s(this,i);else{for(var c=0,l=[],h=a.length;c<h;c++)(a[c].fn!==t||r&&!a[c].once||o&&a[c].context!==o)&&l.push(a[c]);l.length?this._events[i]=1===l.length?l[0]:l:s(this,i)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&s(this,t)):(this._events=new o,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a},717:e=>{"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},824:e=>{var t=1e3,n=60*t,o=60*n,r=24*o;function i(e,t,n,o){var r=t>=1.5*n;return Math.round(e/n)+" "+o+(r?"s":"")}e.exports=function(e,s){s=s||{};var a,c,l=typeof e;if("string"===l&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var i=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(i){var s=parseFloat(i[1]);switch((i[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"weeks":case"week":case"w":return 6048e5*s;case"days":case"day":case"d":return s*r;case"hours":case"hour":case"hrs":case"hr":case"h":return s*o;case"minutes":case"minute":case"mins":case"min":case"m":return s*n;case"seconds":case"second":case"secs":case"sec":case"s":return s*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}(e);if("number"===l&&isFinite(e))return s.long?(a=e,(c=Math.abs(a))>=r?i(a,c,r,"day"):c>=o?i(a,c,o,"hour"):c>=n?i(a,c,n,"minute"):c>=t?i(a,c,t,"second"):a+" ms"):function(e){var i=Math.abs(e);return i>=r?Math.round(e/r)+"d":i>=o?Math.round(e/o)+"h":i>=n?Math.round(e/n)+"m":i>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},520:(e,t,n)=>{var o=n(155),r="win32"===o.platform,i=n(539);function s(e,t){for(var n=[],o=0;o<e.length;o++){var r=e[o];r&&"."!==r&&(".."===r?n.length&&".."!==n[n.length-1]?n.pop():t&&n.push(".."):n.push(r))}return n}function a(e){for(var t=e.length-1,n=0;n<=t&&!e[n];n++);for(var o=t;o>=0&&!e[o];o--);return 0===n&&o===t?e:n>o?[]:e.slice(n,o+1)}var c=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,l=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,h={};function d(e){var t=c.exec(e),n=(t[1]||"")+(t[2]||""),o=t[3]||"",r=l.exec(o);return[n,r[1],r[2],r[3]]}function u(e){var t=c.exec(e),n=t[1]||"",o=!!n&&":"!==n[1];return{device:n,isUnc:o,isAbsolute:o||!!t[2],tail:t[3]}}function p(e){return"\\\\"+e.replace(/^[\\\/]+/,"").replace(/[\\\/]+/g,"\\")}h.resolve=function(){for(var e="",t="",n=!1,r=arguments.length-1;r>=-1;r--){var a;if(r>=0?a=arguments[r]:e?(a=o.env["="+e])&&a.substr(0,3).toLowerCase()===e.toLowerCase()+"\\"||(a=e+"\\"):a=o.cwd(),!i.isString(a))throw new TypeError("Arguments to path.resolve must be strings");if(a){var c=u(a),l=c.device,h=c.isUnc,d=c.isAbsolute,m=c.tail;if((!l||!e||l.toLowerCase()===e.toLowerCase())&&(e||(e=l),n||(t=m+"\\"+t,n=d),e&&n))break}}return h&&(e=p(e)),e+(n?"\\":"")+(t=s(t.split(/[\\\/]+/),!n).join("\\"))||"."},h.normalize=function(e){var t=u(e),n=t.device,o=t.isUnc,r=t.isAbsolute,i=t.tail,a=/[\\\/]$/.test(i);return(i=s(i.split(/[\\\/]+/),!r).join("\\"))||r||(i="."),i&&a&&(i+="\\"),o&&(n=p(n)),n+(r?"\\":"")+i},h.isAbsolute=function(e){return u(e).isAbsolute},h.join=function(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(!i.isString(n))throw new TypeError("Arguments to path.join must be strings");n&&e.push(n)}var o=e.join("\\");return/^[\\\/]{2}[^\\\/]/.test(e[0])||(o=o.replace(/^[\\\/]{2,}/,"\\")),h.normalize(o)},h.relative=function(e,t){e=h.resolve(e),t=h.resolve(t);for(var n=e.toLowerCase(),o=t.toLowerCase(),r=a(t.split("\\")),i=a(n.split("\\")),s=a(o.split("\\")),c=Math.min(i.length,s.length),l=c,d=0;d<c;d++)if(i[d]!==s[d]){l=d;break}if(0==l)return t;var u=[];for(d=l;d<i.length;d++)u.push("..");return(u=u.concat(r.slice(l))).join("\\")},h._makeLong=function(e){if(!i.isString(e))return e;if(!e)return"";var t=h.resolve(e);return/^[a-zA-Z]\:\\/.test(t)?"\\\\?\\"+t:/^\\\\[^?.]/.test(t)?"\\\\?\\UNC\\"+t.substring(2):e},h.dirname=function(e){var t=d(e),n=t[0],o=t[1];return n||o?(o&&(o=o.substr(0,o.length-1)),n+o):"."},h.basename=function(e,t){var n=d(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},h.extname=function(e){return d(e)[3]},h.format=function(e){if(!i.isObject(e))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof e);var t=e.root||"";if(!i.isString(t))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof e.root);var n=e.dir,o=e.base||"";return n?n[n.length-1]===h.sep?n+o:n+h.sep+o:o},h.parse=function(e){if(!i.isString(e))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof e);var t=d(e);if(!t||4!==t.length)throw new TypeError("Invalid path '"+e+"'");return{root:t[0],dir:t[0]+t[1].slice(0,-1),base:t[2],ext:t[3],name:t[2].slice(0,t[2].length-t[3].length)}},h.sep="\\",h.delimiter=";";var m=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,f={};function g(e){return m.exec(e).slice(1)}f.resolve=function(){for(var e="",t=!1,n=arguments.length-1;n>=-1&&!t;n--){var r=n>=0?arguments[n]:o.cwd();if(!i.isString(r))throw new TypeError("Arguments to path.resolve must be strings");r&&(e=r+"/"+e,t="/"===r[0])}return(t?"/":"")+(e=s(e.split("/"),!t).join("/"))||"."},f.normalize=function(e){var t=f.isAbsolute(e),n=e&&"/"===e[e.length-1];return(e=s(e.split("/"),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e},f.isAbsolute=function(e){return"/"===e.charAt(0)},f.join=function(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];if(!i.isString(n))throw new TypeError("Arguments to path.join must be strings");n&&(e+=e?"/"+n:n)}return f.normalize(e)},f.relative=function(e,t){e=f.resolve(e).substr(1),t=f.resolve(t).substr(1);for(var n=a(e.split("/")),o=a(t.split("/")),r=Math.min(n.length,o.length),i=r,s=0;s<r;s++)if(n[s]!==o[s]){i=s;break}var c=[];for(s=i;s<n.length;s++)c.push("..");return(c=c.concat(o.slice(i))).join("/")},f._makeLong=function(e){return e},f.dirname=function(e){var t=g(e),n=t[0],o=t[1];return n||o?(o&&(o=o.substr(0,o.length-1)),n+o):"."},f.basename=function(e,t){var n=g(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},f.extname=function(e){return g(e)[3]},f.format=function(e){if(!i.isObject(e))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof e);var t=e.root||"";if(!i.isString(t))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof e.root);return(e.dir?e.dir+f.sep:"")+(e.base||"")},f.parse=function(e){if(!i.isString(e))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof e);var t=g(e);if(!t||4!==t.length)throw new TypeError("Invalid path '"+e+"'");return t[1]=t[1]||"",t[2]=t[2]||"",t[3]=t[3]||"",{root:t[0],dir:t[0]+t[1].slice(0,-1),base:t[2],ext:t[3],name:t[2].slice(0,t[2].length-t[3].length)}},f.sep="/",f.delimiter=":",e.exports=r?h:f,e.exports.posix=f,e.exports.win32=h},155:e=>{var t,n,o=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(e){t=r}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(e){n=i}}();var a,c=[],l=!1,h=-1;function d(){l&&a&&(l=!1,a.length?c=a.concat(c):h=-1,c.length&&u())}function u(){if(!l){var e=s(d);l=!0;for(var t=c.length;t;){for(a=c,c=[];++h<t;)a&&a[h].run();h=-1,t=c.length}a=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||l||s(u)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},384:e=>{e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},539:(e,t,n)=>{var o=n(155),r=/%[sdj%]/g;t.format=function(e){if(!v(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(a(arguments[n]));return t.join(" ")}n=1;for(var o=arguments,i=o.length,s=String(e).replace(r,(function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(o[n++]);case"%d":return Number(o[n++]);case"%j":try{return JSON.stringify(o[n++])}catch(e){return"[Circular]"}default:return e}})),c=o[n];n<i;c=o[++n])f(c)||!w(c)?s+=" "+c:s+=" "+a(c);return s},t.deprecate=function(e,r){if(y(n.g.process))return function(){return t.deprecate(e,r).apply(this,arguments)};if(!0===o.noDeprecation)return e;var i=!1;return function(){if(!i){if(o.throwDeprecation)throw new Error(r);o.traceDeprecation?console.trace(r):console.error(r),i=!0}return e.apply(this,arguments)}};var i,s={};function a(e,n){var o={seen:[],stylize:l};return arguments.length>=3&&(o.depth=arguments[2]),arguments.length>=4&&(o.colors=arguments[3]),m(n)?o.showHidden=n:n&&t._extend(o,n),y(o.showHidden)&&(o.showHidden=!1),y(o.depth)&&(o.depth=2),y(o.colors)&&(o.colors=!1),y(o.customInspect)&&(o.customInspect=!0),o.colors&&(o.stylize=c),h(o,e,o.depth)}function c(e,t){var n=a.styles[t];return n?"["+a.colors[n][0]+"m"+e+"["+a.colors[n][1]+"m":e}function l(e,t){return e}function h(e,n,o){if(e.customInspect&&n&&C(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var r=n.inspect(o,e);return v(r)||(r=h(e,r,o)),r}var i=function(e,t){if(y(t))return e.stylize("undefined","undefined");if(v(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return g(t)?e.stylize(""+t,"number"):m(t)?e.stylize(""+t,"boolean"):f(t)?e.stylize("null","null"):void 0}(e,n);if(i)return i;var s=Object.keys(n),a=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(n)),j(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return d(n);if(0===s.length){if(C(n)){var c=n.name?": "+n.name:"";return e.stylize("[Function"+c+"]","special")}if(b(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(_(n))return e.stylize(Date.prototype.toString.call(n),"date");if(j(n))return d(n)}var l,w,x,k,E="",S=!1,O=["{","}"];return p(n)&&(S=!0,O=["[","]"]),C(n)&&(E=" [Function"+(n.name?": "+n.name:"")+"]"),b(n)&&(E=" "+RegExp.prototype.toString.call(n)),_(n)&&(E=" "+Date.prototype.toUTCString.call(n)),j(n)&&(E=" "+d(n)),0!==s.length||S&&0!=n.length?o<0?b(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),l=S?function(e,t,n,o,r){for(var i=[],s=0,a=t.length;s<a;++s)P(t,String(s))?i.push(u(e,t,n,o,String(s),!0)):i.push("");return r.forEach((function(r){r.match(/^\d+$/)||i.push(u(e,t,n,o,r,!0))})),i}(e,n,o,a,s):s.map((function(t){return u(e,n,o,a,t,S)})),e.seen.pop(),x=E,k=O,(w=l).reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?k[0]+(""===x?"":x+"\n ")+" "+w.join(",\n  ")+" "+k[1]:k[0]+x+" "+w.join(", ")+" "+k[1]):O[0]+E+O[1]}function d(e){return"["+Error.prototype.toString.call(e)+"]"}function u(e,t,n,o,r,i){var s,a,c;if((c=Object.getOwnPropertyDescriptor(t,r)||{value:t[r]}).get?a=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(a=e.stylize("[Setter]","special")),P(o,r)||(s="["+r+"]"),a||(e.seen.indexOf(c.value)<0?(a=f(n)?h(e,c.value,null):h(e,c.value,n-1)).indexOf("\n")>-1&&(a=i?a.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+a.split("\n").map((function(e){return"   "+e})).join("\n")):a=e.stylize("[Circular]","special")),y(s)){if(i&&r.match(/^\d+$/))return a;(s=JSON.stringify(""+r)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function p(e){return Array.isArray(e)}function m(e){return"boolean"==typeof e}function f(e){return null===e}function g(e){return"number"==typeof e}function v(e){return"string"==typeof e}function y(e){return void 0===e}function b(e){return w(e)&&"[object RegExp]"===x(e)}function w(e){return"object"==typeof e&&null!==e}function _(e){return w(e)&&"[object Date]"===x(e)}function j(e){return w(e)&&("[object Error]"===x(e)||e instanceof Error)}function C(e){return"function"==typeof e}function x(e){return Object.prototype.toString.call(e)}function k(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(y(i)&&(i=o.env.NODE_DEBUG||""),e=e.toUpperCase(),!s[e])if(new RegExp("\\b"+e+"\\b","i").test(i)){var n=o.pid;s[e]=function(){var o=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,o)}}else s[e]=function(){};return s[e]},t.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=p,t.isBoolean=m,t.isNull=f,t.isNullOrUndefined=function(e){return null==e},t.isNumber=g,t.isString=v,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=y,t.isRegExp=b,t.isObject=w,t.isDate=_,t.isError=j,t.isFunction=C,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n(384);var E=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function S(){var e=new Date,t=[k(e.getHours()),k(e.getMinutes()),k(e.getSeconds())].join(":");return[e.getDate(),E[e.getMonth()],t].join(" ")}function P(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",S(),t.format.apply(t,arguments))},t.inherits=n(717),t._extend=function(e,t){if(!t||!w(t))return e;for(var n=Object.keys(t),o=n.length;o--;)e[n[o]]=t[n[o]];return e}}},r={};function i(e){var t=r[e];if(void 0!==t)return t.exports;var n=r[e]={exports:{}};return o[e].call(n.exports,n,n.exports,i),n.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s={};return(()=>{i.r(s),i.d(s,{LSPluginUser:()=>qt,setupPluginUserInstance:()=>Wt});var o=i(520);i(856);const r=function(e,t){return e===t||e!=e&&t!=t},a=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1};var c=Array.prototype.splice;function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}l.prototype.clear=function(){this.__data__=[],this.size=0},l.prototype.delete=function(e){var t=this.__data__,n=a(t,e);return!(n<0||(n==t.length-1?t.pop():c.call(t,n,1),--this.size,0))},l.prototype.get=function(e){var t=this.__data__,n=a(t,e);return n<0?void 0:t[n][1]},l.prototype.has=function(e){return a(this.__data__,e)>-1},l.prototype.set=function(e,t){var n=this.__data__,o=a(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this};const h=l,d="object"==typeof e&&e&&e.Object===Object&&e;var u="object"==typeof self&&self&&self.Object===Object&&self;const p=d||u||Function("return this")(),m=p.Symbol;var f=Object.prototype,g=f.hasOwnProperty,v=f.toString,y=m?m.toStringTag:void 0,b=Object.prototype.toString,w=m?m.toStringTag:void 0;const _=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":w&&w in Object(e)?function(e){var t=g.call(e,y),n=e[y];try{e[y]=void 0;var o=!0}catch(e){}var r=v.call(e);return o&&(t?e[y]=n:delete e[y]),r}(e):function(e){return b.call(e)}(e)},j=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},C=function(e){if(!j(e))return!1;var t=_(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},x=p["__core-js_shared__"];var k,E=(k=/[^.]+$/.exec(x&&x.keys&&x.keys.IE_PROTO||""))?"Symbol(src)_1."+k:"",S=Function.prototype.toString,P=/^\[object .+?Constructor\]$/,O=Function.prototype,A=Object.prototype,L=O.toString,T=A.hasOwnProperty,F=RegExp("^"+L.call(T).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const z=function(e){var t;return!(!j(e)||(t=e,E&&E in t))&&(C(e)?F:P).test(function(e){if(null!=e){try{return S.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))},M=function(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return z(n)?n:void 0},I=M(p,"Map"),D=M(Object,"create");var R=Object.prototype.hasOwnProperty,$=Object.prototype.hasOwnProperty;function N(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}N.prototype.clear=function(){this.__data__=D?D(null):{},this.size=0},N.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},N.prototype.get=function(e){var t=this.__data__;if(D){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return R.call(t,e)?t[e]:void 0},N.prototype.has=function(e){var t=this.__data__;return D?void 0!==t[e]:$.call(t,e)},N.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=D&&void 0===t?"__lodash_hash_undefined__":t,this};const B=N,H=function(e,t){var n,o,r=e.__data__;return("string"==(o=typeof(n=t))||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==n:null===n)?r["string"==typeof t?"string":"hash"]:r.map};function U(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}U.prototype.clear=function(){this.size=0,this.__data__={hash:new B,map:new(I||h),string:new B}},U.prototype.delete=function(e){var t=H(this,e).delete(e);return this.size-=t?1:0,t},U.prototype.get=function(e){return H(this,e).get(e)},U.prototype.has=function(e){return H(this,e).has(e)},U.prototype.set=function(e,t){var n=H(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this};const V=U;function q(e){var t=this.__data__=new h(e);this.size=t.size}q.prototype.clear=function(){this.__data__=new h,this.size=0},q.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},q.prototype.get=function(e){return this.__data__.get(e)},q.prototype.has=function(e){return this.__data__.has(e)},q.prototype.set=function(e,t){var n=this.__data__;if(n instanceof h){var o=n.__data__;if(!I||o.length<199)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new V(o)}return n.set(e,t),this.size=n.size,this};const W=q,K=function(){try{var e=M(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),G=function(e,t,n){"__proto__"==t&&K?K(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},J=function(e,t,n){(void 0!==n&&!r(e[t],n)||void 0===n&&!(t in e))&&G(e,t,n)},Y=function(e,t,n){for(var o=-1,r=Object(e),i=n(e),s=i.length;s--;){var a=i[++o];if(!1===t(r[a],a,r))break}return e};var Q=n&&!n.nodeType&&n,Z=Q&&t&&!t.nodeType&&t,X=Z&&Z.exports===Q?p.Buffer:void 0;X&&X.allocUnsafe;const ee=p.Uint8Array,te=function(e,t){var n,o,r=t?(o=new(n=e.buffer).constructor(n.byteLength),new ee(o).set(new ee(n)),o):e.buffer;return new e.constructor(r,e.byteOffset,e.length)};var ne=Object.create;const oe=function(){function e(){}return function(t){if(!j(t))return{};if(ne)return ne(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),re=(ie=Object.getPrototypeOf,se=Object,function(e){return ie(se(e))});var ie,se,ae=Object.prototype;const ce=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||ae)},le=function(e){return null!=e&&"object"==typeof e},he=function(e){return le(e)&&"[object Arguments]"==_(e)};var de=Object.prototype,ue=de.hasOwnProperty,pe=de.propertyIsEnumerable;const me=he(function(){return arguments}())?he:function(e){return le(e)&&ue.call(e,"callee")&&!pe.call(e,"callee")},fe=Array.isArray,ge=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},ve=function(e){return null!=e&&ge(e.length)&&!C(e)};var ye=n&&!n.nodeType&&n,be=ye&&t&&!t.nodeType&&t,we=be&&be.exports===ye?p.Buffer:void 0;const _e=(we?we.isBuffer:void 0)||function(){return!1};var je=Function.prototype,Ce=Object.prototype,xe=je.toString,ke=Ce.hasOwnProperty,Ee=xe.call(Object),Se={};Se["[object Float32Array]"]=Se["[object Float64Array]"]=Se["[object Int8Array]"]=Se["[object Int16Array]"]=Se["[object Int32Array]"]=Se["[object Uint8Array]"]=Se["[object Uint8ClampedArray]"]=Se["[object Uint16Array]"]=Se["[object Uint32Array]"]=!0,Se["[object Arguments]"]=Se["[object Array]"]=Se["[object ArrayBuffer]"]=Se["[object Boolean]"]=Se["[object DataView]"]=Se["[object Date]"]=Se["[object Error]"]=Se["[object Function]"]=Se["[object Map]"]=Se["[object Number]"]=Se["[object Object]"]=Se["[object RegExp]"]=Se["[object Set]"]=Se["[object String]"]=Se["[object WeakMap]"]=!1;var Pe=n&&!n.nodeType&&n,Oe=Pe&&t&&!t.nodeType&&t,Ae=Oe&&Oe.exports===Pe&&d.process,Le=function(){try{return Oe&&Oe.require&&Oe.require("util").types||Ae&&Ae.binding&&Ae.binding("util")}catch(e){}}(),Te=Le&&Le.isTypedArray;const Fe=Te?function(e){return function(t){return e(t)}}(Te):function(e){return le(e)&&ge(e.length)&&!!Se[_(e)]},ze=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]};var Me=Object.prototype.hasOwnProperty;const Ie=function(e,t,n){var o=e[t];Me.call(e,t)&&r(o,n)&&(void 0!==n||t in e)||G(e,t,n)};var De=/^(?:0|[1-9]\d*)$/;const Re=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&De.test(e))&&e>-1&&e%1==0&&e<t};var $e=Object.prototype.hasOwnProperty;const Ne=function(e,t){var n=fe(e),o=!n&&me(e),r=!n&&!o&&_e(e),i=!n&&!o&&!r&&Fe(e),s=n||o||r||i,a=s?function(e,t){for(var n=-1,o=Array(e);++n<e;)o[n]=t(n);return o}(e.length,String):[],c=a.length;for(var l in e)!t&&!$e.call(e,l)||s&&("length"==l||r&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Re(l,c))||a.push(l);return a};var Be=Object.prototype.hasOwnProperty;const He=function(e){if(!j(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=ce(e),n=[];for(var o in e)("constructor"!=o||!t&&Be.call(e,o))&&n.push(o);return n},Ue=function(e){return ve(e)?Ne(e,!0):He(e)},Ve=function(e){return function(e,t,n,o){var r=!n;n||(n={});for(var i=-1,s=t.length;++i<s;){var a=t[i],c=o?o(n[a],e[a],a,n,e):void 0;void 0===c&&(c=e[a]),r?G(n,a,c):Ie(n,a,c)}return n}(e,Ue(e))},qe=function(e,t,n,o,r,i,s){var a,c=ze(e,n),l=ze(t,n),h=s.get(l);if(h)J(e,n,h);else{var d=i?i(c,l,n+"",e,t,s):void 0,u=void 0===d;if(u){var p=fe(l),m=!p&&_e(l),f=!p&&!m&&Fe(l);d=l,p||m||f?fe(c)?d=c:le(a=c)&&ve(a)?d=function(e,t){var n=-1,o=e.length;for(t||(t=Array(o));++n<o;)t[n]=e[n];return t}(c):m?(u=!1,d=function(e,t){return e.slice()}(l)):f?(u=!1,d=te(l,!0)):d=[]:function(e){if(!le(e)||"[object Object]"!=_(e))return!1;var t=re(e);if(null===t)return!0;var n=ke.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&xe.call(n)==Ee}(l)||me(l)?(d=c,me(c)?d=Ve(c):j(c)&&!C(c)||(d=function(e){return"function"!=typeof e.constructor||ce(e)?{}:oe(re(e))}(l))):u=!1}u&&(s.set(l,d),r(d,l,o,i,s),s.delete(l)),J(e,n,d)}},We=function e(t,n,o,r,i){t!==n&&Y(n,(function(s,a){if(i||(i=new W),j(s))qe(t,n,a,o,e,r,i);else{var c=r?r(ze(t,a),s,a+"",t,n,i):void 0;void 0===c&&(c=s),J(t,a,c)}}),Ue)},Ke=function(e){return e},Ge=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)};var Je=Math.max;const Ye=K?function(e,t){var n;return K(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0})}:Ke;var Qe=Date.now;const Ze=function(e){var t=0,n=0;return function(){var o=Qe(),r=16-(o-n);if(n=o,r>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(Ye),Xe=(tt=function(e,t,n){We(e,t,n)},et=function(e,t){var n=-1,o=t.length,i=o>1?t[o-1]:void 0,s=o>2?t[2]:void 0;for(i=tt.length>3&&"function"==typeof i?(o--,i):void 0,s&&function(e,t,n){if(!j(n))return!1;var o=typeof t;return!!("number"==o?ve(n)&&Re(t,n.length):"string"==o&&t in n)&&r(n[t],e)}(t[0],t[1],s)&&(i=o<3?void 0:i,o=1),e=Object(e);++n<o;){var a=t[n];a&&tt(e,a,n)}return e},Ze(function(e,t,n){return t=Je(void 0===t?e.length-1:t,0),function(){for(var o=arguments,r=-1,i=Je(o.length-t,0),s=Array(i);++r<i;)s[r]=o[t+r];r=-1;for(var a=Array(t+1);++r<t;)a[r]=o[r];return a[t]=n(s),Ge(e,this,a)}}(et,void 0,Ke),et+""));var et,tt,nt=function(){return(nt=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function ot(e){return e.toLowerCase()}Object.create,Object.create;var rt=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],it=/[^A-Z0-9]+/gi;function st(e,t,n){return t instanceof RegExp?e.replace(t,n):t.reduce((function(e,t){return e.replace(t,n)}),e)}const at="win32"===navigator.platform.toLowerCase()?o.win32:o.posix,ct=function(e,t){return void 0===t&&(t={}),n=e,void 0===(o=nt({delimiter:"_"},t))&&(o={}),function(e,t){void 0===t&&(t={});for(var n=t.splitRegexp,o=void 0===n?rt:n,r=t.stripRegexp,i=void 0===r?it:r,s=t.transform,a=void 0===s?ot:s,c=t.delimiter,l=void 0===c?" ":c,h=st(st(e,o,"$1\0$2"),i,"\0"),d=0,u=h.length;"\0"===h.charAt(d);)d++;for(;"\0"===h.charAt(u-1);)u--;return h.slice(d,u).split("\0").map(a).join(l)}(n,nt({delimiter:"."},o));var n,o},lt=Xe;function ht(e,t){let n,o,r=!1;const i=t=>n=>{e&&clearTimeout(e),t(n),r=!0},s=new Promise(((r,s)=>{n=i(r),o=i(s),e&&(e=setTimeout((()=>o(new Error(`[deferred timeout] ${t}`))),e))}));return{created:Date.now(),setTag:e=>t=e,resolve:n,reject:o,promise:s,get settled(){return r}}}new Map;var dt=i(227),ut=i.n(dt);const pt="application/x-postmate-v1+json";let mt=0;const ft={handshake:1,"handshake-reply":1,call:1,emit:1,reply:1,request:1},gt=(e,t)=>!("string"==typeof t&&e.origin!==t||!e.data||"object"==typeof e.data&&!("postmate"in e.data)||e.data.type!==pt||!ft[e.data.postmate]);class vt{parent;frame;child;events={};childOrigin;listener;constructor(e){this.parent=e.parent,this.frame=e.frame,this.child=e.child,this.childOrigin=e.childOrigin,this.listener=e=>{if(!gt(e,this.childOrigin))return!1;const{data:t,name:n}=((e||{}).data||{}).value||{};"emit"===e.data.postmate&&n in this.events&&this.events[n].forEach((e=>{e.call(this,t)}))},this.parent.addEventListener("message",this.listener,!1)}get(e){return new Promise((t=>{const n=++mt,o=e=>{e.data.uid===n&&"reply"===e.data.postmate&&(this.parent.removeEventListener("message",o,!1),t(e.data.value))};this.parent.addEventListener("message",o,!1),this.child.postMessage({postmate:"request",type:pt,property:e,uid:n},this.childOrigin)}))}call(e,t){this.child.postMessage({postmate:"call",type:pt,property:e,data:t},this.childOrigin)}on(e,t){this.events[e]||(this.events[e]=[]),this.events[e].push(t)}destroy(){window.removeEventListener("message",this.listener,!1),this.frame.parentNode.removeChild(this.frame)}}class yt{model;parent;parentOrigin;child;constructor(e){this.model=e.model,this.parent=e.parent,this.parentOrigin=e.parentOrigin,this.child=e.child,this.child.addEventListener("message",(e=>{if(!gt(e,this.parentOrigin))return;const{property:t,uid:n,data:o}=e.data;"call"!==e.data.postmate?((e,t)=>{const n="function"==typeof e[t]?e[t]():e[t];return Promise.resolve(n)})(this.model,t).then((o=>{e.source.postMessage({property:t,postmate:"reply",type:pt,uid:n,value:o},e.origin)})):t in this.model&&"function"==typeof this.model[t]&&this.model[t](o)}))}emit(e,t){this.parent.postMessage({postmate:"emit",type:pt,value:{name:e,data:t}},this.parentOrigin)}}class bt{static debug=!1;container;parent;frame;child;childOrigin;url;model;static Model;constructor(e){this.container=e.container,this.url=e.url,this.parent=window,this.frame=document.createElement("iframe"),e.id&&(this.frame.id=e.id),e.name&&(this.frame.name=e.name),this.frame.classList.add.apply(this.frame.classList,e.classListArray||[]),this.container.appendChild(this.frame),this.child=this.frame.contentWindow,this.model=e.model||{}}sendHandshake(e){const t=(e=>{const t=document.createElement("a");t.href=e;const n=t.protocol.length>4?t.protocol:window.location.protocol,o=t.host.length?"80"===t.port||"443"===t.port?t.hostname:t.host:window.location.host;return t.origin||`${n}//${o}`})(e=e||this.url);let n,o=0;return new Promise(((r,i)=>{const s=e=>!!gt(e,t)&&("handshake-reply"===e.data.postmate?(clearInterval(n),this.parent.removeEventListener("message",s,!1),this.childOrigin=e.origin,r(new vt(this))):i("Failed handshake"));this.parent.addEventListener("message",s,!1);const a=()=>{o++,this.child.postMessage({postmate:"handshake",type:pt,model:this.model},t),5===o&&clearInterval(n)};this.frame.addEventListener("load",(()=>{a(),n=setInterval(a,500)})),this.frame.src=e}))}}class wt{child;model;parent;parentOrigin;constructor(e){this.child=window,this.model=e,this.parent=this.child.parent}sendHandshakeReply(){return new Promise(((e,t)=>{const n=o=>{if(o.data.postmate){if("handshake"===o.data.postmate){this.child.removeEventListener("message",n,!1),o.source.postMessage({postmate:"handshake-reply",type:pt},o.origin),this.parentOrigin=o.origin;const t=o.data.model;return t&&Object.keys(t).forEach((e=>{this.model[e]=t[e]})),e(new yt(this))}return t("Handshake Reply Failed")}};this.child.addEventListener("message",n,!1)}))}}var _t=i(729),jt=i.n(_t);const{importHTML:Ct,createSandboxContainer:xt}=window.QSandbox||{};function kt(e,t){return e.startsWith("http")?fetch(e,t):(e=e.replace("file://",""),new Promise((async(t,n)=>{try{const n=await window.apis.doAction(["readFile",e]);t({text:()=>n})}catch(e){console.error(e),n(e)}})))}class Et extends(jt()){_pluginLocal;_frame;_root;_loaded=!1;_unmountFns=[];constructor(e){super(),this._pluginLocal=e,e._dispose((()=>{this._unmount()}))}async load(){const{name:e,entry:t}=this._pluginLocal.options;if(this.loaded||!t)return;const{template:n,execScripts:o}=await Ct(t,{fetch:kt});this._mount(n,document.body);const r=xt(e,{elementGetter:()=>this._root?.firstChild}).instance.proxy;r.__shadow_mode__=!0,r.LSPluginLocal=this._pluginLocal,r.LSPluginShadow=this,r.LSPluginUser=r.logseq=new qt(this._pluginLocal.toJSON(),this._pluginLocal.caller);const i=await o(r,!0);this._unmountFns.push(i.unmount),this._loaded=!0}_mount(e,t){const n=this._frame=document.createElement("div");n.classList.add("lsp-shadow-sandbox"),n.id=this._pluginLocal.id,this._root=n.attachShadow({mode:"open"}),this._root.innerHTML=`<div>${e}</div>`,t.appendChild(n),this.emit("mounted")}_unmount(){for(const e of this._unmountFns)e&&e.call(null)}destroy(){this.frame?.parentNode?.removeChild(this.frame)}get loaded(){return this._loaded}get document(){return this._root?.firstChild}get frame(){return this._frame}}const St=ut()("LSPlugin:caller"),Pt="#await#response#",Ot="#lspmsg#error#",At=e=>`#lspmsg#${e}`;class Lt extends(jt()){_pluginLocal;_connected=!1;_parent;_child;_shadow;_status;_userModel={};_call;_callUserModel;_debugTag="";constructor(e){super(),this._pluginLocal=e,e&&(this._debugTag=e.debugTag)}async connectToChild(){if(this._connected)return;const{shadow:e}=this._pluginLocal;e?await this._setupShadowSandbox():await this._setupIframeSandbox()}async connectToParent(e={}){if(this._connected)return;const t=this,n=null!=this._pluginLocal;let o=0,r=0;const i=new Map,s=ht(5e3),a=this._extendUserModel({"#lspmsg#ready#":async e=>{a[At(e?.pid)]=({type:e,payload:n})=>{St(`[host (_call) -> *user] ${this._debugTag}`,e,n),t.emit(e,n)},await s.resolve()},"#lspmsg#beforeunload#":async e=>{const n=ht(1e4);t.emit("beforeunload",Object.assign({actor:n},e)),await n.promise},"#lspmsg#settings#":async({type:e,payload:n})=>{t.emit("settings:changed",n)},"#lspmsg#":async({ns:e,type:n,payload:o})=>{St(`[host (async) -> *user] ${this._debugTag} ns=${e} type=${n}`,o),e&&e.startsWith("hook")?t.emit(`${e}:${n}`,o):t.emit(n,o)},"#lspmsg#reply#":({_sync:e,result:t})=>{if(St(`[sync host -> *user] #${e}`,t),i.has(e)){const n=i.get(e);n&&(t?.hasOwnProperty(Ot)?n.reject(t[Ot]):n.resolve(t),i.delete(e))}},...e});if(n)return await s.promise,JSON.parse(JSON.stringify(this._pluginLocal?.toJSON()));const c=new wt(a).sendHandshakeReply();return this._status="pending",await c.then((e=>{this._child=e,this._connected=!0,this._call=async(t,n={},o)=>{if(o){const e=++r;i.set(e,o),n._sync=e,o.setTag(`async call #${e}`),St(`async call #${e}`)}return e.emit(At(a.baseInfo.id),{type:t,payload:n}),o?.promise},this._callUserModel=async(e,t)=>{try{a[e](t)}catch(t){St(`[model method] #${e} not existed`)}},o=setInterval((()=>{if(i.size>100)for(const[e,t]of i)t.settled&&i.delete(e)}),18e5)})).finally((()=>{this._status=void 0})),await s.promise,a.baseInfo}async call(e,t={}){return this._call?.call(this,e,t)}async callAsync(e,t={}){const n=ht(1e4);return this._call?.call(this,e,t,n)}async callUserModel(e,t={}){return this._callUserModel?.call(this,e,t)}async _setupIframeSandbox(){const e=this._pluginLocal,t=e.id,n=`${t}_lsp_main`,o=new URL(e.options.entry);o.searchParams.set("__v__",e.options.version);const r=document.querySelector(`#${n}`);r&&r.parentElement.removeChild(r);const i=document.createElement("div");i.classList.add("lsp-iframe-sandbox-container"),i.id=n,i.dataset.pid=t;try{const e=(await this._pluginLocal._loadLayoutsData())?.$$0;if(e){i.dataset.inited_layout="true";const{width:t,height:n,left:o,top:r}=e;Object.assign(i.style,{width:t+"px",height:n+"px",left:o+"px",top:r+"px"})}}catch(e){console.error("[Restore Layout Error]",e)}document.body.appendChild(i);let s,a=new bt({id:t+"_iframe",container:i,url:o.href,classListArray:["lsp-iframe-sandbox"],model:{baseInfo:JSON.parse(JSON.stringify(e.toJSON()))}}).sendHandshake();return this._status="pending",new Promise(((t,n)=>{s=setTimeout((()=>{n(new Error("handshake Timeout"))}),3e3),a.then((n=>{this._parent=n,this._connected=!0,this.emit("connected"),n.on(At(e.id),(({type:e,payload:t})=>{St("[user -> *host] ",e,t),this._pluginLocal?.emit(e,t||{})})),this._call=async(...t)=>{await n.call(At(e.id),{type:t[0],payload:Object.assign(t[1]||{},{$$pid:e.id})})},this._callUserModel=async(e,t)=>{if(e.startsWith(Pt))return await n.get(e.replace(Pt,""));n.call(e,t)},t(null)})).catch((e=>{n(e)})).finally((()=>{clearTimeout(s)}))})).catch((e=>{throw St("[iframe sandbox] error",e),e})).finally((()=>{this._status=void 0}))}async _setupShadowSandbox(){const e=this._pluginLocal,t=this._shadow=new Et(e);try{this._status="pending",await t.load(),this._connected=!0,this.emit("connected"),this._call=async(t,n={},o)=>(o&&(n.actor=o),this._pluginLocal?.emit(t,Object.assign(n,{$$pid:e.id})),o?.promise),this._callUserModel=async(...e)=>{let t=e[0];t?.startsWith(Pt)&&(t=t.replace(Pt,""));const n=e[1]||{},o=this._userModel[t];"function"==typeof o&&await o.call(null,n)}}catch(e){throw St("[shadow sandbox] error",e),e}finally{this._status=void 0}}_extendUserModel(e){return Object.assign(this._userModel,e)}_getSandboxIframeContainer(){return this._parent?.frame.parentNode}_getSandboxShadowContainer(){return this._shadow?.frame.parentNode}_getSandboxIframeRoot(){return this._parent?.frame}_getSandboxShadowRoot(){return this._shadow?.frame}set debugTag(e){this._debugTag=e}async destroy(){let e=null;this._parent&&(e=this._getSandboxIframeContainer(),await this._parent.destroy()),this._shadow&&(e=this._getSandboxShadowContainer(),this._shadow.destroy()),e?.parentNode.removeChild(e)}}class Tt{ctx;constructor(e){this.ctx=e}get ctxId(){return this.ctx.baseInfo.id}setItem(e,t){return this.ctx.caller.callAsync("api:call",{method:"write-plugin-storage-file",args:[this.ctxId,e,t]})}getItem(e){return this.ctx.caller.callAsync("api:call",{method:"read-plugin-storage-file",args:[this.ctxId,e]})}removeItem(e){return this.ctx.caller.call("api:call",{method:"unlink-plugin-storage-file",args:[this.ctxId,e]})}clear(){return this.ctx.caller.call("api:call",{method:"clear-plugin-storage-files",args:[this.ctxId]})}hasItem(e){return this.ctx.caller.callAsync("api:call",{method:"exist-plugin-storage-file",args:[this.ctxId,e]})}}class Ft{ctx;constructor(e){this.ctx=e}get React(){return this.ensureHostScope().React}get ReactDOM(){return this.ensureHostScope().ReactDOM}get pluginLocal(){return this.ensureHostScope().LSPluginCore.ensurePlugin(this.ctx.baseInfo.id)}invokeExperMethod(e,...t){const n=this.ensureHostScope();return e=ct(e)?.toLowerCase(),n.logseq.api["exper_"+e]?.apply(n,t)}async loadScripts(...e){(e=e.map((e=>e?.startsWith("http")?e:this.ctx.resolveResourceFullUrl(e)))).unshift(this.ctx.baseInfo.id),await this.invokeExperMethod("loadScripts",...e)}registerFencedCodeRenderer(e,t){return this.ensureHostScope().logseq.api.exper_register_fenced_code_renderer(this.ctx.baseInfo.id,e,t)}registerExtensionsEnhancer(e,t){const n=this.ensureHostScope();return"katex"===e&&n.katex&&t(n.katex).catch(console.error),n.logseq.api.exper_register_extensions_enhancer(this.ctx.baseInfo.id,e,t)}ensureHostScope(){if(window===top)throw new Error("Can not access host scope!");return top}}const zt=Symbol.for("proxy-continue"),Mt=ut()("LSPlugin:user");function It(e,t,n){if("function"!=typeof n)return!1;const{key:o,label:r,desc:i,palette:s,keybinding:a}=t,c=`SimpleCommandHook${o}${++$t}`;this.Editor["on"+c](n),this.caller?.call("api:call",{method:"register-plugin-simple-command",args:[this.baseInfo.id,[{key:o,label:r,type:e,desc:i,keybinding:a},["editor/hook",c]],s]})}let Dt=null;const Rt={async getInfo(e){return Dt||(Dt=await this._execCallableAPIAsync("get-app-info")),"string"==typeof e?Dt[e]:Dt},registerCommand:It,registerCommandPalette(e,t){const{key:n,label:o,keybinding:r}=e;return It.call(this,"$palette$",{key:n,label:o,palette:!0,keybinding:r},t)},registerCommandShortcut(e,t){const{binding:n}=e,o="$shortcut$",r=o+ct(n);return It.call(this,o,{key:r,palette:!1,keybinding:e},t)},registerUIItem(e,t){const n=this.baseInfo.id;this.caller?.call("api:call",{method:"register-plugin-ui-item",args:[n,e,t]})},registerPageMenuItem(e,t){if("function"!=typeof t)return!1;const n=e+"_"+this.baseInfo.id,o=e;It.call(this,"page-menu-item",{key:n,label:o},t)},setFullScreen(e){const t=(...e)=>this._callWin("setFullScreen",...e);"toggle"===e?this._callWin("isFullScreen").then((e=>{e?t():t(!0)})):e?t(!0):t()}};let $t=0;const Nt={registerSlashCommand(e,t){Mt("Register slash command #",this.baseInfo.id,e,t),"function"==typeof t&&(t=[["editor/clear-current-slash",!1],["editor/restore-saved-cursor"],["editor/hook",t]]),t=t.map((e=>{const[t,...n]=e;if("editor/hook"===t){let o=n[0],r=()=>{this.caller?.callUserModel(o)};"function"==typeof o&&(r=o);const i=`SlashCommandHook${t}${++$t}`;e[1]=i,this.Editor["on"+i](r)}return e})),this.caller?.call("api:call",{method:"register-plugin-slash-command",args:[this.baseInfo.id,[e,t]]})},registerBlockContextMenuItem(e,t){if("function"!=typeof t)return!1;const n=e+"_"+this.baseInfo.id,o=e;It.call(this,"block-context-menu-item",{key:n,label:o},t)},scrollToBlockInPage(e,t,n){const o="block-content-"+t;n?.replaceState?this.App.replaceState("page",{name:e},{anchor:o}):this.App.pushState("page",{name:e},{anchor:o})}},Bt={onBlockChanged(e,t){const n=this.baseInfo.id,o=`hook:db:${ct(`block:${e}`)}`,r=({block:n,txData:o,txMeta:r})=>{n.uuid===e&&t(n,o,r)};return this.caller.on(o,r),this.App._installPluginHook(n,o),()=>{this.caller.off(o,r),this.App._uninstallPluginHook(n,o)}}},Ht={},Ut={},Vt={};class qt extends(jt()){_baseInfo;_caller;_version="0.0.6";_debugTag="";_settingsSchema;_connected=!1;_ui=new Map;_mFileStorage;_mExperiments;_beforeunloadCallback;constructor(e,t){super(),this._baseInfo=e,this._caller=t,t.on("sys:ui:visible",(e=>{e?.toggle&&this.toggleMainUI()})),t.on("settings:changed",(e=>{const t=Object.assign({},this.settings),n=Object.assign(this._baseInfo.settings,e);this.emit("settings:changed",{...n},t)})),t.on("beforeunload",(async e=>{const{actor:n,...o}=e,r=this._beforeunloadCallback;try{r&&await r(o),n?.resolve(null)}catch(e){console.debug(`${t.debugTag} [beforeunload] `,e),n?.reject(e)}}))}async ready(e,t){if(!this._connected)try{"function"==typeof e&&(t=e,e={});let n=await this._caller.connectToParent(e);this._connected=!0,n=lt(this._baseInfo,n),this._settingsSchema&&(n.settings=function(e,t){const n=(t||[]).reduce(((e,t)=>("default"in t&&(e[t.key]=t.default),e)),{});return Object.assign(n,e)}(n.settings,this._settingsSchema),await this.useSettingsSchema(this._settingsSchema)),n?.id&&(this._debugTag=this._caller.debugTag=`#${n.id} [${n.name}]`);try{await this._execCallableAPIAsync("setSDKMetadata",{version:this._version})}catch(e){console.warn(e)}t&&t.call(this,n)}catch(e){console.error(`${this._debugTag} [Ready Error]`,e)}}ensureConnected(){if(!this._connected)throw new Error("not connected")}beforeunload(e){"function"==typeof e&&(this._beforeunloadCallback=e)}provideModel(e){return this.caller._extendUserModel(e),this}provideTheme(e){return this.caller.call("provider:theme",e),this}provideStyle(e){return this.caller.call("provider:style",e),this}provideUI(e){return this.caller.call("provider:ui",e),this}useSettingsSchema(e){return this.connected&&this.caller.call("settings:schema",{schema:e,isSync:!0}),this._settingsSchema=e,this}updateSettings(e){this.caller.call("settings:update",e)}onSettingsChanged(e){const t="settings:changed";return this.on(t,e),()=>this.off(t,e)}showSettingsUI(){this.caller.call("settings:visible:changed",{visible:!0})}hideSettingsUI(){this.caller.call("settings:visible:changed",{visible:!1})}setMainUIAttrs(e){this.caller.call("main-ui:attrs",e)}setMainUIInlineStyle(e){this.caller.call("main-ui:style",e)}hideMainUI(e){const t={key:0,visible:!1,cursor:e?.restoreEditingCursor};this.caller.call("main-ui:visible",t),this.emit("ui:visible:changed",t),this._ui.set(t.key,t)}showMainUI(e){const t={key:0,visible:!0,autoFocus:e?.autoFocus};this.caller.call("main-ui:visible",t),this.emit("ui:visible:changed",t),this._ui.set(t.key,t)}toggleMainUI(){const e=this._ui.get(0);e&&e.visible?this.hideMainUI():this.showMainUI()}get version(){return this._version}get isMainUIVisible(){const e=this._ui.get(0);return Boolean(e&&e.visible)}get connected(){return this._connected}get baseInfo(){return this._baseInfo}get settings(){return this.baseInfo?.settings}get caller(){return this._caller}resolveResourceFullUrl(e){if(this.ensureConnected(),e)return e=e.replace(/^[.\\/]+/,""),function(e,...t){try{const n=new URL(e);if(!n.origin)throw new Error(null);const o=at.join(e.substr(n.origin.length),...t);return n.origin+o}catch(n){return at.join(e,...t)}}(this._baseInfo.lsr,e)}_makeUserProxy(e,t){const n=this,o=this.caller;return new Proxy(e,{get(e,r,i){const s=e[r];return function(...e){if(s){const o=s.apply(n,e.concat(t));if(o!==zt)return o}if(t){const i=r.toString().match(/^(once|off|on)/i);if(null!=i){const r=i[0].toLowerCase(),s=i.input.slice(r.length),a="off"===r,c=n.baseInfo.id,l=`hook:${t}:${ct(s)}`,h=e[0];o[r](l,h);const d=()=>{o.off(l,h),o.listenerCount(l)||n.App._uninstallPluginHook(c,l)};return a?void d():(n.App._installPluginHook(c,l),d)}}let i=r;return["git","ui","assets"].includes(t)&&(i=t+"_"+i),o.callAsync("api:call",{tag:t,method:i,args:e})}}})}_execCallableAPIAsync(e,...t){return this._caller.callAsync("api:call",{method:e,args:t})}_execCallableAPI(e,...t){this._caller.call("api:call",{method:e,args:t})}_callWin(...e){return this._execCallableAPIAsync("_callMainWin",...e)}get App(){return this._makeUserProxy(Rt,"app")}get Editor(){return this._makeUserProxy(Nt,"editor")}get DB(){return this._makeUserProxy(Bt,"db")}get Git(){return this._makeUserProxy(Ht,"git")}get UI(){return this._makeUserProxy(Ut,"ui")}get Assets(){return this._makeUserProxy(Vt,"assets")}get FileStorage(){let e=this._mFileStorage;return e||(e=this._mFileStorage=new Tt(this)),e}get Experiments(){let e=this._mExperiments;return e||(e=this._mExperiments=new Ft(this)),e}}function Wt(e,t){return new qt(e,t)}if(null==window.__LSP__HOST__){const e=new Lt(null);window.logseq=Wt({},e)}})(),s})()})),o("cVm5l");const c={discord:"joypixels",slack:"iamcal"};async function l(e,t,n){var o;return a(`${e}/shortcodes/${null!==(o=c[t])&&void 0!==o?o:t}.json`,n)}function h(e,t){if(0===t.length)return e;const n=new Set(e.shortcodes);return t.forEach((t=>{const o=t[e.hexcode];Array.isArray(o)?o.forEach((e=>n.add(e))):o&&n.add(o)})),e.shortcodes=[...n],e.skins&&e.skins.forEach((e=>{h(e,t)})),e}async function d(e,t={}){const{compact:n=!1,flat:o=!1,shortcodes:r=[],...i}=t,s=await a(`${e}/${n?"compact":"data"}.json`,i);let c=[];return r.length>0&&(c=await Promise.all(r.map((t=>{let n;if(t.includes("/")){const[e,o]=t.split("/");n=l(e,o,i)}else n=l(e,t,i);return n.catch((()=>({})))})))),o?function(e,t=[]){const n=[];return e.forEach((e=>{if(e.skins){const{skins:o,...r}=e;n.push(h(r,t)),o.forEach((e=>{const o={...e};r.tags&&(o.tags=[...r.tags]),n.push(h(o,t))}))}else n.push(h(e,t))})),n}(s,c):(d=s,0===(u=c).length||d.forEach((e=>{h(e,u)})),d);var d,u}async function u(e,t){return a(`${e}/messages.json`,t)}function p(e,t){const n=e.target.closest("[data-emoji]");if(n){const e=t.find((e=>e.emoji===n.dataset.emoji));if(e)return e}return null}function m(e){var t;const n=null===(t=window.matchMedia)||void 0===t?void 0:t.call(window,"(prefers-reduced-motion: reduce)");return e.animate&&!(null==n?void 0:n.matches)}function f(e,t){return e.toLowerCase().includes(t.toLowerCase())}function g(e,t,n,o){return m(o)&&e.animate?e.animate(t,n).finished:Promise.resolve()}function v(e){var t;const n=document.createElement("template");return n.innerHTML=e,null===(t=n.content)||void 0===t?void 0:t.firstElementChild}function y(e){return r(this,void 0,void 0,(function*(){try{return(yield fetch(e,{method:"HEAD"})).headers.get("etag")}catch(e){return null}}))}function b(e,t,n){return r(this,void 0,void 0,(function*(){const o=n||t(e);return yield o.open(),o}))}function w(e,t,n,o,i){return r(this,void 0,void 0,(function*(){const s=yield b(e,t,i),a=yield function(e){return r(this,void 0,void 0,(function*(){const t=(new TextEncoder).encode(e),n=yield crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}))}(o);return(yield s.isPopulated())&&!(yield function(e,t){return r(this,void 0,void 0,(function*(){const n=yield e.getHash();return t!==n}))}(s,a))||(yield s.populate({groups:n.groups,emojis:o,hash:a})),s}))}function _(e,t,n,o,i){return r(this,void 0,void 0,(function*(){return n&&o?w(e,t,n,o,i):function(e,t,n){return r(this,void 0,void 0,(function*(){const o=yield b(e,t,n),[i,s]=yield function(e){const{emojisUrl:t,messagesUrl:n}=function(e,t){const n=`https://cdn.jsdelivr.net/npm/emojibase-data@latest/${t}`;return{emojisUrl:`${n}/data.json`,messagesUrl:`${n}/messages.json`}}(0,e);try{return Promise.all([y(t),y(n)])}catch(e){return Promise.all([null,null])}}(e);if(yield o.isPopulated())i&&s&&(yield function(e,t,n){return r(this,void 0,void 0,(function*(){let o;try{o=yield e.getEtags()}catch(e){o={}}const{storedEmojisEtag:r,storedMessagesEtag:i}=o;if(n!==i||t!==r){const[o,r]=yield Promise.all([u(e.locale),d(e.locale)]);yield e.populate({groups:o.groups,emojis:r,emojisEtag:t,messagesEtag:n})}}))}(o,i,s));else{const[t,n]=yield Promise.all([u(e),d(e)]);yield o.populate({groups:t.groups,emojis:n,emojisEtag:i,messagesEtag:s})}return o}))}(e,t,i)}))}class j{constructor(){this.handleKeyDown=this.handleKeyDown.bind(this)}activate(e){this.rootElement=e,this.rootElement.addEventListener("keydown",this.handleKeyDown)}deactivate(){var e;null===(e=this.rootElement)||void 0===e||e.removeEventListener("keydown",this.handleKeyDown)}get focusableElements(){return this.rootElement.querySelectorAll('input, [tabindex="0"]')}get lastFocusableElement(){return this.focusableElements[this.focusableElements.length-1]}get firstFocusableElement(){return this.focusableElements[0]}checkFocus(e,t,n){e.target===t&&(n.focus(),e.preventDefault())}handleKeyDown(e){"Tab"===e.key&&this.checkFocus(e,e.shiftKey?this.firstFocusableElement:this.lastFocusableElement,e.shiftKey?this.lastFocusableElement:this.firstFocusableElement)}}class C{constructor({template:e,classes:t,parent:n}){this.isDestroyed=!1,this.appEvents={},this.uiEvents=[],this.uiElements={},this.ui={},this.template=e,this.classes=t,this.parent=n,this.keyBindingHandler=this.keyBindingHandler.bind(this)}initialize(){this.bindAppEvents()}setCustomEmojis(e){this.customEmojis=e}setEvents(e){this.events=e}setPickerId(e){this.pickerId=e}emit(e,...t){this.events.emit(e,...t)}setI18n(e){this.i18n=e}setRenderer(e){this.renderer=e}setEmojiData(e){this.emojiDataPromise=e,e.then((e=>{this.emojiData=e}))}updateEmojiData(e){this.emojiData=e,this.emojiDataPromise=Promise.resolve(e)}setOptions(e){this.options=e}renderSync(e={}){return this.el=this.template.renderSync(Object.assign({classes:this.classes,i18n:this.i18n,pickerId:this.pickerId},e)),this.postRender(),this.el}render(e={}){return r(this,void 0,void 0,(function*(){return yield this.emojiDataPromise,this.el=yield this.template.renderAsync(Object.assign({classes:this.classes,i18n:this.i18n,pickerId:this.pickerId},e)),this.postRender(),this.el}))}postRender(){this.bindUIElements(),this.bindKeyBindings(),this.bindUIEvents(),this.scheduleShowAnimation()}bindAppEvents(){Object.keys(this.appEvents).forEach((e=>{this.events.on(e,this.appEvents[e],this)})),this.events.on("data:ready",this.updateEmojiData,this)}unbindAppEvents(){Object.keys(this.appEvents).forEach((e=>{this.events.off(e,this.appEvents[e])})),this.events.off("data:ready",this.updateEmojiData)}keyBindingHandler(e){const t=this.keyBindings[e.key];t&&t.call(this,e)}bindKeyBindings(){this.keyBindings&&this.el.addEventListener("keydown",this.keyBindingHandler)}unbindKeyBindings(){this.keyBindings&&this.el.removeEventListener("keydown",this.keyBindingHandler)}bindUIElements(){this.ui=Object.keys(this.uiElements).reduce(((e,t)=>Object.assign(Object.assign({},e),{[t]:this.el.querySelector(this.uiElements[t])})),{})}bindUIEvents(){this.uiEvents.forEach((e=>{e.handler=e.handler.bind(this),(e.target?this.ui[e.target]:this.el).addEventListener(e.event,e.handler,e.options)}))}unbindUIEvents(){this.uiEvents.forEach((e=>{(e.target?this.ui[e.target]:this.el).removeEventListener(e.event,e.handler)}))}destroy(){this.unbindAppEvents(),this.unbindUIEvents(),this.unbindKeyBindings(),this.el.remove(),this.isDestroyed=!0}scheduleShowAnimation(){if(this.parent){const e=new MutationObserver((t=>{const[n]=t;"childList"===n.type&&n.addedNodes[0]===this.el&&(m(this.options)&&this.animateShow&&this.animateShow(),e.disconnect)}));e.observe(this.parent,{childList:!0})}}static childEvent(e,t,n,o={}){return{target:e,event:t,handler:n,options:o}}static uiEvent(e,t,n={}){return{event:e,handler:t,options:n}}static byClass(e){return`.${e}`}}function x(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&o.firstChild?o.insertBefore(r,o.firstChild):o.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}var k={icon:"icons_icon__YUQ3S","icon-small":"icons_icon-small__fEcU6","icon-medium":"icons_icon-medium__e5lKJ","icon-large":"icons_icon-large__t5mwg","icon-2x":"icons_icon-2x__on8is","icon-3x":"icons_icon-3x__RBDYg","icon-4x":"icons_icon-4x__UjvXP","icon-5x":"icons_icon-5x__zRG9K","icon-8x":"icons_icon-8x__PsCPS","icon-10x":"icons_icon-10x__WLjku"};x(".icons_icon__YUQ3S {\n  width: 1.25em;\n  height: 1em;\n  fill: currentColor;\n}\n\n.icons_icon-small__fEcU6 {\n  font-size: 0.8em;\n}\n\n.icons_icon-medium__e5lKJ {\n  font-size: 1em;\n}\n\n.icons_icon-large__t5mwg {\n  font-size: 1.25em;\n}\n\n.icons_icon-2x__on8is {\n  font-size: 2em;\n}\n\n.icons_icon-3x__RBDYg {\n  font-size: 3em;\n}\n\n.icons_icon-4x__UjvXP {\n  font-size: 4em;\n}\n\n.icons_icon-5x__zRG9K {\n  font-size: 5em;\n}\n\n.icons_icon-8x__PsCPS {\n  font-size: 8em;\n}\n\n.icons_icon-10x__WLjku {\n  font-size: 10em;\n}");const E={clock:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">\x3c!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --\x3e<path d="M256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512zM232 256C232 264 236 271.5 242.7 275.1L338.7 339.1C349.7 347.3 364.6 344.3 371.1 333.3C379.3 322.3 376.3 307.4 365.3 300L280 243.2V120C280 106.7 269.3 96 255.1 96C242.7 96 231.1 106.7 231.1 120L232 256z"/></svg>',flag:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">\x3c!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --\x3e<path d="M64 496C64 504.8 56.75 512 48 512h-32C7.25 512 0 504.8 0 496V32c0-17.75 14.25-32 32-32s32 14.25 32 32V496zM476.3 0c-6.365 0-13.01 1.35-19.34 4.233c-45.69 20.86-79.56 27.94-107.8 27.94c-59.96 0-94.81-31.86-163.9-31.87C160.9 .3055 131.6 4.867 96 15.75v350.5c32-9.984 59.87-14.1 84.85-14.1c73.63 0 124.9 31.78 198.6 31.78c31.91 0 68.02-5.971 111.1-23.09C504.1 355.9 512 344.4 512 332.1V30.73C512 11.1 495.3 0 476.3 0z"/></svg>',frown:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">\x3c!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --\x3e<path d="M0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256zM176.4 240C194 240 208.4 225.7 208.4 208C208.4 190.3 194 176 176.4 176C158.7 176 144.4 190.3 144.4 208C144.4 225.7 158.7 240 176.4 240zM336.4 176C318.7 176 304.4 190.3 304.4 208C304.4 225.7 318.7 240 336.4 240C354 240 368.4 225.7 368.4 208C368.4 190.3 354 176 336.4 176zM259.9 369.4C288.8 369.4 316.2 375.2 340.6 385.5C352.9 390.7 366.7 381.3 361.4 369.1C344.8 330.9 305.6 303.1 259.9 303.1C214.3 303.1 175.1 330.8 158.4 369.1C153.1 381.3 166.1 390.6 179.3 385.4C203.7 375.1 231 369.4 259.9 369.4L259.9 369.4z"/></svg>',gamepad:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512">\x3c!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --\x3e<path d="M448 64H192C85.96 64 0 149.1 0 256s85.96 192 192 192h256c106 0 192-85.96 192-192S554 64 448 64zM247.1 280h-32v32c0 13.2-10.78 24-23.98 24c-13.2 0-24.02-10.8-24.02-24v-32L136 279.1C122.8 279.1 111.1 269.2 111.1 256c0-13.2 10.85-24.01 24.05-24.01L167.1 232v-32c0-13.2 10.82-24 24.02-24c13.2 0 23.98 10.8 23.98 24v32h32c13.2 0 24.02 10.8 24.02 24C271.1 269.2 261.2 280 247.1 280zM431.1 344c-22.12 0-39.1-17.87-39.1-39.1s17.87-40 39.1-40s39.1 17.88 39.1 40S454.1 344 431.1 344zM495.1 248c-22.12 0-39.1-17.87-39.1-39.1s17.87-40 39.1-40c22.12 0 39.1 17.88 39.1 40S518.1 248 495.1 248z"/></svg>',lightbulb:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512">\x3c!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --\x3e<path d="M112.1 454.3c0 6.297 1.816 12.44 5.284 17.69l17.14 25.69c5.25 7.875 17.17 14.28 26.64 14.28h61.67c9.438 0 21.36-6.401 26.61-14.28l17.08-25.68c2.938-4.438 5.348-12.37 5.348-17.7L272 415.1h-160L112.1 454.3zM191.4 .0132C89.44 .3257 16 82.97 16 175.1c0 44.38 16.44 84.84 43.56 115.8c16.53 18.84 42.34 58.23 52.22 91.45c.0313 .25 .0938 .5166 .125 .7823h160.2c.0313-.2656 .0938-.5166 .125-.7823c9.875-33.22 35.69-72.61 52.22-91.45C351.6 260.8 368 220.4 368 175.1C368 78.61 288.9-.2837 191.4 .0132zM192 96.01c-44.13 0-80 35.89-80 79.1C112 184.8 104.8 192 96 192S80 184.8 80 176c0-61.76 50.25-111.1 112-111.1c8.844 0 16 7.159 16 16S200.8 96.01 192 96.01z"/></svg>',mug:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512">\x3c!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --\x3e<path d="M512 32H120c-13.25 0-24 10.75-24 24L96.01 288c0 53 43 96 96 96h192C437 384 480 341 480 288h32c70.63 0 128-57.38 128-128S582.6 32 512 32zM512 224h-32V96h32c35.25 0 64 28.75 64 64S547.3 224 512 224zM560 416h-544C7.164 416 0 423.2 0 432C0 458.5 21.49 480 48 480h480c26.51 0 48-21.49 48-48C576 423.2 568.8 416 560 416z"/></svg>',plane:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">\x3c!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --\x3e<path d="M482.3 192C516.5 192 576 221 576 256C576 292 516.5 320 482.3 320H365.7L265.2 495.9C259.5 505.8 248.9 512 237.4 512H181.2C170.6 512 162.9 501.8 165.8 491.6L214.9 320H112L68.8 377.6C65.78 381.6 61.04 384 56 384H14.03C6.284 384 0 377.7 0 369.1C0 368.7 .1818 367.4 .5398 366.1L32 256L.5398 145.9C.1818 144.6 0 143.3 0 142C0 134.3 6.284 128 14.03 128H56C61.04 128 65.78 130.4 68.8 134.4L112 192H214.9L165.8 20.4C162.9 10.17 170.6 0 181.2 0H237.4C248.9 0 259.5 6.153 265.2 16.12L365.7 192H482.3z"/></svg>',robot:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512">\x3c!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --\x3e<path d="M9.375 233.4C3.375 239.4 0 247.5 0 256v128c0 8.5 3.375 16.62 9.375 22.62S23.5 416 32 416h32V224H32C23.5 224 15.38 227.4 9.375 233.4zM464 96H352V32c0-17.62-14.38-32-32-32S288 14.38 288 32v64H176C131.8 96 96 131.8 96 176V448c0 35.38 28.62 64 64 64h320c35.38 0 64-28.62 64-64V176C544 131.8 508.3 96 464 96zM256 416H192v-32h64V416zM224 296C201.9 296 184 278.1 184 256S201.9 216 224 216S264 233.9 264 256S246.1 296 224 296zM352 416H288v-32h64V416zM448 416h-64v-32h64V416zM416 296c-22.12 0-40-17.88-40-40S393.9 216 416 216S456 233.9 456 256S438.1 296 416 296zM630.6 233.4C624.6 227.4 616.5 224 608 224h-32v192h32c8.5 0 16.62-3.375 22.62-9.375S640 392.5 640 384V256C640 247.5 636.6 239.4 630.6 233.4z"/></svg>',sad:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">\n  <defs>\n    <radialGradient gradientUnits="userSpaceOnUse" cy="10%" id="gradient-0">\n      <stop offset="0" style="stop-color: hsl(50, 100%, 50%);"/>\n      <stop offset="1" style="stop-color: hsl(50, 100%, 60%);"/>\n    </radialGradient>\n  </defs>\n  \x3c!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --\x3e\n  <ellipse style="stroke: rgb(0, 0, 0); fill: rgba(0, 0, 0, 0.59);" cx="172.586" cy="207.006" rx="39.974" ry="39.974"/>\n  <ellipse style="stroke: rgb(0, 0, 0); fill: rgba(0, 0, 0, 0.59);" cx="334.523" cy="207.481" rx="39.974" ry="39.974"/>\n  <ellipse style="stroke: rgb(0, 0, 0); fill: rgba(0, 0, 0, 0.59);" cx="313.325" cy="356.208" rx="91.497" ry="59.893"/>\n  <path style="fill: rgb(85, 167, 255);" d="M 159.427 274.06 L 102.158 363.286 L 124.366 417.011 L 160.476 423.338 L 196.937 414.736 L 218.502 375.214"></path>\n  <path style="fill: url(#gradient-0);" d="M256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0zM256 352C290.9 352 323.2 367.8 348.3 394.9C354.3 401.4 364.4 401.7 370.9 395.7C377.4 389.7 377.7 379.6 371.7 373.1C341.6 340.5 301 320 256 320C247.2 320 240 327.2 240 336C240 344.8 247.2 352 256 352H256zM208 369C208 349 179.6 308.6 166.4 291.3C163.2 286.9 156.8 286.9 153.6 291.3C140.6 308.6 112 349 112 369C112 395 133.5 416 160 416C186.5 416 208 395 208 369H208zM303.6 208C303.6 225.7 317.1 240 335.6 240C353.3 240 367.6 225.7 367.6 208C367.6 190.3 353.3 176 335.6 176C317.1 176 303.6 190.3 303.6 208zM207.6 208C207.6 190.3 193.3 176 175.6 176C157.1 176 143.6 190.3 143.6 208C143.6 225.7 157.1 240 175.6 240C193.3 240 207.6 225.7 207.6 208z" />\n</svg>',search:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">\x3c!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --\x3e<path d="M500.3 443.7l-119.7-119.7c27.22-40.41 40.65-90.9 33.46-144.7C401.8 87.79 326.8 13.32 235.2 1.723C99.01-15.51-15.51 99.01 1.724 235.2c11.6 91.64 86.08 166.7 177.6 178.9c53.8 7.189 104.3-6.236 144.7-33.46l119.7 119.7c15.62 15.62 40.95 15.62 56.57 0C515.9 484.7 515.9 459.3 500.3 443.7zM79.1 208c0-70.58 57.42-128 128-128s128 57.42 128 128c0 70.58-57.42 128-128 128S79.1 278.6 79.1 208z"/></svg>',smiley:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">\x3c!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --\x3e<path d="M0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256zM256.3 331.8C208.9 331.8 164.1 324.9 124.5 312.8C112.2 309 100.2 319.7 105.2 331.5C130.1 390.6 188.4 432 256.3 432C324.2 432 382.4 390.6 407.4 331.5C412.4 319.7 400.4 309 388.1 312.8C348.4 324.9 303.7 331.8 256.3 331.8H256.3zM176.4 176C158.7 176 144.4 190.3 144.4 208C144.4 225.7 158.7 240 176.4 240C194 240 208.4 225.7 208.4 208C208.4 190.3 194 176 176.4 176zM336.4 240C354 240 368.4 225.7 368.4 208C368.4 190.3 354 176 336.4 176C318.7 176 304.4 190.3 304.4 208C304.4 225.7 318.7 240 336.4 240z"/></svg>',symbols:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">\x3c!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --\x3e<path d="M500.3 7.251C507.7 13.33 512 22.41 512 31.1V175.1C512 202.5 483.3 223.1 447.1 223.1C412.7 223.1 383.1 202.5 383.1 175.1C383.1 149.5 412.7 127.1 447.1 127.1V71.03L351.1 90.23V207.1C351.1 234.5 323.3 255.1 287.1 255.1C252.7 255.1 223.1 234.5 223.1 207.1C223.1 181.5 252.7 159.1 287.1 159.1V63.1C287.1 48.74 298.8 35.61 313.7 32.62L473.7 .6198C483.1-1.261 492.9 1.173 500.3 7.251H500.3zM74.66 303.1L86.5 286.2C92.43 277.3 102.4 271.1 113.1 271.1H174.9C185.6 271.1 195.6 277.3 201.5 286.2L213.3 303.1H239.1C266.5 303.1 287.1 325.5 287.1 351.1V463.1C287.1 490.5 266.5 511.1 239.1 511.1H47.1C21.49 511.1-.0019 490.5-.0019 463.1V351.1C-.0019 325.5 21.49 303.1 47.1 303.1H74.66zM143.1 359.1C117.5 359.1 95.1 381.5 95.1 407.1C95.1 434.5 117.5 455.1 143.1 455.1C170.5 455.1 191.1 434.5 191.1 407.1C191.1 381.5 170.5 359.1 143.1 359.1zM440.3 367.1H496C502.7 367.1 508.6 372.1 510.1 378.4C513.3 384.6 511.6 391.7 506.5 396L378.5 508C372.9 512.1 364.6 513.3 358.6 508.9C352.6 504.6 350.3 496.6 353.3 489.7L391.7 399.1H336C329.3 399.1 323.4 395.9 321 389.6C318.7 383.4 320.4 376.3 325.5 371.1L453.5 259.1C459.1 255 467.4 254.7 473.4 259.1C479.4 263.4 481.6 271.4 478.7 278.3L440.3 367.1zM116.7 219.1L19.85 119.2C-8.112 90.26-6.614 42.31 24.85 15.34C51.82-8.137 93.26-3.642 118.2 21.83L128.2 32.32L137.7 21.83C162.7-3.642 203.6-8.137 231.6 15.34C262.6 42.31 264.1 90.26 236.1 119.2L139.7 219.1C133.2 225.6 122.7 225.6 116.7 219.1H116.7z"/></svg>',tree:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">\x3c!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --\x3e<path d="M413.8 447.1L256 448l0 31.99C256 497.7 241.8 512 224.1 512c-17.67 0-32.1-14.32-32.1-31.99l0-31.99l-158.9-.0099c-28.5 0-43.69-34.49-24.69-56.4l68.98-79.59H62.22c-25.41 0-39.15-29.8-22.67-49.13l60.41-70.85H89.21c-21.28 0-32.87-22.5-19.28-37.31l134.8-146.5c10.4-11.3 28.22-11.3 38.62-.0033l134.9 146.5c13.62 14.81 2.001 37.31-19.28 37.31h-10.77l60.35 70.86c16.46 19.34 2.716 49.12-22.68 49.12h-15.2l68.98 79.59C458.7 413.7 443.1 447.1 413.8 447.1z"/></svg>',users:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512">\x3c!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --\x3e<path d="M224 256c70.7 0 128-57.31 128-128S294.7 0 224 0C153.3 0 96 57.31 96 128S153.3 256 224 256zM274.7 304H173.3c-95.73 0-173.3 77.6-173.3 173.3C0 496.5 15.52 512 34.66 512H413.3C432.5 512 448 496.5 448 477.3C448 381.6 370.4 304 274.7 304zM479.1 320h-73.85C451.2 357.7 480 414.1 480 477.3C480 490.1 476.2 501.9 470 512h138C625.7 512 640 497.6 640 479.1C640 391.6 568.4 320 479.1 320zM432 256C493.9 256 544 205.9 544 144S493.9 32 432 32c-25.11 0-48.04 8.555-66.72 22.51C376.8 76.63 384 101.4 384 128c0 35.52-11.93 68.14-31.59 94.71C372.7 243.2 400.8 256 432 256z"/></svg>',warning:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">\n  <defs>\n    <radialGradient id="radial" cy="85%">\n      <stop offset="20%" stop-color="var(--color-secondary)" />\n      <stop offset="100%" stop-color="var(--color-primary)" />\n    </radialGradient>\n  </defs>\n  \x3c!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --\x3e\n  <path fill="url(\'#radial\')" d="M506.3 417l-213.3-364c-16.33-28-57.54-28-73.98 0l-213.2 364C-10.59 444.9 9.849 480 42.74 480h426.6C502.1 480 522.6 445 506.3 417zM232 168c0-13.25 10.75-24 24-24S280 154.8 280 168v128c0 13.25-10.75 24-23.1 24S232 309.3 232 296V168zM256 416c-17.36 0-31.44-14.08-31.44-31.44c0-17.36 14.07-31.44 31.44-31.44s31.44 14.08 31.44 31.44C287.4 401.9 273.4 416 256 416z" />\n</svg>',xmark:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512">\x3c!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --\x3e<path d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>'},S={recents:"clock","smileys-emotion":"smiley","people-body":"users","animals-nature":"tree","food-drink":"mug",activities:"gamepad","travel-places":"plane",objects:"lightbulb",symbols:"symbols",flags:"flag",custom:"robot"};function P(e,t){if(!(e in E))return console.warn(`Unknown icon: "${e}"`),document.createElement("div");const n=function(e,t){const n=v(t);return n.dataset.icon=e,n.classList.add(k.icon),n}(e,E[e]);return t&&n.classList.add(k[`icon-${t}`]),n}var O,A,L,T,F,z;class M{constructor(e,t={}){O.add(this),A.set(this,void 0),L.set(this,void 0),s(this,A,e,"f"),s(this,L,t.mode||"sync","f")}renderSync(e={}){const t=v(i(this,A,"f").call(this,e));return i(this,O,"m",z).call(this,t,e),i(this,O,"m",F).call(this,t),i(this,O,"m",T).call(this,t,e),t}renderAsync(e={}){return r(this,void 0,void 0,(function*(){const t=v(i(this,A,"f").call(this,e));return i(this,O,"m",z).call(this,t,e),i(this,O,"m",F).call(this,t),yield i(this,O,"m",T).call(this,t,e),t}))}render(e){return"sync"===i(this,L,"f")?this.renderSync(e):this.renderAsync(e)}}A=new WeakMap,L=new WeakMap,O=new WeakSet,T=function(e,t){return r(this,void 0,void 0,(function*(){const n=e.querySelectorAll("[data-view]"),o=[];for(const e of n){const n=t[e.dataset.view];n?"sync"!==e.dataset.render?o.push(n.render().then((t=>(e.replaceWith(t),t)))):e.replaceWith(n.renderSync()):e.remove()}return Promise.all(o)}))},F=function(e){e.querySelectorAll("i[data-icon]").forEach((e=>{const{icon:t,size:n}=e.dataset;e.replaceWith(P(t,n))}))},z=function(e,t){return e.querySelectorAll("[data-placeholder]").forEach((e=>{const n=e.dataset.placeholder;if(n&&t[n]){const o=t[n];e.replaceWith(...[o].flat())}else console.warn(`Missing placeholder element for key "${n}"`)})),e};var I={imagePlaceholder:"common_imagePlaceholder__FRWLu",placeholder:"common_placeholder__qe-fo",shine:"common_shine__tUVG2"};x('@keyframes common_shine__tUVG2 {\n  to {\n    transform: translateX(100%);\n  }\n}\n.common_imagePlaceholder__FRWLu {\n  width: 2rem;\n  height: 2rem;\n  border-radius: 50%;\n}\n\n.common_placeholder__qe-fo {\n  background: #DDDBDD;\n  position: relative;\n}\n.common_placeholder__qe-fo::after {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  transform: translateX(-100%);\n  background-image: linear-gradient(90deg, rgba(255, 255, 255, 0) 0, rgba(255, 255, 255, 0.2) 20%, rgba(255, 255, 255, 0.5) 60%, rgba(255, 255, 255, 0));\n  animation: common_shine__tUVG2 2s infinite;\n  content: "";\n}');const D=new M((({classes:e})=>`\n  <div class="${e.placeholder} ${e.imagePlaceholder}"></div>\n`));class R extends C{constructor({classNames:e}={}){super({template:D,classes:I}),this.classNames=e}load(e){const t=document.createElement("img");this.classNames&&(t.className=this.classNames),t.addEventListener("load",(()=>{this.el.replaceWith(t)}),{once:!0}),Promise.resolve(e).then((e=>t.src=e))}renderSync(){return super.renderSync(),this.classNames&&this.classNames.split(" ").forEach((e=>this.el.classList.add(e))),this.el}}var $={customEmoji:"custom_customEmoji__Kspg6"};x(".custom_customEmoji__Kspg6 {\n  width: 1em;\n  height: 1em;\n}");const N=new M((({emoji:e})=>`<span>${e}</span>`));x(".themes_lightTheme__mMNem {\n  color-scheme: light;\n  --accent-color: #4f46e5;\n  --background-color: #f9fafb;\n  --border-color: #cccccc;\n  --category-name-background-color: #f9fafb;\n  --category-name-button-color: #999999;\n  --category-name-text-color: hsl(214, 30%, 50%);\n  --category-tab-active-background-color: rgba(255, 255, 255, 0.6);\n  --category-tab-active-color: var(--accent-color);\n  --category-tab-color: #666;\n  --category-tab-highlight-background-color: rgba(0, 0, 0, 0.15);\n  --error-color-dark: hsl(0, 100%, 45%);\n  --error-color: hsl(0, 100%, 40%);\n  --focus-indicator-background-color: hsl(198, 65%, 85%);\n  --focus-indicator-color: #333333;\n  --hover-background-color: #c7d2fe;\n  --placeholder-background-color: #cccccc;\n  --preview-background-color: var(--secondary-background-color);\n  --scrollbar-background-color: var(--background-color);\n  --scrollbar-color: rgba(0, 0, 0, 0.75);\n  --search-background-color: #f9fafb;\n  --search-focus-background-color: #ffffff;\n  --search-icon-color: #999999;\n  --search-placeholder-color: #71717a;\n  --secondary-background-color: #e2e8f0;\n  --secondary-text-color: #666666;\n  --tag-background-color: rgba(162, 190, 245, 0.3);\n  --text-color: #000000;\n  --variant-popup-background-color: #ffffff;\n}\n\n.themes_darkTheme__qgrZP {\n  color-scheme: dark;\n  --accent-color: #A580F9;\n  --background-color: #333333;\n  --border-color: #666666;\n  --category-name-background-color: #333333;\n  --category-name-button-color: #eeeeee;\n  --category-name-text-color: #ffffff;\n  --category-tab-active-background-color: #000000;\n  --category-tab-active-color: var(--accent-color);\n  --category-tab-color: #cccccc;\n  --category-tab-highlight-background-color: #4A4A4A;\n  --error-color-dark: hsl(0, 7%, 3%);\n  --error-color: hsl(0, 30%, 60%);\n  --focus-indicator-background-color: hsl(0, 0%, 50%);\n  --focus-indicator-color: #999999;\n  --hover-background-color: hsla(0, 0%, 40%, 0.85);\n  --image-placeholder-color: #ffffff;\n  --placeholder-background-color: #666666;\n  --search-background-color: #71717a;\n  --search-focus-background-color: #52525b;\n  --search-icon-color: #cccccc;\n  --search-placeholder-color: #d4d4d8;\n  --secondary-background-color: #000000 ;\n  --secondary-text-color: #999999;\n  --tag-background-color: rgba(162, 190, 245, 0.3);\n  --text-color: #ffffff;\n  --variant-popup-background-color: #333333;\n}\n\n.themes_autoTheme__tik-v {\n  color-scheme: light;\n  --accent-color: #4f46e5;\n  --background-color: #f9fafb;\n  --border-color: #cccccc;\n  --category-name-background-color: #f9fafb;\n  --category-name-button-color: #999999;\n  --category-name-text-color: hsl(214, 30%, 50%);\n  --category-tab-active-background-color: rgba(255, 255, 255, 0.6);\n  --category-tab-active-color: var(--accent-color);\n  --category-tab-color: #666;\n  --category-tab-highlight-background-color: rgba(0, 0, 0, 0.15);\n  --error-color-dark: hsl(0, 100%, 45%);\n  --error-color: hsl(0, 100%, 40%);\n  --focus-indicator-background-color: hsl(198, 65%, 85%);\n  --focus-indicator-color: #333333;\n  --hover-background-color: #c7d2fe;\n  --placeholder-background-color: #cccccc;\n  --preview-background-color: var(--secondary-background-color);\n  --scrollbar-background-color: var(--background-color);\n  --scrollbar-color: rgba(0, 0, 0, 0.75);\n  --search-background-color: #f9fafb;\n  --search-focus-background-color: #ffffff;\n  --search-icon-color: #999999;\n  --search-placeholder-color: #71717a;\n  --secondary-background-color: #e2e8f0;\n  --secondary-text-color: #666666;\n  --tag-background-color: rgba(162, 190, 245, 0.3);\n  --text-color: #000000;\n  --variant-popup-background-color: #ffffff;\n}\n\n@media (prefers-color-scheme: dark) {\n  .themes_autoTheme__tik-v {\n    color-scheme: dark;\n    --accent-color: #A580F9;\n    --background-color: #333333;\n    --border-color: #666666;\n    --category-name-background-color: #333333;\n    --category-name-button-color: #eeeeee;\n    --category-name-text-color: #ffffff;\n    --category-tab-active-background-color: #000000;\n    --category-tab-active-color: var(--accent-color);\n    --category-tab-color: #cccccc;\n    --category-tab-highlight-background-color: #4A4A4A;\n    --error-color-dark: hsl(0, 7%, 3%);\n    --error-color: hsl(0, 30%, 60%);\n    --focus-indicator-background-color: hsl(0, 0%, 50%);\n    --focus-indicator-color: #999999;\n    --hover-background-color: hsla(0, 0%, 40%, 0.85);\n    --image-placeholder-color: #ffffff;\n    --placeholder-background-color: #666666;\n    --search-background-color: #71717a;\n    --search-focus-background-color: #52525b;\n    --search-icon-color: #cccccc;\n    --search-placeholder-color: #d4d4d8;\n    --secondary-background-color: #000000 ;\n    --secondary-text-color: #999999;\n    --tag-background-color: rgba(162, 190, 245, 0.3);\n    --text-color: #ffffff;\n    --variant-popup-background-color: #333333;\n  }\n}");const{autoTheme:B,lightTheme:H,darkTheme:U}={lightTheme:"themes_lightTheme__mMNem",darkTheme:"themes_darkTheme__qgrZP",autoTheme:"themes_autoTheme__tik-v"};const V=[(e,t)=>("1F91D"===e.hexcode&&t<14&&(e.skins=[]),e),(e,t)=>(e.skins&&(e.skins=e.skins.filter((e=>!e.version||e.version<=t))),e)];function q(e,t){return e.filter((e=>{return null!==(n=e,o=t,V.some((e=>null===e(n,o)))?null:n);var n,o}))}function W(e){var t;return{emoji:e.emoji,label:e.label,tags:e.tags,skins:null===(t=e.skins)||void 0===t?void 0:t.map((e=>W(e))),order:e.order,custom:!1,hexcode:e.hexcode,version:e.version}}function K(e,t,n){var o;return!(n&&!n.some((t=>t.order===e.group)))&&(f(e.label,t)||(null===(o=e.tags)||void 0===o?void 0:o.some((e=>f(e,t)))))}class G{constructor(e="en"){this.locale=e}}function J(e){return new Y(e)}J.deleteDatabase=e=>new Promise(((t,n)=>{const o=indexedDB.deleteDatabase(`PicMo-${e}`);o.addEventListener("success",t),o.addEventListener("error",n)}));class Y extends G{open(){return r(this,void 0,void 0,(function*(){const e=indexedDB.open(`PicMo-${this.locale}`);return new Promise(((t,n)=>{e.addEventListener("success",(e=>{var n;this.db=null===(n=e.target)||void 0===n?void 0:n.result,t()})),e.addEventListener("error",n),e.addEventListener("upgradeneeded",(e=>r(this,void 0,void 0,(function*(){var t;this.db=null===(t=e.target)||void 0===t?void 0:t.result,this.db.createObjectStore("category",{keyPath:"order"});const n=this.db.createObjectStore("emoji",{keyPath:"emoji"});n.createIndex("category","group"),n.createIndex("version","version"),this.db.createObjectStore("meta")}))))}))}))}delete(){return r(this,void 0,void 0,(function*(){this.close();const e=indexedDB.deleteDatabase(`PicMo-${this.locale}`);yield this.waitForRequest(e)}))}close(){this.db.close()}getEmojiCount(){return r(this,void 0,void 0,(function*(){const e=this.db.transaction("emoji","readonly").objectStore("emoji");return(yield this.waitForRequest(e.count())).target.result}))}getEtags(){return r(this,void 0,void 0,(function*(){const e=this.db.transaction("meta","readonly").objectStore("meta"),[t,n]=yield Promise.all([this.waitForRequest(e.get("emojisEtag")),this.waitForRequest(e.get("messagesEtag"))]);return{storedEmojisEtag:t.target.result,storedMessagesEtag:n.target.result}}))}setMeta(e){return r(this,void 0,void 0,(function*(){const t=this.db.transaction("meta","readwrite"),n=t.objectStore("meta");return new Promise((o=>{t.oncomplete=o,Object.keys(e).filter(Boolean).forEach((t=>{n.put(e[t],t)}))}))}))}getHash(){return r(this,void 0,void 0,(function*(){const e=this.db.transaction("meta","readonly").objectStore("meta");return(yield this.waitForRequest(e.get("hash"))).target.result}))}isPopulated(){return r(this,void 0,void 0,(function*(){const e=this.db.transaction("category","readonly").objectStore("category");return(yield this.waitForRequest(e.count())).target.result>0}))}populate({groups:e,emojis:t,emojisEtag:n,messagesEtag:o,hash:i}){return r(this,void 0,void 0,(function*(){yield this.removeAllObjects("category","emoji");const r=[this.addObjects("category",e),this.addObjects("emoji",t),this.setMeta({emojisEtag:n,messagesEtag:o,hash:i})];yield Promise.all(r)}))}getCategories(e){var t;return r(this,void 0,void 0,(function*(){const n=this.db.transaction("category","readonly").objectStore("category");let o=(yield this.waitForRequest(n.getAll())).target.result.filter((e=>"component"!==e.key));if(e.showRecents&&o.unshift({key:"recents",order:-1}),(null===(t=e.custom)||void 0===t?void 0:t.length)&&o.push({key:"custom",order:10}),e.categories){const t=e.categories;o=o.filter((e=>t.includes(e.key))),o.sort(((e,n)=>t.indexOf(e.key)-t.indexOf(n.key)))}else o.sort(((e,t)=>e.order-t.order));return o}))}getEmojis(e,t){return r(this,void 0,void 0,(function*(){const n=this.db.transaction("emoji","readonly").objectStore("emoji").index("category");return q((yield this.waitForRequest(n.getAll(e.order))).target.result.filter((e=>e.version<=t)).sort(((e,t)=>null!=e.order&&null!=t.order?e.order-t.order:0)).map(W),t)}))}searchEmojis(e,t,n,o){return r(this,void 0,void 0,(function*(){const r=[];return new Promise(((i,s)=>{const a=this.db.transaction("emoji","readonly").objectStore("emoji").openCursor();a.addEventListener("success",(s=>{var a;const c=null===(a=s.target)||void 0===a?void 0:a.result;if(!c)return i([...q(r,n),...t.filter((t=>K(t,e)))]);const l=c.value;K(l,e,o)&&l.version<=n&&r.push(W(l)),c.continue()})),a.addEventListener("error",(e=>{s(e)}))}))}))}waitForRequest(e){return r(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{e.onsuccess=t,e.onerror=n}))}))}withTransaction(e,t="readwrite",n){return new Promise(((o,r)=>{const i=this.db.transaction(e,t);i.oncomplete=o,i.onerror=r,n(i)}))}removeAllObjects(...e){return r(this,void 0,void 0,(function*(){const t=this.db.transaction(e,"readwrite"),n=e.map((e=>t.objectStore(e)));yield Promise.all(n.map((e=>this.waitForRequest(e.clear()))))}))}addObjects(e,t){return r(this,void 0,void 0,(function*(){return this.withTransaction(e,"readwrite",(n=>{const o=n.objectStore(e);t.forEach((e=>{o.add(e)}))}))}))}}class Q extends class{}{constructor(e){super(),this.storage=e}clear(){this.storage.removeItem("PicMo:recents")}getRecents(e){var t;try{return JSON.parse(null!==(t=this.storage.getItem("PicMo:recents"))&&void 0!==t?t:"[]").slice(0,e)}catch(e){return[]}}addOrUpdateRecent(e,t){const n=[e,...this.getRecents(t).filter((t=>t.hexcode!==e.hexcode))].slice(0,t);try{this.storage.setItem("PicMo:recents",JSON.stringify(n))}catch(e){console.warn("storage is not available, recent emojis will not be saved")}}}const Z={renderer:new class extends class{renderElement(e){return{content:e}}renderImage(e="",t){const n=new R({classNames:e});return n.renderSync(),{content:n,resolver:()=>(n.load(t()),n.el)}}doRender(e,t,n){if(e.custom)return this.renderCustom(e,t,n);const{content:o,resolver:r}=this.render(e,n),i=o instanceof HTMLElement?o:o.el;return r&&r(),i}doEmit(e){return e.custom?this.emitCustom(e):this.emit(e)}emitCustom({url:e,label:t,emoji:n,data:o}){return{url:e,label:t,emoji:n,data:o}}renderCustom(e,t,n=""){const o=[$.customEmoji,n].join(" ").trim(),{content:r,resolver:i}=this.renderImage(o,(()=>e.url)),s=r instanceof HTMLElement?r:r.el;return i&&i(),s}}{render(e){return this.renderElement(N.renderSync({emoji:e.emoji}))}emit({emoji:e,hexcode:t,label:n}){return{emoji:e,hexcode:t,label:n}}},dataStore:J,theme:H,animate:!0,showCategoryTabs:!0,showPreview:!0,showRecents:!0,showSearch:!0,showVariants:!0,emojisPerRow:8,visibleRows:6,emojiVersion:"auto",i18n:{"categories.activities":"Activities","categories.animals-nature":"Animals & Nature","categories.custom":"Custom","categories.flags":"Flags","categories.food-drink":"Food & Drink","categories.objects":"Objects","categories.people-body":"People & Body","categories.recents":"Recently Used","categories.smileys-emotion":"Smileys & Emotion","categories.symbols":"Symbols","categories.travel-places":"Travel & Places","error.load":"Failed to load emojis","recents.clear":"Clear recent emojis","recents.none":"You haven't selected any emojis yet.",retry:"Try again","search.clear":"Clear search","search.error":"Failed to search emojis","search.notFound":"No results found",search:"Search emojis..."},locale:"en",maxRecents:50,recentsProvider:new class extends Q{constructor(){super(localStorage)}},custom:[]};function X(e={}){return Object.assign(Object.assign({},Z),e)}var ee,te,ne,oe;class re{constructor(){ee.add(this),te.set(this,new Map)}on(e,t,n){i(this,ee,"m",oe).call(this,e,t,n)}once(e,t,n){i(this,ee,"m",oe).call(this,e,t,n,!0)}off(e,t){const n=i(this,ee,"m",ne).call(this,e);i(this,te,"f").set(e,n.filter((e=>e.handler!==t)))}emit(e,...t){i(this,ee,"m",ne).call(this,e).forEach((n=>{n.handler.apply(n.context,t),n.once&&this.off(e,n.handler)}))}removeAll(){i(this,te,"f").clear()}}te=new WeakMap,ee=new WeakSet,ne=function(e){return i(this,te,"f").has(e)||i(this,te,"f").set(e,[]),i(this,te,"f").get(e)},oe=function(e,t,n,o=!1){i(this,ee,"m",ne).call(this,e).push({context:n,handler:t,once:o})};class ie extends re{}class se extends re{}var ae={emojiCategory:"EmojiCategory_emojiCategory__7G3mq",categoryName:"EmojiCategory_categoryName__zHcOq",noRecents:"EmojiCategory_noRecents__Pk1Ys",recentEmojis:"EmojiCategory_recentEmojis__CybhN"};x(".EmojiCategory_emojiCategory__7G3mq {\n  position: relative;\n}\n\n.EmojiCategory_categoryName__zHcOq {\n  font-size: 0.9em;\n  padding: 0.5rem;\n  margin: 0;\n  background: var(--category-name-background-color);\n  color: var(--category-name-text-color);\n  top: 0;\n  z-index: 1;\n  display: grid;\n  gap: 4px;\n  grid-template-columns: auto 1fr auto;\n  align-items: center;\n  line-height: 1;\n  box-sizing: border-box;\n  height: var(--category-name-height);\n  justify-content: flex-start;\n  text-transform: uppercase;\n}\n.EmojiCategory_categoryName__zHcOq button {\n  background: transparent;\n  border: none;\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  color: var(--category-name-button-color);\n}\n.EmojiCategory_categoryName__zHcOq button:hover {\n  opacity: 1;\n}\n\n.EmojiCategory_noRecents__Pk1Ys {\n  color: var(--secondary-text-color);\n  grid-column: 1/span var(--emojis-per-row);\n  font-size: 0.9em;\n  text-align: center;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-height: calc(var(--emoji-size) * var(--emoji-size-multiplier));\n}\n\n.EmojiCategory_recentEmojis__CybhN[data-empty=true] {\n  display: none;\n}\n\n.EmojiCategory_recentEmojis__CybhN[data-empty=false] + div {\n  display: none;\n}");class ce extends C{constructor({template:e,category:t,showVariants:n,lazyLoader:o}){super({template:e,classes:ae}),this.baseUIElements={categoryName:C.byClass(ae.categoryName)},this.category=t,this.showVariants=n,this.lazyLoader=o}setActive(e,t,n){this.emojiContainer.setActive(e,t,n)}}var le=new M((({classes:e,emoji:t})=>`\n  <button\n    type="button"\n    class="${e.emoji}"\n    title="${t.label}"\n    data-emoji="${t.emoji}"\n    tabindex="-1">\n    <div data-placeholder="emojiContent"></div>\n  </button>\n`)),he={emoji:"Emoji_emoji__iKc1G"};x(".Emoji_emoji__iKc1G {\n  background: transparent;\n  border: none;\n  border-radius: 15px;\n  cursor: pointer;\n  font-family: var(--emoji-font);\n  font-size: var(--emoji-size);\n  height: 100%;\n  justify-content: center;\n  margin: 0;\n  overflow: hidden;\n  padding: 0;\n  width: 100%;\n}\n.Emoji_emoji__iKc1G:hover {\n  background: var(--hover-background-color);\n}\n.Emoji_emoji__iKc1G:focus {\n  border-radius: 0;\n  background: var(--focus-indicator-background-color);\n  outline: 1px soldi var(--focus-indicator-color);\n}");class de extends C{constructor({emoji:e,lazyLoader:t,category:n}){super({template:le,classes:he}),this.emoji=e,this.lazyLoader=t,this.category=n}initialize(){this.uiEvents=[C.uiEvent("focus",this.handleFocus)],super.initialize()}handleFocus(){this.category&&this.events.emit("focus:change",this.category)}activateFocus(e){this.el.tabIndex=0,e&&this.el.focus()}deactivateFocus(){this.el.tabIndex=-1}renderSync(){return super.renderSync({emoji:this.emoji,emojiContent:this.renderer.doRender(this.emoji,this.lazyLoader)})}}class ue{constructor(e,t,n=0,o=0,r=!1){this.events=new re,this.keyHandlers={ArrowLeft:this.focusPrevious.bind(this),ArrowRight:this.focusNext.bind(this),ArrowUp:this.focusUp.bind(this),ArrowDown:this.focusDown.bind(this)},this.rowCount=Math.ceil(t/e),this.columnCount=e,this.focusedRow=n,this.focusedColumn=o,this.emojiCount=t,this.wrap=r,this.handleKeyDown=this.handleKeyDown.bind(this)}destroy(){this.events.removeAll()}on(e,t){this.events.on(e,t)}handleKeyDown(e){e.key in this.keyHandlers&&(e.preventDefault(),this.keyHandlers[e.key]())}setCell(e,t,n=!0){const o=this.getIndex();this.focusedRow=e,void 0!==t&&(this.focusedColumn=Math.min(this.columnCount,t)),(this.focusedRow>=this.rowCount||this.getIndex()>=this.emojiCount)&&(this.focusedRow=this.rowCount-1,this.focusedColumn=this.emojiCount%this.columnCount-1),this.events.emit("focus:change",{from:o,to:this.getIndex(),performFocus:n})}setFocusedIndex(e,t=!0){const n=Math.floor(e/this.columnCount),o=e%this.columnCount;this.setCell(n,o,t)}focusNext(){this.focusedColumn<this.columnCount-1&&this.getIndex()<this.emojiCount-1?this.setCell(this.focusedRow,this.focusedColumn+1):this.focusedRow<this.rowCount-1?this.setCell(this.focusedRow+1,0):this.wrap?this.setCell(0,0):this.events.emit("focus:overflow",0)}focusPrevious(){this.focusedColumn>0?this.setCell(this.focusedRow,this.focusedColumn-1):this.focusedRow>0?this.setCell(this.focusedRow-1,this.columnCount-1):this.wrap?this.setCell(this.rowCount-1,this.columnCount-1):this.events.emit("focus:underflow",this.columnCount-1)}focusUp(){this.focusedRow>0?this.setCell(this.focusedRow-1,this.focusedColumn):this.events.emit("focus:underflow",this.focusedColumn)}focusDown(){this.focusedRow<this.rowCount-1?this.setCell(this.focusedRow+1,this.focusedColumn):this.events.emit("focus:overflow",this.focusedColumn)}focusToIndex(e){this.setCell(Math.floor(e/this.columnCount),e%this.columnCount)}getIndex(){return this.focusedRow*this.columnCount+this.focusedColumn}getCell(){return{row:this.focusedRow,column:this.focusedColumn}}getRowCount(){return this.rowCount}}var pe=new M((({classes:e})=>`\n  <div class="${e.emojiContainer}">\n    <div data-placeholder="emojis"></div>\n  </div>\n`)),me={emojiContainer:"EmojiContainer_emojiContainer__4SPb5"};x(".EmojiContainer_emojiContainer__4SPb5 {\n  display: grid;\n  justify-content: space-between;\n  gap: 1px;\n  padding: 0 0.5em;\n  grid-template-columns: repeat(var(--emojis-per-row), calc(var(--emoji-size) * var(--emoji-size-multiplier)));\n  grid-auto-rows: calc(var(--emoji-size) * var(--emoji-size-multiplier));\n  align-items: center;\n  justify-items: center;\n}");class fe extends C{constructor({emojis:e,showVariants:t,preview:n=!0,lazyLoader:o,category:r,fullHeight:i=!1}){super({template:pe,classes:me}),this.fullHeight=!1,this.showVariants=t,this.lazyLoader=o,this.preview=n,this.emojis=e,this.category=r,this.fullHeight=i,this.setFocus=this.setFocus.bind(this),this.triggerNextCategory=this.triggerNextCategory.bind(this),this.triggerPreviousCategory=this.triggerPreviousCategory.bind(this)}initialize(){this.grid=new ue(this.options.emojisPerRow,this.emojiCount,0,0,!this.category),this.grid.on("focus:change",this.setFocus),this.grid.on("focus:overflow",this.triggerNextCategory),this.grid.on("focus:underflow",this.triggerPreviousCategory),this.uiEvents=[C.uiEvent("click",this.selectEmoji),C.uiEvent("keydown",this.grid.handleKeyDown)],this.preview&&this.uiEvents.push(C.uiEvent("mouseover",this.showPreview),C.uiEvent("mouseout",this.hidePreview),C.uiEvent("focus",this.showPreview,{capture:!0}),C.uiEvent("blur",this.hidePreview,{capture:!0})),super.initialize()}setFocusedView(e,t){if(e)if("string"==typeof e){const t=this.emojis.findIndex((t=>t.emoji===e));this.grid.setFocusedIndex(t,!1),setTimeout((()=>{var e,n,o,r;const i=this.emojiViews[t].el;i.scrollIntoView();const s=null===(e=i.parentElement)||void 0===e?void 0:e.previousElementSibling;(null===(o=null===(n=i.parentElement)||void 0===n?void 0:n.parentElement)||void 0===o?void 0:o.parentElement).scrollTop-=null!==(r=null==s?void 0:s.offsetHeight)&&void 0!==r?r:0}))}else"first"===e.row||0===e.row?this.grid.setCell(0,e.offset,t):"last"===e.row&&this.grid.setCell(this.grid.getRowCount()-1,e.offset,t)}setActive(e,t,n){var o;e?this.setFocusedView(t,n):null===(o=this.emojiViews[this.grid.getIndex()])||void 0===o||o.deactivateFocus()}renderSync(){return this.emojiViews=this.emojis.map((e=>this.viewFactory.create(de,{emoji:e,category:this.category,lazyLoader:this.lazyLoader,renderer:this.renderer}))),this.emojiElements=this.emojiViews.map((e=>e.renderSync())),super.renderSync({emojis:this.emojiElements,i18n:this.i18n})}destroy(){super.destroy(),this.emojiViews.forEach((e=>e.destroy())),this.grid.destroy()}triggerPreviousCategory(e){this.events.emit("category:previous",e)}triggerNextCategory(e){this.category&&this.events.emit("category:next",e)}setFocus({from:e,to:t,performFocus:n}){var o,r;null===(o=this.emojiViews[e])||void 0===o||o.deactivateFocus(),null===(r=this.emojiViews[t])||void 0===r||r.activateFocus(n)}selectEmoji(e){const t=p(e,this.emojis);t&&this.events.emit("emoji:select",{emoji:t,showVariants:this.showVariants})}showPreview(e){const t=e.target.closest("button"),n=null==t?void 0:t.firstElementChild,o=p(e,this.emojis);o&&this.events.emit("preview:show",o,null==n?void 0:n.cloneNode(!0))}hidePreview(e){p(e,this.emojis)&&this.events.emit("preview:hide")}get emojiCount(){return this.emojis.length}}var ge=new M((({classes:e,category:t,pickerId:n,icon:o,i18n:r})=>`\n  <section class="${e.emojiCategory}" role="tabpanel" aria-labelledby="${n}-category-${t.key}">\n    <h3 data-category="${t.key}" class="${e.categoryName}">\n      <i data-icon="${o}"></i>\n      ${r.get(`categories.${t.key}`,t.message||t.key)}\n    </h3>\n    <div data-view="emojis" data-render="sync"></div>\n  </section>\n`));class ve extends ce{constructor({category:e,showVariants:t,lazyLoader:n,emojiVersion:o}){super({category:e,showVariants:t,lazyLoader:n,template:ge}),this.showVariants=t,this.lazyLoader=n,this.emojiVersion=o}initialize(){this.uiElements=Object.assign({},this.baseUIElements),super.initialize()}render(){const e=Object.create(null,{render:{get:()=>super.render}});return r(this,void 0,void 0,(function*(){yield this.emojiDataPromise;const t=yield this.emojiData.getEmojis(this.category,this.emojiVersion);return this.emojiContainer=this.viewFactory.create(fe,{emojis:t,showVariants:this.showVariants,lazyLoader:this.lazyLoader,category:this.category.key}),e.render.call(this,{category:this.category,emojis:this.emojiContainer,emojiCount:t.length,icon:S[this.category.key]})}))}}class ye extends fe{constructor({category:e,emojis:t,preview:n=!0,lazyLoader:o}){super({category:e,emojis:t,showVariants:!1,preview:n,lazyLoader:o})}addOrUpdate(e){return r(this,void 0,void 0,(function*(){const t=this.el.querySelector(`[data-emoji="${e.emoji}"]`);t&&(this.el.removeChild(t),this.emojis=this.emojis.filter((t=>t!==e)));const n=this.viewFactory.create(de,{emoji:e});if(this.el.insertBefore(n.renderSync(),this.el.firstChild),this.emojis=[e,...this.emojis.filter((t=>t!==e))],this.emojis.length>this.options.maxRecents){this.emojis=this.emojis.slice(0,this.options.maxRecents);const e=this.el.childElementCount-this.options.maxRecents;for(let t=0;t<e;t++)this.el.lastElementChild&&this.el.removeChild(this.el.lastElementChild)}}))}}var be=new M((({emojiCount:e,classes:t,category:n,pickerId:o,icon:r,i18n:i})=>`\n  <section class="${t.emojiCategory}" role="tabpanel" aria-labelledby="${o}-category-${n.key}">\n  <h3 data-category="${n.key}" class="${t.categoryName}">\n    <i data-icon="${r}"></i>\n    ${i.get(`categories.${n.key}`,n.message||n.key)}\n  </h3>\n  <div data-empty="${0===e}" class="${t.recentEmojis}">\n    <div data-view="emojis" data-render="sync"></div>\n  </div>\n  <div class="${t.noRecents}">\n    ${i.get("recents.none")}\n  </div>\n</section>\n`),{mode:"async"}),we=new M((({classes:e,category:t,pickerId:n,icon:o,i18n:r})=>`\n  <section class="${e.emojiCategory}" role="tabpanel" aria-labelledby="${n}-category-${t.key}">\n    <h3 data-category="${t.key}" class="${e.categoryName}">\n      <i data-icon="${o}"></i>\n      ${r.get(`categories.${t.key}`,t.message||t.key)}\n    </h3>\n    <div data-view="emojis" data-render="sync"></div>\n  </section>\n`));class _e{constructor(){this.elements=new Map}lazyLoad(e,t){return this.elements.set(e,t),e}observe(e){if(window.IntersectionObserver){const t=new IntersectionObserver((e=>{e.filter((e=>e.intersectionRatio>0)).map((e=>e.target)).forEach((e=>{const n=this.elements.get(e);null==n||n(),t.unobserve(e)}))}),{root:e});this.elements.forEach(((e,n)=>{t.observe(n)}))}else this.elements.forEach((e=>{e()}))}}var je={emojis:"EmojiArea_emojis__L4mMq"};x(".EmojiArea_emojis__L4mMq {\n  height: var(--emoji-area-height);\n  overflow-y: auto;\n  position: relative;\n  scrollbar-color: var(--scrollbar-color) var(--scrollbar-background-color);\n  scrollbar-width: 8px;\n}\n.EmojiArea_emojis__L4mMq::-webkit-scrollbar {\n  background: var(--scrollbar-background-color);\n  width: 1.1em;\n}\n.EmojiArea_emojis__L4mMq::-webkit-scrollbar-thumb {\n  background: var(--scrollbar-color);\n  border-left: 4px solid transparent;\n  border-right: 4px solid transparent;\n  background-clip: padding-box;\n  height: 1em;\n  border-radius: 1em;\n}");const Ce=new M((({classes:e})=>`\n  <div class="${e.emojis}">\n    <div data-placeholder="emojis"></div>\n  </div>\n`),{mode:"async"}),xe={recents:class extends ce{constructor({category:e,lazyLoader:t,provider:n}){super({category:e,showVariants:!1,lazyLoader:t,template:be}),this.provider=n}initialize(){this.uiElements=Object.assign(Object.assign({},this.baseUIElements),{recents:C.byClass(ae.recentEmojis)}),this.appEvents={"recent:add":this.addRecent},super.initialize()}addRecent(e){return r(this,void 0,void 0,(function*(){yield this.emojiContainer.addOrUpdate(e),this.ui.recents.dataset.empty="false"}))}render(){const e=Object.create(null,{render:{get:()=>super.render}});var t;return r(this,void 0,void 0,(function*(){const n=null===(t=this.provider)||void 0===t?void 0:t.getRecents(this.options.maxRecents);return this.emojiContainer=this.viewFactory.create(ye,{emojis:n,showVariants:!1,lazyLoader:this.lazyLoader,category:this.category.key}),yield e.render.call(this,{category:this.category,emojis:this.emojiContainer,emojiCount:n.length,icon:S[this.category.key]}),this.el}))}},custom:class extends ce{constructor({category:e,lazyLoader:t}){super({template:we,showVariants:!1,lazyLoader:t,category:e})}initialize(){this.uiElements=Object.assign({},this.baseUIElements),super.initialize()}render(){const e=Object.create(null,{render:{get:()=>super.render}});return r(this,void 0,void 0,(function*(){return this.emojiContainer=this.viewFactory.create(fe,{emojis:this.customEmojis,showVariants:this.showVariants,lazyLoader:this.lazyLoader,category:this.category.key}),e.render.call(this,{category:this.category,emojis:this.emojiContainer,emojiCount:this.customEmojis.length,icon:S[this.category.key]})}))}}};class ke extends C{constructor({categoryTabs:e,categories:t,emojiVersion:n}){super({template:Ce,classes:je}),this.selectedCategory=0,this.scrollListenerState="active",this.lazyLoader=new _e,this.categoryTabs=e,this.categories=t,this.emojiVersion=n,this.handleScroll=function(e,t){let n=null;return()=>{n||(n=window.setTimeout((()=>{e(),n=null}),t))}}(this.handleScroll.bind(this),100)}initialize(){this.appEvents={"category:select":this.handleCategorySelect,"category:previous":this.focusPreviousCategory,"category:next":this.focusNextCategory,"focus:change":this.updateFocusedCategory},this.uiElements={emojis:C.byClass(je.emojis)},this.uiEvents=[C.uiEvent("scroll",this.handleScroll)],super.initialize()}get focusableEmoji(){return this.el.querySelector('[tabindex="0"]')}render(){const e=Object.create(null,{render:{get:()=>super.render}});return r(this,void 0,void 0,(function*(){this.emojiCategories=this.categories.map(this.createCategory,this);const t={};return this.categories.forEach(((e,n)=>{t[`emojis-${e.key}`]=this.emojiCategories[n]})),yield e.render.call(this,{emojis:yield Promise.all(this.emojiCategories.map((e=>e.render())))}),this.lazyLoader.observe(this.el),window.ResizeObserver&&(this.observer=new ResizeObserver((()=>{const e=this.el.scrollHeight-this.scrollHeight;0==this.el.scrollTop-this.scrollTop&&e>0&&(this.el.scrollTop+=e),this.scrollHeight=this.el.scrollHeight,this.scrollTop=this.el.scrollTop})),this.emojiCategories.forEach((e=>{this.observer.observe(e.el)}))),this.el}))}destroy(){super.destroy(),this.emojiCategories.forEach((e=>{var t;null===(t=this.observer)||void 0===t||t.unobserve(e.el),e.destroy()}))}handleCategorySelect(e,t){this.selectCategory(e,t)}createCategory(e){const t=xe[e.key]||ve;return this.viewFactory.create(t,{category:e,showVariants:!0,lazyLoader:this.lazyLoader,emojiVersion:this.emojiVersion,provider:this.options.recentsProvider})}determineInitialCategory(){var e;return this.options.initialCategory&&this.categories.find((e=>e.key===this.options.initialCategory))?this.options.initialCategory:null===(e=this.categories.find((e=>"recents"!==e.key)))||void 0===e?void 0:e.key}determineFocusTarget(e){const t=this.emojiCategories.find((t=>t.category.key===e));return this.options.initialEmoji&&(null==t?void 0:t.el.querySelector(`[data-emoji="${this.options.initialEmoji}"]`))?this.options.initialEmoji:"button"}reset(){this.events.emit("preview:hide");const e=this.determineInitialCategory();e&&(this.selectCategory(e,{focus:this.determineFocusTarget(e),performFocus:!0,scroll:"jump"}),this.selectedCategory=this.getCategoryIndex(e))}getCategoryIndex(e){return this.categories.findIndex((t=>t.key===e))}focusPreviousCategory(e){this.selectedCategory>0&&this.focusCategory(this.selectedCategory-1,{row:"last",offset:null!=e?e:this.options.emojisPerRow})}focusNextCategory(e){this.selectedCategory<this.categories.length-1&&this.focusCategory(this.selectedCategory+1,{row:"first",offset:null!=e?e:0})}focusCategory(e,t){this.selectCategory(e,{focus:t,performFocus:!0})}selectCategory(e,t={}){var n;return r(this,void 0,void 0,(function*(){this.scrollListenerState="suspend";const{focus:o,performFocus:r,scroll:i}=Object.assign({performFocus:!1},t);this.emojiCategories[this.selectedCategory].setActive(!1);const s=this.selectedCategory="number"==typeof e?e:this.getCategoryIndex(e);null===(n=this.categoryTabs)||void 0===n||n.setActiveTab(this.selectedCategory,r,"button"===o);const a=this.emojiCategories[s].el.offsetTop;var c;this.emojiCategories[s].setActive(!0,(c=o)&&"button"!==c?c:{row:"first",offset:0},"button"!==o&&r),i&&(this.el.scrollTop=a),this.scrollListenerState="resume"}))}updateFocusedCategory(e){var t;this.categories[this.selectedCategory].key!==e&&(this.scrollListenerState="suspend",this.selectedCategory=this.getCategoryIndex(e),null===(t=this.categoryTabs)||void 0===t||t.setActiveTab(this.selectedCategory,!1),this.scrollListenerState="resume")}handleScroll(){if("suspend"===this.scrollListenerState||!this.categoryTabs)return;if("resume"===this.scrollListenerState)return void(this.scrollListenerState="active");const e=this.el.scrollTop,t=this.el.scrollHeight-this.el.offsetHeight,n=this.emojiCategories.findIndex(((t,n)=>{var o;return e<(null===(o=this.emojiCategories[n+1])||void 0===o?void 0:o.el.offsetTop)}));0===e?this.categoryTabs.setActiveTab(0,!1):Math.floor(e)===Math.floor(t)||n<0?this.categoryTabs.setActiveTab(this.categories.length-1,!1):this.categoryTabs.setActiveTab(n,!1)}}var Ee=new M((({classList:e,classes:t,icon:n,message:o})=>`\n<div class="${e}" role="alert">\n  <div class="${t.icon}"><i data-size="10x" data-icon="${n}"></i></div>\n  <h3 class="${t.title}">${o}</h3>\n</div>\n`)),Se={error:"ErrorMessage_error__7I7y1",icon:"ErrorMessage_icon__4---V","appear-grow":"ErrorMessage_appear-grow__oBenJ",title:"ErrorMessage_title__shDDT",appear:"ErrorMessage_appear__kry-R"};x("@keyframes ErrorMessage_appear__kry-R {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 0.8;\n  }\n}\n@keyframes ErrorMessage_appear-grow__oBenJ {\n  0% {\n    opacity: 0;\n    transform: scale(0.8);\n  }\n  100% {\n    opacity: 0.8;\n    transform: scale(1);\n  }\n}\n.ErrorMessage_error__7I7y1 {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  color: var(--secondary-text-color);\n}\n.ErrorMessage_error__7I7y1 .ErrorMessage_icon__4---V {\n  opacity: 0.8;\n  animation: ErrorMessage_appear-grow__oBenJ 250ms cubic-bezier(0.175, 0.885, 0.32, 1.275);\n  --color-primary: var(--error-color);\n  --color-secondary: var(--error-color-dark);\n}\n.ErrorMessage_error__7I7y1 .ErrorMessage_title__shDDT {\n  animation: ErrorMessage_appear__kry-R 250ms;\n  animation-delay: 50ms;\n  animation-fill-mode: both;\n}\n.ErrorMessage_error__7I7y1 button {\n  padding: 8px 16px;\n  cursor: pointer;\n  background: var(--background-color);\n  border: 1px solid var(--text-color);\n  border-radius: 5px;\n  color: var(--text-color);\n}\n.ErrorMessage_error__7I7y1 button:hover {\n  background: var(--text-color);\n  color: var(--background-color);\n}");class Pe extends C{constructor({message:e,icon:t="warning",template:n=Ee,className:o}){super({template:n,classes:Se}),this.message=e,this.icon=t,this.className=o}renderSync(){const e=[Se.error,this.className].join(" ").trim();return super.renderSync({message:this.message,icon:this.icon,classList:e})}}x(".DataError_dataError__jyJ0H [data-icon] {\n  opacity: 0.8;\n}");var Oe=new M((({classList:e,classes:t,icon:n,i18n:o,message:r})=>`\n  <div class="${e}">\n    <div class="${t.icon}"><i data-size="10x" data-icon="${n}"></i></div>\n    <h3 class="${t.title}">${r}</h3>\n    <button type="button">${o.get("retry")}</button>\n  </div>\n`));class Ae extends Pe{constructor({message:e}){super({message:e,template:Oe,className:"DataError_dataError__jyJ0H"})}initialize(){this.uiElements={retryButton:"button"},this.uiEvents=[C.childEvent("retryButton","click",this.onRetry)],super.initialize()}onRetry(){return r(this,void 0,void 0,(function*(){this.emojiData?yield this.emojiData.delete():yield this.options.dataStore.deleteDatabase(this.options.locale),this.events.emit("reinitialize");const e=yield _(this.options.locale,this.options.dataStore,this.options.messages,this.options.emojiData,this.emojiData);this.viewFactory.setEmojiData(e),this.events.emit("data:ready",e)}))}}var Le={preview:"Preview_preview__HcFH6",previewEmoji:"Preview_previewEmoji__vjUki",previewName:"Preview_previewName__C79nL",tagList:"Preview_tagList__DielP",tag:"Preview_tag__aUSTM"};x('.Preview_preview__HcFH6 {\n  border-top: 1px solid var(--border-color);\n  display: grid;\n  align-items: center;\n  gap: 6px;\n  grid-template-columns: auto 1fr;\n  grid-template-rows: auto 1fr;\n  grid-template-areas: "emoji name" "emoji tags";\n  height: var(--emoji-preview-height);\n  box-sizing: border-box;\n  padding: 0.5em;\n  position: relative;\n  background: var(--preview-background-color);\n}\n\n.Preview_previewEmoji__vjUki {\n  grid-area: emoji;\n  font-size: var(--emoji-preview-size);\n  font-family: var(--emoji-font);\n  width: 1.25em;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.Preview_previewName__C79nL {\n  grid-area: name;\n  color: var(--text-color);\n  font-size: 0.8em;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  font-weight: 500;\n}\n\n.Preview_tagList__DielP {\n  grid-area: tags;\n  list-style-type: none;\n  display: flex;\n  flex-direction: row;\n  padding: 0;\n  margin: 0;\n  font-size: 0.75em;\n  overflow: hidden;\n}\n\n.Preview_tag__aUSTM {\n  border-radius: 3px;\n  background: var(--tag-background-color);\n  color: var(--text-color);\n  padding: 2px 8px;\n  margin-right: 0.25em;\n  white-space: nowrap;\n}\n.Preview_tag__aUSTM:last-child {\n  margin-right: 0;\n}');const Te=new M((({classes:e,tag:t})=>`\n  <li class="${e.tag}">${t}</li>\n`)),Fe=new M((({classes:e})=>`\n  <div class="${e.preview}">\n    <div class="${e.previewEmoji}"></div>\n    <div class="${e.previewName}"></div>\n    <ul class="${e.tagList}"></ul>\n  </div>\n`));class ze extends C{constructor(){super({template:Fe,classes:Le})}initialize(){this.uiElements={emoji:C.byClass(Le.previewEmoji),name:C.byClass(Le.previewName),tagList:C.byClass(Le.tagList)},this.appEvents={"preview:show":this.showPreview,"preview:hide":this.hidePreview},super.initialize()}showPreview(e,t){if(this.ui.emoji.replaceChildren(t),this.ui.name.textContent=e.label,e.tags){this.ui.tagList.style.display="flex";const t=e.tags.map((e=>Te.renderSync({tag:e,classes:Le})));this.ui.tagList.replaceChildren(...t)}}hidePreview(){this.ui.emoji.replaceChildren(),this.ui.name.textContent="",this.ui.tagList.replaceChildren()}}var Me={searchContainer:"Search_searchContainer__aJW7V",searchField:"Search_searchField__tENKn",clearButton:"Search_clearButton__oFTEY",searchAccessory:"Search_searchAccessory__0rdYO",clearSearchButton:"Search_clearSearchButton__AoDtB",notFound:"Search_notFound__rOdr1"};x(".Search_searchContainer__aJW7V {\n  display: flex;\n  height: var(--search-height);\n  box-sizing: border-box;\n  padding: 0 8px;\n  position: relative;\n}\n\n.Search_searchField__tENKn {\n  background: var(--search-background-color);\n  border-radius: 3px;\n  border: none;\n  box-sizing: border-box;\n  color: var(--text-color);\n  font-size: 0.9em;\n  outline: none;\n  padding-right: 2em;\n  padding: 0.5em 2.25em 0.5em 0.5em;\n  width: 100%;\n}\n.Search_searchField__tENKn:focus {\n  background: var(--search-focus-background-color);\n}\n.Search_searchField__tENKn::placeholder {\n  color: var(--search-placeholder-color);\n}\n\n.Search_clearButton__oFTEY {\n  border: 0;\n  color: var(--search-icon-color);\n  background: transparent;\n  cursor: pointer;\n}\n\n.Search_searchAccessory__0rdYO {\n  color: var(--search-icon-color);\n  height: 100%;\n  position: absolute;\n  right: 1em;\n  top: 0;\n  width: 1.25rem;\n  display: flex;\n  align-items: center;\n}\n.Search_searchAccessory__0rdYO svg {\n  fill: var(--search-icon-color);\n}\n\n.Search_clearSearchButton__AoDtB {\n  cursor: pointer;\n  border: none;\n  background: transparent;\n  color: var(--search-icon-color);\n  font-size: 1em;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  padding: 0;\n}\n\n.Search_notFound__rOdr1 [data-icon] {\n  fill: #f3e265;\n}");const Ie=new M((({classes:e,i18n:t})=>`\n  <button title="${t.get("search.clear")}" class="${e.clearSearchButton}">\n    <i data-icon="xmark"></i>\n  </button>\n`)),De=new M((({classes:e,i18n:t})=>`\n<div class="${e.searchContainer}">\n  <input class="${e.searchField}" placeholder="${t.get("search")}">\n  <span class="${e.searchAccessory}"></span>\n</div>\n`),{mode:"async"});class Re extends C{constructor({categories:e,emojiVersion:t}){super({template:De,classes:Me}),this.categories=e.filter((e=>"recents"!==e.key)),this.emojiVersion=t,this.search=function(e,t){let n=null;return(...o)=>{n&&window.clearTimeout(n),n=window.setTimeout((()=>{e(...o),n=null}),t)}}(this.search.bind(this),100)}initialize(){this.uiElements={searchField:C.byClass(Me.searchField),searchAccessory:C.byClass(Me.searchAccessory)},this.uiEvents=[C.childEvent("searchField","keydown",this.onKeyDown),C.childEvent("searchField","input",this.onSearchInput)],super.initialize()}render(){const e=Object.create(null,{render:{get:()=>super.render}});return r(this,void 0,void 0,(function*(){return yield e.render.call(this),this.searchIcon=P("search"),this.notFoundMessage=this.viewFactory.create(Pe,{message:this.i18n.get("search.notFound"),className:Me.notFound,icon:"sad"}),this.notFoundMessage.renderSync(),this.errorMessage=this.viewFactory.create(Pe,{message:this.i18n.get("search.error")}),this.errorMessage.renderSync(),this.clearSearchButton=Ie.render({classes:Me,i18n:this.i18n}),this.clearSearchButton.addEventListener("click",(e=>this.onClearSearch(e))),this.searchField=this.ui.searchField,this.showSearchIcon(),this.el}))}showSearchIcon(){this.showSearchAccessory(this.searchIcon)}showClearSearchButton(){this.showSearchAccessory(this.clearSearchButton)}showSearchAccessory(e){this.ui.searchAccessory.replaceChildren(e)}clear(){this.searchField.value="",this.showSearchIcon()}focus(){this.searchField.focus()}onClearSearch(e){var t;e.stopPropagation(),this.searchField.value="",null===(t=this.resultsContainer)||void 0===t||t.destroy(),this.resultsContainer=null,this.showSearchIcon(),this.events.emit("content:show"),this.searchField.focus()}handleResultsKeydown(e){this.resultsContainer&&"Escape"===e.key&&this.onClearSearch(e)}onKeyDown(e){var t;"Escape"===e.key&&this.searchField.value?this.onClearSearch(e):"Enter"!==e.key&&"ArrowDown"!==e.key||!this.resultsContainer||(e.preventDefault(),null===(t=this.resultsContainer.el.querySelector('[tabindex="0"]'))||void 0===t||t.focus())}onSearchInput(e){this.searchField.value?(this.showClearSearchButton(),this.search()):this.onClearSearch(e)}search(){var e;return r(this,void 0,void 0,(function*(){if(this.searchField.value)try{const t=yield this.emojiData.searchEmojis(this.searchField.value,this.customEmojis,this.emojiVersion,this.categories);if(this.events.emit("preview:hide"),t.length){const n=new _e;this.resultsContainer=this.viewFactory.create(fe,{emojis:t,fullHeight:!0,showVariants:!0,lazyLoader:n}),this.resultsContainer.renderSync(),(null===(e=this.resultsContainer)||void 0===e?void 0:e.el)&&(n.observe(this.resultsContainer.el),this.resultsContainer.setActive(!0,{row:0,offset:0},!1),this.resultsContainer.el.addEventListener("keydown",(e=>this.handleResultsKeydown(e))),this.events.emit("content:show",this.resultsContainer))}else this.events.emit("content:show",this.notFoundMessage)}catch(e){this.events.emit("content:show",this.errorMessage)}}))}}var $e=new M((({classes:e})=>`\n  <div class="${e.variantOverlay}">\n    <div class="${e.variantPopup}">\n      <div data-view="emojis" data-render="sync"></div>\n    </div>\n  </div>\n`)),Ne={variantOverlay:"VariantPopup_variantOverlay__gGwue",variantPopup:"VariantPopup_variantPopup__c2pHF"};x(".VariantPopup_variantOverlay__gGwue {\n  background: var(--overlay-background-color);\n  border-radius: 5px;\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  justify-content: center;\n  left: 0;\n  position: absolute;\n  top: 0;\n  width: 100%;\n  z-index: 1;\n}\n\n.VariantPopup_variantPopup__c2pHF {\n  background: var(--variant-popup-background-color);\n  border-radius: 5px;\n  margin: 0.5em;\n  padding: 0.5em;\n  text-align: center;\n  user-select: none;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}");const Be={easing:"ease-in-out",duration:250,fill:"both"},He={opacity:[0,1]},Ue={opacity:[0,1],transform:["scale3d(0.8, 0.8, 0.8)","scale3d(1, 1, 1)"]};class Ve extends C{constructor({emoji:e,parent:t}){super({template:$e,classes:Ne,parent:t}),this.focusedEmojiIndex=0,this.focusTrap=new j,this.animateShow=()=>Promise.all([g(this.el,He,Be,this.options),g(this.ui.popup,Ue,Be,this.options)]),this.emoji=e}initialize(){this.uiElements={popup:C.byClass(Ne.variantPopup)},this.uiEvents=[C.uiEvent("click",this.handleClick),C.uiEvent("keydown",this.handleKeydown)],super.initialize()}animateHide(){const e=Object.assign(Object.assign({},Be),{direction:"reverse"});return Promise.all([g(this.el,He,e,this.options),g(this.ui.popup,Ue,e,this.options)])}hide(){return r(this,void 0,void 0,(function*(){yield this.animateHide(),this.events.emit("variantPopup:hide")}))}handleKeydown(e){"Escape"===e.key&&(this.hide(),e.stopPropagation())}handleClick(e){this.ui.popup.contains(e.target)||this.hide()}getEmoji(e){return this.renderedEmojis[e]}setFocusedEmoji(e){this.getEmoji(this.focusedEmojiIndex).tabIndex=-1,this.focusedEmojiIndex=e;const t=this.getEmoji(this.focusedEmojiIndex);t.tabIndex=0,t.focus()}destroy(){this.emojiContainer.destroy(),this.focusTrap.deactivate(),super.destroy()}renderSync(){const e=[Object.assign(Object.assign({},this.emoji),{skins:null}),...(this.emoji.skins||[]).map((e=>Object.assign(Object.assign({},e),{label:this.emoji.label,tags:this.emoji.tags})))];return this.emojiContainer=this.viewFactory.create(fe,{emojis:e,preview:!1}),super.renderSync({emojis:this.emojiContainer}),e.length<this.options.emojisPerRow&&this.el.style.setProperty("--emojis-per-row",e.length.toString()),this.el}activate(){this.emojiContainer.setActive(!0,{row:0,offset:0},!0),this.focusTrap.activate(this.el)}}var qe=new M((({classes:e,i18n:t,category:n,pickerId:o,icon:r})=>`\n<li class="${e.categoryTab}">\n  <button\n    aria-selected="false"\n    role="tab"\n    class="${e.categoryButton}"\n    tabindex="-1"\n    title="${t.get(`categories.${n.key}`,n.message||n.key)}"\n    type="button"\n    data-category="${n.key}"\n    id="${o}-category-${n.key}"\n  >\n    <i data-icon="${r}"></i>\n</li>\n`)),We={categoryButtons:"CategoryTabs_categoryButtons__dJVp-",categoryButton:"CategoryTabs_categoryButton__AsR9b",categoryTab:"CategoryTabs_categoryTab__fAgQT",categoryTabActive:"CategoryTabs_categoryTabActive__691be"};x(".CategoryTabs_categoryButtons__dJVp- {\n  --tab-size-ratio: 1.55;\n  --tab-padding: 0.5em;\n  --tab-area-width: calc(var(--picker-width) - (var(--tab-padding) * 2));\n  --tab-size: calc((var(--tab-area-width) / var(--category-count))) / var(--tab-size-ratio);\n  display: grid;\n  grid-auto-columns: 1fr;\n  grid-auto-flow: column;\n  gap: var(--tab-gap);\n  justify-content: center;\n  margin: 0;\n  padding: 0 var(--tab-padding);\n  align-items: center;\n  height: var(--category-tabs-height);\n  box-sizing: border-box;\n  position: relative;\n  list-style-type: none;\n}\n\n.CategoryTabs_categoryButton__AsR9b {\n  border-radius: 5px;\n  background: transparent;\n  border: 2px solid transparent;\n  color: var(--category-tab-color);\n  cursor: pointer;\n  padding: 2px;\n  vertical-align: middle;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1.2rem;\n  font-size: min(var(--tab-size), 1.2rem);\n  width: 1.6em;\n  height: 1.6em;\n  transition: all 100ms;\n}\n.CategoryTabs_categoryButton__AsR9b img {\n  width: var(--category-tab-size);\n  height: var(--category-tab-size);\n}\n.CategoryTabs_categoryButton__AsR9b:hover {\n  background: var(--category-tab-highlight-background-color);\n}\n\n.CategoryTabs_categoryTab__fAgQT {\n  display: flex;\n  align-items: center;\n  justify-content: stretch;\n  transition: all 100ms;\n}\n\n.CategoryTabs_categoryTabActive__691be .CategoryTabs_categoryButton__AsR9b {\n  color: var(--category-tab-active-color);\n  background: linear-gradient(rgba(255, 255, 255, 0.75) 0%, rgba(255, 255, 255, 0.75) 100%), linear-gradient(var(--category-tab-active-color) 0%, var(--category-tab-active-color) 100%);\n  border: 2px solid var(--category-tab-active-color);\n}\n.CategoryTabs_categoryTabActive__691be .CategoryTabs_categoryButton__AsR9b:hover {\n  background-color: var(--category-tab-active-background-color);\n}");class Ke extends C{constructor({category:e,icon:t}){super({template:qe,classes:We}),this.isActive=!1,this.category=e,this.icon=t}initialize(){this.uiElements={button:C.byClass(We.categoryButton)},this.uiEvents=[C.childEvent("button","click",this.selectCategory)],super.initialize()}renderSync(){return super.renderSync({category:this.category,icon:this.icon}),this.ui.button.ariaSelected="false",this.el}setActive(e,t=!0,n=!1){this.el.classList.toggle(We.categoryTabActive,e),t&&this.setFocused(e,n),this.isActive=e}setFocused(e,t=!1){this.ui.button.ariaSelected=e.toString(),e?(this.ui.button.tabIndex=0,this.ui.button.focus(),t&&this.events.emit("category:select",this.category.key,{scroll:"animate",focus:"button",performFocus:!1})):this.ui.button.tabIndex=-1}selectCategory(){this.isActive||this.events.emit("category:select",this.category.key,{scroll:"animate",focus:"button",performFocus:!0})}}var Ge=new M((({classes:e})=>`\n  <ul role="tablist" class="${e.categoryButtons}">\n    <div data-placeholder="tabs"></div>\n  </ul>\n`));class Je extends C{constructor({categories:e}){super({template:Ge,classes:We}),this.activeCategoryIndex=0,this.categories=e}initialize(){this.keyBindings={ArrowLeft:this.stepSelectedTab(-1),ArrowRight:this.stepSelectedTab(1)},super.initialize()}renderSync(){return this.tabViews=this.categories.map((e=>this.viewFactory.create(Ke,{category:e,icon:S[e.key]}))),super.renderSync({tabs:this.tabViews.map((e=>e.renderSync()))}),this.currentTabView.setActive(!0),this.el}get currentCategory(){return this.categories[this.activeCategoryIndex]}get currentTabView(){return this.tabViews[this.activeCategoryIndex]}setActiveTab(e,t=!0,n=!0){if(e===this.activeCategoryIndex)return;const o=this.currentTabView,r=this.tabViews[e];o.setActive(!1,t),r.setActive(!0,t,n),this.activeCategoryIndex=e}getTargetCategory(e){return e<0?this.categories.length-1:e>=this.categories.length?0:e}stepSelectedTab(e){return()=>{const t=this.activeCategoryIndex+e;this.setActiveTab(this.getTargetCategory(t))}}}const Ye=[{version:15,emoji:String.fromCodePoint(129768)},{version:14,emoji:String.fromCodePoint(128733)},{version:13,emoji:String.fromCodePoint(129729)},{version:12,emoji:String.fromCodePoint(129449)},{version:11,emoji:String.fromCodePoint(129463)},{version:5,emoji:String.fromCodePoint(129322)},{version:4,emoji:String.fromCodePoint(9877)},{version:3,emoji:String.fromCodePoint(129314)},{version:2,emoji:String.fromCodePoint(128488)},{version:1,emoji:String.fromCodePoint(128512)}];function Qe(e,t){return Array.from({length:e},(()=>t)).join("")}var Ze=new M((e=>e.isLoaded?function(e){const{classes:t,theme:n,className:o=""}=e;return`\n    <div class="${t.picker} ${n} ${o}">\n      ${function({showHeader:e,classes:t}){return e?`\n    <header class="${t.header}">\n      <div data-view="search"></div>\n      <div data-view="categoryTabs" data-render="sync"></div>\n    </header>\n  `:""}(e)}\n      <div class="${t.content}">\n        <div data-view="emojiArea"></div>\n      </div>\n      <div data-view="preview"></div>\n    </div>\n  `}(e):function(e){const{emojiCount:t,classes:n,theme:o,className:r}=e;return`\n    <div class="${n.skeleton} ${n.picker} ${o} ${r}">\n      ${(({showHeader:t,classes:n})=>t?`\n    <header class="${n.header}">\n      ${(({showSearch:e,classes:t})=>e?`\n    <div class="${t.searchSkeleton}">\n      <div class="${t.searchInput} ${t.placeholder}"></div>\n    </div>\n  `:"")(e)}\n      ${(({showCategoryTabs:e,classes:t})=>e?`\n    <div class="${t.categoryTabsSkeleton}">\n      ${Qe(10,`<div class="${t.placeholder} ${t.categoryTab}"></div>`)}\n    </div>\n  `:"")(e)}\n    </header>\n  `:"")(e)}\n      <div class="${n.contentSkeleton}">\n        <div class="${n.placeholder} ${n.categoryName}"></div>\n        <div class="${n.emojiGrid}">\n          ${Qe(t,`<div class="${n.placeholder} ${n.emoji}"></div>`)}\n        </div>\n      </div>\n      ${(({showPreview:e,classes:t})=>e?`\n    <div class="${t.previewSkeleton}">\n      <div class="${t.placeholder} ${t.previewEmoji}"></div>\n      <div class="${t.placeholder} ${t.previewName}"></div>\n      <ul class="${t.tagList}">\n        ${Qe(3,`<li class="${t.placeholder} ${t.tag}"></li>`)}\n      </ul>\n    </div>\n  `:"")(e)}\n    </div>\n  `}(e))),Xe={picker:"EmojiPicker_picker__19Vln",skeleton:"EmojiPicker_skeleton__M1a2g",placeholder:"EmojiPicker_placeholder__YDJn-",shine:"EmojiPicker_shine__s-vEs",searchSkeleton:"EmojiPicker_searchSkeleton__gNgdU",searchInput:"EmojiPicker_searchInput__tpaBs",categoryTabsSkeleton:"EmojiPicker_categoryTabsSkeleton__2dISl",categoryTab:"EmojiPicker_categoryTab__mmSVF",contentSkeleton:"EmojiPicker_contentSkeleton__UWfQu",categoryName:"EmojiPicker_categoryName__d2-Ed",emojiGrid:"EmojiPicker_emojiGrid__WnoCI",emoji:"EmojiPicker_emoji__jaN-w",previewSkeleton:"EmojiPicker_previewSkeleton__Bjqkm",previewEmoji:"EmojiPicker_previewEmoji__uOLbA",previewName:"EmojiPicker_previewName__QJ47d",tagList:"EmojiPicker_tagList__tc6nv",tag:"EmojiPicker_tag__gAU6B",overlay:"EmojiPicker_overlay__kDT99",content:"EmojiPicker_content__xT6Kl",fullHeight:"EmojiPicker_fullHeight__7kz2H",pluginContainer:"EmojiPicker_pluginContainer__Gz3yT",header:"EmojiPicker_header__eDZPD"};x('@keyframes EmojiPicker_shine__s-vEs {\n  to {\n    transform: translateX(100%);\n  }\n}\n.EmojiPicker_picker__19Vln {\n  --border-radius: 5px;\n  --emoji-area-height: calc(\n    (var(--row-count) * var(--emoji-size) * var(--emoji-size-multiplier)) + var(--category-name-height)\n  );\n  --content-height: var(--emoji-area-height);\n  --emojis-per-row: 8;\n  --row-count: 6;\n  --emoji-preview-margin: 4px;\n  --emoji-preview-height: calc(var(--emoji-preview-size) + 1em + 1px);\n  --emoji-preview-height-full: calc(var(--emoji-preview-height) + var(--emoji-preview-margin));\n  --emoji-preview-size: 2.75em;\n  --emoji-size: 2rem;\n  --emoji-size-multiplier: 1.3;\n  --content-margin: 8px;\n  --category-tabs-height: calc(1.5em + 4px + 4px + 1px);\n  --category-tabs-offset: 8px;\n  --category-tab-size: 1.2rem;\n  --category-name-height: 2rem;\n  --category-name-padding-y: 6px;\n  --search-height: 2em;\n  --search-margin: 0.5em;\n  --search-margin-bottom: 4px;\n  --search-height-full: calc(var(--search-height) + var(--search-margin) + var(--search-margin-bottom));\n  --overlay-background-color: rgba(0, 0, 0, 0.8);\n  --emoji-font: "Segoe UI Emoji", "Segoe UI Symbol", "Segoe UI", "Apple Color Emoji", "Twemoji Mozilla",\n    "Noto Color Emoji", "EmojiOne Color", "Android Emoji";\n  --ui-font: -apple-system, BlinkMacSystemFont, "Helvetica Neue", sans-serif;\n  --ui-font-size: 16px;\n  --picker-width: calc(var(--emojis-per-row) * var(--emoji-size) * var(--emoji-size-multiplier) + 2.75rem);\n  background: var(--background-color);\n  border-radius: var(--border-radius);\n  border: 1px solid var(--border-color);\n  font-family: var(--ui-font);\n  font-size: var(--ui-font-size);\n  overflow: hidden;\n  position: relative;\n  width: var(--picker-width);\n  display: grid;\n  gap: 8px;\n}\n.EmojiPicker_picker__19Vln > * {\n  font-family: var(--ui-font);\n}\n\n.EmojiPicker_skeleton__M1a2g {\n  background: var(--background-color);\n  border-radius: var(--border-radius);\n  border: 1px solid var(--border-color);\n  font-family: var(--ui-font);\n  width: var(--picker-width);\n  color: var(--secondary-text-color);\n}\n.EmojiPicker_skeleton__M1a2g * {\n  box-sizing: border-box;\n}\n.EmojiPicker_skeleton__M1a2g .EmojiPicker_placeholder__YDJn- {\n  background: var(--placeholder-background-color);\n  position: relative;\n  overflow: hidden;\n}\n.EmojiPicker_skeleton__M1a2g .EmojiPicker_placeholder__YDJn-::after {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  transform: translateX(-100%);\n  background-image: linear-gradient(90deg, rgba(255, 255, 255, 0) 0, rgba(255, 255, 255, 0.2) 20%, rgba(255, 255, 255, 0.5) 60%, rgba(255, 255, 255, 0));\n  animation: EmojiPicker_shine__s-vEs 2s infinite;\n  content: "";\n}\n.EmojiPicker_skeleton__M1a2g .EmojiPicker_searchSkeleton__gNgdU {\n  padding: 0 8px;\n  height: var(--search-height);\n}\n.EmojiPicker_skeleton__M1a2g .EmojiPicker_searchSkeleton__gNgdU .EmojiPicker_searchInput__tpaBs {\n  width: 100%;\n  height: 28px;\n  border-radius: 3px;\n}\n.EmojiPicker_skeleton__M1a2g .EmojiPicker_categoryTabsSkeleton__2dISl {\n  height: var(--category-tabs-height);\n  display: flex;\n  flex-direction: row;\n  justify-content: space-around;\n  align-items: center;\n}\n.EmojiPicker_skeleton__M1a2g .EmojiPicker_categoryTabsSkeleton__2dISl .EmojiPicker_categoryTab__mmSVF {\n  width: 25px;\n  height: 25px;\n  padding: 2px;\n  border-radius: 5px;\n}\n.EmojiPicker_skeleton__M1a2g .EmojiPicker_contentSkeleton__UWfQu {\n  height: var(--content-height);\n  padding-right: 8px;\n  opacity: 0.7;\n}\n.EmojiPicker_skeleton__M1a2g .EmojiPicker_contentSkeleton__UWfQu .EmojiPicker_categoryName__d2-Ed {\n  width: 50%;\n  height: 1rem;\n  margin: 0.5rem;\n  box-sizing: border-box;\n}\n.EmojiPicker_skeleton__M1a2g .EmojiPicker_contentSkeleton__UWfQu .EmojiPicker_emojiGrid__WnoCI {\n  display: grid;\n  justify-content: space-between;\n  gap: 1px;\n  padding: 0 0.5em;\n  grid-template-columns: repeat(var(--emojis-per-row), calc(var(--emoji-size) * var(--emoji-size-multiplier)));\n  grid-auto-rows: calc(var(--emoji-size) * var(--emoji-size-multiplier));\n  align-items: center;\n  justify-items: center;\n}\n.EmojiPicker_skeleton__M1a2g .EmojiPicker_contentSkeleton__UWfQu .EmojiPicker_emojiGrid__WnoCI .EmojiPicker_emoji__jaN-w {\n  width: var(--emoji-size);\n  height: var(--emoji-size);\n  border-radius: 50%;\n}\n.EmojiPicker_skeleton__M1a2g .EmojiPicker_previewSkeleton__Bjqkm {\n  height: var(--emoji-preview-height);\n  border-top: 1px solid var(--border-color);\n  display: grid;\n  align-items: center;\n  padding: 0.5em;\n  gap: 6px;\n  grid-template-columns: auto 1fr;\n  grid-template-rows: auto 1fr;\n  grid-template-areas: "emoji name" "emoji tags";\n}\n.EmojiPicker_skeleton__M1a2g .EmojiPicker_previewSkeleton__Bjqkm .EmojiPicker_previewEmoji__uOLbA {\n  grid-area: emoji;\n  border-radius: 50%;\n  width: var(--emoji-preview-size);\n  height: var(--emoji-preview-size);\n}\n.EmojiPicker_skeleton__M1a2g .EmojiPicker_previewSkeleton__Bjqkm .EmojiPicker_previewName__QJ47d {\n  grid-area: name;\n  width: 12em;\n  height: 0.8em;\n}\n.EmojiPicker_skeleton__M1a2g .EmojiPicker_previewSkeleton__Bjqkm .EmojiPicker_tagList__tc6nv {\n  grid-area: tags;\n  list-style-type: none;\n  display: flex;\n  flex-direction: row;\n  padding: 0;\n  margin: 0;\n}\n.EmojiPicker_skeleton__M1a2g .EmojiPicker_previewSkeleton__Bjqkm .EmojiPicker_tagList__tc6nv .EmojiPicker_tag__gAU6B {\n  border-radius: 3px;\n  padding: 2px 8px;\n  margin-right: 0.25em;\n  height: 1em;\n  width: 3em;\n}\n\n.EmojiPicker_overlay__kDT99 {\n  background: rgba(0, 0, 0, 0.75);\n  height: 100%;\n  left: 0;\n  position: fixed;\n  top: 0;\n  width: 100%;\n  z-index: 1000;\n}\n\n.EmojiPicker_content__xT6Kl {\n  position: relative;\n  overflow: hidden;\n  height: var(--content-height);\n}\n.EmojiPicker_content__xT6Kl.EmojiPicker_fullHeight__7kz2H {\n  height: calc(var(--content-height) + var(--category-tabs-height) + var(--category-tabs-offset));\n  overflow-y: auto;\n}\n\n.EmojiPicker_pluginContainer__Gz3yT {\n  margin: 0.5em;\n  display: flex;\n  flex-direction: row;\n}\n\n.EmojiPicker_header__eDZPD {\n  background-color: var(--secondary-background-color);\n  padding-top: 8px;\n  padding-bottom: 8px;\n  display: grid;\n  gap: 8px;\n  border-bottom: 1px solid var(--border-color);\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .EmojiPicker_placeholder__YDJn- {\n    background: var(--placeholder-background-color);\n    position: relative;\n    overflow: hidden;\n  }\n  .EmojiPicker_placeholder__YDJn-::after {\n    display: none;\n  }\n}');const et={emojisPerRow:"--emojis-per-row",visibleRows:"--row-count",emojiSize:"--emoji-size"};class tt extends C{constructor(){super({template:Ze,classes:Xe}),this.pickerReady=!1,this.externalEvents=new se}initialize(){this.uiElements={pickerContent:C.byClass(Xe.content),header:C.byClass(Xe.header)},this.uiEvents=[C.uiEvent("keydown",this.handleKeyDown)],this.appEvents={error:this.onError,reinitialize:this.reinitialize,"data:ready":this.onDataReady,"content:show":this.showContent,"variantPopup:hide":this.hideVariantPopup,"emoji:select":this.selectEmoji},super.initialize(),this.options.recentsProvider}destroy(){var e,t;super.destroy(),null===(e=this.search)||void 0===e||e.destroy(),this.emojiArea.destroy(),null===(t=this.categoryTabs)||void 0===t||t.destroy(),this.events.removeAll(),this.externalEvents.removeAll()}clearRecents(){this.options.recentsProvider.clear()}addEventListener(e,t){this.externalEvents.on(e,t)}removeEventListener(e,t){this.externalEvents.off(e,t)}initializePickerView(){this.pickerReady&&(this.showContent(),this.emojiArea.reset())}handleKeyDown(e){const t=e.ctrlKey||e.metaKey;"s"===e.key&&t&&this.search&&(e.preventDefault(),this.search.focus())}buildChildViews(){return this.options.showPreview&&(this.preview=this.viewFactory.create(ze)),this.options.showSearch&&(this.search=this.viewFactory.create(Re,{categories:this.categories,emojiVersion:this.emojiVersion})),this.options.showCategoryTabs&&(this.categoryTabs=this.viewFactory.create(Je,{categories:this.categories})),this.currentView=this.emojiArea=this.viewFactory.create(ke,{categoryTabs:this.categoryTabs,categories:this.categories,emojiVersion:this.emojiVersion}),[this.preview,this.search,this.emojiArea,this.categoryTabs]}setStyleProperties(){this.options.showSearch||this.el.style.setProperty("--search-height-full","0px"),this.options.showCategoryTabs||(this.el.style.setProperty("--category-tabs-height","0px"),this.el.style.setProperty("--category-tabs-offset","0px")),this.options.showPreview||this.el.style.setProperty("--emoji-preview-height-full","0px"),Object.keys(et).forEach((e=>{this.options[e]&&this.el.style.setProperty(et[e],this.options[e].toString())}))}reinitialize(){this.renderSync()}onError(e){const t=this.viewFactory.create(Ae,{message:this.i18n.get("error.load")}),n=this.el.offsetHeight||375;throw this.el.style.height=`${n}px`,this.el.replaceChildren(t.renderSync()),e}onDataReady(e){const t=Object.create(null,{render:{get:()=>super.render}});return r(this,void 0,void 0,(function*(){const n=this.el;try{e?this.emojiData=e:yield this.emojiDataPromise,"auto"===this.options.emojiVersion?this.emojiVersion=function(){var e;const t=Ye.find((e=>function(e){const t=document.createElement("canvas").getContext("2d");if(t)return t.textBaseline="top",t.font="32px Arial",t.fillText(e,0,0),0!==t.getImageData(16,16,1,1).data[0]}(e.emoji)));return null!==(e=null==t?void 0:t.version)&&void 0!==e?e:1}()||parseFloat("14.0"):this.emojiVersion=this.options.emojiVersion,this.categories=yield this.emojiData.getCategories(this.options);const[o,r,i,s]=this.buildChildViews();yield t.render.call(this,{isLoaded:!0,search:r,categoryTabs:s,emojiArea:i,preview:o,showHeader:Boolean(this.search||this.categoryTabs),theme:this.options.theme,className:this.options.className}),this.el.style.setProperty("--category-count",this.categories.length.toString()),this.pickerReady=!0,n.replaceWith(this.el),this.setStyleProperties(),this.initializePickerView(),this.setInitialFocus(),this.externalEvents.emit("data:ready")}catch(e){this.events.emit("error",e)}}))}renderSync(){if(super.renderSync({isLoaded:!1,theme:this.options.theme,showSearch:this.options.showSearch,showPreview:this.options.showPreview,showCategoryTabs:this.options.showCategoryTabs,showHeader:this.options.showSearch||this.options.showCategoryTabs,emojiCount:this.options.emojisPerRow*this.options.visibleRows}),!this.options.rootElement)throw new Error("Picker must be given a root element via the rootElement option");return this.options.rootElement.replaceChildren(this.el),this.setStyleProperties(),this.pickerReady&&this.initializePickerView(),this.el}setInitialFocus(){this.pickerReady&&(this.search&&this.options.autoFocusSearch?this.search.focus():this.emojiArea.focusableEmoji.focus())}reset(){this.pickerReady&&(this.emojiArea.reset(),this.showContent(this.emojiArea)),this.search&&this.search.clear()}showContent(e=this.emojiArea){var t,n;e!==this.currentView&&(this.currentView!==this.emojiArea&&(null===(t=this.currentView)||void 0===t||t.destroy()),this.ui.pickerContent.classList.toggle(Xe.fullHeight,e!==this.emojiArea),this.ui.pickerContent.replaceChildren(e.el),this.currentView=e,e===this.emojiArea?(this.emojiArea.reset(),this.categoryTabs&&this.ui.header.appendChild(this.categoryTabs.el)):null===(n=this.categoryTabs)||void 0===n||n.el.remove())}hideVariantPopup(){var e;null===(e=this.variantPopup)||void 0===e||e.destroy()}isPickerClick(e){var t,n;const o=e.target,r=this.el.contains(o),i=null===(n=null===(t=this.variantPopup)||void 0===t?void 0:t.el)||void 0===n?void 0:n.contains(o);return r||i}selectEmoji({emoji:e}){var t,n;return r(this,void 0,void 0,(function*(){(null===(t=e.skins)||void 0===t?void 0:t.length)&&this.options.showVariants&&!this.isVariantPopupOpen?this.showVariantPopup(e):(yield null===(n=this.variantPopup)||void 0===n?void 0:n.animateHide(),this.events.emit("variantPopup:hide"),yield this.emitEmoji(e))}))}get isVariantPopupOpen(){return this.variantPopup&&!this.variantPopup.isDestroyed}showVariantPopup(e){return r(this,void 0,void 0,(function*(){const t=document.activeElement;this.events.once("variantPopup:hide",(()=>{null==t||t.focus()})),this.variantPopup=this.viewFactory.create(Ve,{emoji:e,parent:this.el}),this.el.appendChild(this.variantPopup.renderSync()),this.variantPopup.activate()}))}emitEmoji(e){return r(this,void 0,void 0,(function*(){this.externalEvents.emit("emoji:select",yield this.renderer.doEmit(e)),this.options.recentsProvider.addOrUpdateRecent(e,this.options.maxRecents),this.events.emit("recent:add",e)}))}}class nt{constructor({events:e,i18n:t,renderer:n,emojiData:o,options:r,customEmojis:i=[],pickerId:s}){this.events=e,this.i18n=t,this.renderer=n,this.emojiData=o,this.options=r,this.customEmojis=i,this.pickerId=s}setEmojiData(e){this.emojiData=Promise.resolve(e)}create(e,...t){const n=new e(...t);return n.setPickerId(this.pickerId),n.setEvents(this.events),n.setI18n(this.i18n),n.setRenderer(this.renderer),n.setEmojiData(this.emojiData),n.setOptions(this.options),n.setCustomEmojis(this.customEmojis),n.viewFactory=this,n.initialize(),n}}var ot;class rt{constructor(e={}){ot.set(this,void 0),s(this,ot,new Map(Object.entries(e)),"f")}get(e,t=e){return i(this,ot,"f").get(e)||t}}ot=new WeakMap;let it=0;function st(e,t,n,o){return new(n||(n=Promise))((function(r,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))}class at extends re{}var ct="top",lt="bottom",ht="right",dt="left",ut=[ct,lt,ht,dt],pt=ut.reduce((function(e,t){return e.concat([t+"-start",t+"-end"])}),[]),mt=[].concat(ut,["auto"]).reduce((function(e,t){return e.concat([t,t+"-start",t+"-end"])}),[]),ft=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function gt(e){return e?(e.nodeName||"").toLowerCase():null}function vt(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function yt(e){return e instanceof vt(e).Element||e instanceof Element}function bt(e){return e instanceof vt(e).HTMLElement||e instanceof HTMLElement}function wt(e){return"undefined"!=typeof ShadowRoot&&(e instanceof vt(e).ShadowRoot||e instanceof ShadowRoot)}var _t={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},o=t.attributes[e]||{},r=t.elements[e];bt(r)&&gt(r)&&(Object.assign(r.style,n),Object.keys(o).forEach((function(e){var t=o[e];!1===t?r.removeAttribute(e):r.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var o=t.elements[e],r=t.attributes[e]||{},i=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});bt(o)&&gt(o)&&(Object.assign(o.style,i),Object.keys(r).forEach((function(e){o.removeAttribute(e)})))}))}},requires:["computeStyles"]};function jt(e){return e.split("-")[0]}var Ct=Math.max,xt=Math.min,kt=Math.round;function Et(e,t){void 0===t&&(t=!1);var n=e.getBoundingClientRect(),o=1,r=1;if(bt(e)&&t){var i=e.offsetHeight,s=e.offsetWidth;s>0&&(o=kt(n.width)/s||1),i>0&&(r=kt(n.height)/i||1)}return{width:n.width/o,height:n.height/r,top:n.top/r,right:n.right/o,bottom:n.bottom/r,left:n.left/o,x:n.left/o,y:n.top/r}}function St(e){var t=Et(e),n=e.offsetWidth,o=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-o)<=1&&(o=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:o}}function Pt(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&wt(n)){var o=t;do{if(o&&e.isSameNode(o))return!0;o=o.parentNode||o.host}while(o)}return!1}function Ot(e){return vt(e).getComputedStyle(e)}function At(e){return((yt(e)?e.ownerDocument:e.document)||window.document).documentElement}function Lt(e){return"html"===gt(e)?e:e.assignedSlot||e.parentNode||(wt(e)?e.host:null)||At(e)}function Tt(e){return bt(e)&&"fixed"!==Ot(e).position?e.offsetParent:null}function Ft(e){for(var t=vt(e),n=Tt(e);n&&["table","td","th"].indexOf(gt(n))>=0&&"static"===Ot(n).position;)n=Tt(n);return n&&("html"===gt(n)||"body"===gt(n)&&"static"===Ot(n).position)?t:n||function(e){var t=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&bt(e)&&"fixed"===Ot(e).position)return null;var n=Lt(e);for(wt(n)&&(n=n.host);bt(n)&&["html","body"].indexOf(gt(n))<0;){var o=Ot(n);if("none"!==o.transform||"none"!==o.perspective||"paint"===o.contain||-1!==["transform","perspective"].indexOf(o.willChange)||t&&"filter"===o.willChange||t&&o.filter&&"none"!==o.filter)return n;n=n.parentNode}return null}(e)||t}function zt(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Mt(e,t,n){return Ct(e,xt(t,n))}function It(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function Dt(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}function Rt(e){return e.split("-")[1]}var $t={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Nt(e){var t,n=e.popper,o=e.popperRect,r=e.placement,i=e.variation,s=e.offsets,a=e.position,c=e.gpuAcceleration,l=e.adaptive,h=e.roundOffsets,d=e.isFixed,u=s.x,p=void 0===u?0:u,m=s.y,f=void 0===m?0:m,g="function"==typeof h?h({x:p,y:f}):{x:p,y:f};p=g.x,f=g.y;var v=s.hasOwnProperty("x"),y=s.hasOwnProperty("y"),b=dt,w=ct,_=window;if(l){var j=Ft(n),C="clientHeight",x="clientWidth";j===vt(n)&&"static"!==Ot(j=At(n)).position&&"absolute"===a&&(C="scrollHeight",x="scrollWidth"),(r===ct||(r===dt||r===ht)&&"end"===i)&&(w=lt,f-=(d&&j===_&&_.visualViewport?_.visualViewport.height:j[C])-o.height,f*=c?1:-1),r!==dt&&(r!==ct&&r!==lt||"end"!==i)||(b=ht,p-=(d&&j===_&&_.visualViewport?_.visualViewport.width:j[x])-o.width,p*=c?1:-1)}var k,E,S,P,O,A=Object.assign({position:a},l&&$t),L=!0===h?(S=(E={x:p,y:f}).x,P=E.y,O=window.devicePixelRatio||1,{x:kt(S*O)/O||0,y:kt(P*O)/O||0}):{x:p,y:f};return p=L.x,f=L.y,c?Object.assign({},A,((k={})[w]=y?"0":"",k[b]=v?"0":"",k.transform=(_.devicePixelRatio||1)<=1?"translate("+p+"px, "+f+"px)":"translate3d("+p+"px, "+f+"px, 0)",k)):Object.assign({},A,((t={})[w]=y?f+"px":"",t[b]=v?p+"px":"",t.transform="",t))}var Bt={passive:!0},Ht={left:"right",right:"left",bottom:"top",top:"bottom"};function Ut(e){return e.replace(/left|right|bottom|top/g,(function(e){return Ht[e]}))}var Vt={start:"end",end:"start"};function qt(e){return e.replace(/start|end/g,(function(e){return Vt[e]}))}function Wt(e){var t=vt(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Kt(e){return Et(At(e)).left+Wt(e).scrollLeft}function Gt(e){var t=Ot(e),n=t.overflow,o=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+o)}function Jt(e){return["html","body","#document"].indexOf(gt(e))>=0?e.ownerDocument.body:bt(e)&&Gt(e)?e:Jt(Lt(e))}function Yt(e,t){var n;void 0===t&&(t=[]);var o=Jt(e),r=o===(null==(n=e.ownerDocument)?void 0:n.body),i=vt(o),s=r?[i].concat(i.visualViewport||[],Gt(o)?o:[]):o,a=t.concat(s);return r?a:a.concat(Yt(Lt(s)))}function Qt(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Zt(e,t){return"viewport"===t?Qt((o=vt(n=e),r=At(n),i=o.visualViewport,s=r.clientWidth,a=r.clientHeight,c=0,l=0,i&&(s=i.width,a=i.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(c=i.offsetLeft,l=i.offsetTop)),{width:s,height:a,x:c+Kt(n),y:l})):yt(t)?function(e){var t=Et(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}(t):Qt(function(e){var t,n=At(e),o=Wt(e),r=null==(t=e.ownerDocument)?void 0:t.body,i=Ct(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),s=Ct(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-o.scrollLeft+Kt(e),c=-o.scrollTop;return"rtl"===Ot(r||n).direction&&(a+=Ct(n.clientWidth,r?r.clientWidth:0)-i),{width:i,height:s,x:a,y:c}}(At(e)));var n,o,r,i,s,a,c,l}function Xt(e){var t,n=e.reference,o=e.element,r=e.placement,i=r?jt(r):null,s=r?Rt(r):null,a=n.x+n.width/2-o.width/2,c=n.y+n.height/2-o.height/2;switch(i){case ct:t={x:a,y:n.y-o.height};break;case lt:t={x:a,y:n.y+n.height};break;case ht:t={x:n.x+n.width,y:c};break;case dt:t={x:n.x-o.width,y:c};break;default:t={x:n.x,y:n.y}}var l=i?zt(i):null;if(null!=l){var h="y"===l?"height":"width";switch(s){case"start":t[l]=t[l]-(n[h]/2-o[h]/2);break;case"end":t[l]=t[l]+(n[h]/2-o[h]/2)}}return t}function en(e,t){void 0===t&&(t={});var n=t,o=n.placement,r=void 0===o?e.placement:o,i=n.boundary,s=void 0===i?"clippingParents":i,a=n.rootBoundary,c=void 0===a?"viewport":a,l=n.elementContext,h=void 0===l?"popper":l,d=n.altBoundary,u=void 0!==d&&d,p=n.padding,m=void 0===p?0:p,f=It("number"!=typeof m?m:Dt(m,ut)),g="popper"===h?"reference":"popper",v=e.rects.popper,y=e.elements[u?g:h],b=function(e,t,n){var o,r,i,s="clippingParents"===t?(r=Yt(Lt(o=e)),yt(i=["absolute","fixed"].indexOf(Ot(o).position)>=0&&bt(o)?Ft(o):o)?r.filter((function(e){return yt(e)&&Pt(e,i)&&"body"!==gt(e)})):[]):[].concat(t),a=[].concat(s,[n]),c=a[0],l=a.reduce((function(t,n){var o=Zt(e,n);return t.top=Ct(o.top,t.top),t.right=xt(o.right,t.right),t.bottom=xt(o.bottom,t.bottom),t.left=Ct(o.left,t.left),t}),Zt(e,c));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}(yt(y)?y:y.contextElement||At(e.elements.popper),s,c),w=Et(e.elements.reference),_=Xt({reference:w,element:v,strategy:"absolute",placement:r}),j=Qt(Object.assign({},v,_)),C="popper"===h?j:w,x={top:b.top-C.top+f.top,bottom:C.bottom-b.bottom+f.bottom,left:b.left-C.left+f.left,right:C.right-b.right+f.right},k=e.modifiersData.offset;if("popper"===h&&k){var E=k[r];Object.keys(x).forEach((function(e){var t=[ht,lt].indexOf(e)>=0?1:-1,n=[ct,lt].indexOf(e)>=0?"y":"x";x[e]+=E[n]*t}))}return x}function tn(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function nn(e){return[ct,ht,lt,dt].some((function(t){return e[t]>=0}))}var on={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t,n,o=e.state,r=e.options,i=e.name,s=r.mainAxis,a=void 0===s||s,c=r.altAxis,l=void 0!==c&&c,h=r.boundary,d=r.rootBoundary,u=r.altBoundary,p=r.padding,m=r.tether,f=void 0===m||m,g=r.tetherOffset,v=void 0===g?0:g,y=en(o,{boundary:h,rootBoundary:d,padding:p,altBoundary:u}),b=jt(o.placement),w=Rt(o.placement),_=!w,j=zt(b),C="x"===j?"y":"x",x=o.modifiersData.popperOffsets,k=o.rects.reference,E=o.rects.popper,S="function"==typeof v?v(Object.assign({},o.rects,{placement:o.placement})):v,P="number"==typeof S?{mainAxis:S,altAxis:S}:Object.assign({mainAxis:0,altAxis:0},S),O=o.modifiersData.offset?o.modifiersData.offset[o.placement]:null,A={x:0,y:0};if(x){if(a){var L,T="y"===j?ct:dt,F="y"===j?lt:ht,z="y"===j?"height":"width",M=x[j],I=M+y[T],D=M-y[F],R=f?-E[z]/2:0,$="start"===w?k[z]:E[z],N="start"===w?-E[z]:-k[z],B=o.elements.arrow,H=f&&B?St(B):{width:0,height:0},U=o.modifiersData["arrow#persistent"]?o.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},V=U[T],q=U[F],W=Mt(0,k[z],H[z]),K=_?k[z]/2-R-W-V-P.mainAxis:$-W-V-P.mainAxis,G=_?-k[z]/2+R+W+q+P.mainAxis:N+W+q+P.mainAxis,J=o.elements.arrow&&Ft(o.elements.arrow),Y=J?"y"===j?J.clientTop||0:J.clientLeft||0:0,Q=null!=(L=null==O?void 0:O[j])?L:0,Z=M+G-Q,X=Mt(f?xt(I,M+K-Q-Y):I,M,f?Ct(D,Z):D);x[j]=X,A[j]=X-M}if(l){var ee,te="x"===j?ct:dt,ne="x"===j?lt:ht,oe=x[C],re="y"===C?"height":"width",ie=oe+y[te],se=oe-y[ne],ae=-1!==[ct,dt].indexOf(b),ce=null!=(ee=null==O?void 0:O[C])?ee:0,le=ae?ie:oe-k[re]-E[re]-ce+P.altAxis,he=ae?oe+k[re]+E[re]-ce-P.altAxis:se,de=f&&ae?(n=Mt(le,oe,t=he))>t?t:n:Mt(f?le:ie,oe,f?he:se);x[C]=de,A[C]=de-oe}o.modifiersData[i]=A}},requiresIfExists:["offset"]};function rn(e,t,n){void 0===n&&(n=!1);var o,r,i,s,a,c,l=bt(t),h=bt(t)&&(s=(i=t).getBoundingClientRect(),a=kt(s.width)/i.offsetWidth||1,c=kt(s.height)/i.offsetHeight||1,1!==a||1!==c),d=At(t),u=Et(e,h),p={scrollLeft:0,scrollTop:0},m={x:0,y:0};return(l||!l&&!n)&&(("body"!==gt(t)||Gt(d))&&(p=(o=t)!==vt(o)&&bt(o)?{scrollLeft:(r=o).scrollLeft,scrollTop:r.scrollTop}:Wt(o)),bt(t)?((m=Et(t,!0)).x+=t.clientLeft,m.y+=t.clientTop):d&&(m.x=Kt(d))),{x:u.left+p.scrollLeft-m.x,y:u.top+p.scrollTop-m.y,width:u.width,height:u.height}}function sn(e){var t=new Map,n=new Set,o=[];function r(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var o=t.get(e);o&&r(o)}})),o.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||r(e)})),o}var an={placement:"bottom",modifiers:[],strategy:"absolute"};function cn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}var ln=function(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,o=void 0===n?[]:n,r=t.defaultOptions,i=void 0===r?an:r;return function(e,t,n){void 0===n&&(n=i);var r,s,a={placement:"bottom",orderedModifiers:[],options:Object.assign({},an,i),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},c=[],l=!1,h={state:a,setOptions:function(n){var r="function"==typeof n?n(a.options):n;d(),a.options=Object.assign({},i,a.options,r),a.scrollParents={reference:yt(e)?Yt(e):e.contextElement?Yt(e.contextElement):[],popper:Yt(t)};var s,l,u,p,m=(s=[].concat(o,a.options.modifiers),l=s.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{}),u=Object.keys(l).map((function(e){return l[e]})),p=sn(u),ft.reduce((function(e,t){return e.concat(p.filter((function(e){return e.phase===t})))}),[]));return a.orderedModifiers=m.filter((function(e){return e.enabled})),a.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,o=void 0===n?{}:n,r=e.effect;if("function"==typeof r){var i=r({state:a,name:t,instance:h,options:o});c.push(i||function(){})}})),h.update()},forceUpdate:function(){if(!l){var e=a.elements,t=e.reference,n=e.popper;if(cn(t,n)){a.rects={reference:rn(t,Ft(n),"fixed"===a.options.strategy),popper:St(n)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach((function(e){return a.modifiersData[e.name]=Object.assign({},e.data)}));for(var o=0;o<a.orderedModifiers.length;o++)if(!0!==a.reset){var r=a.orderedModifiers[o],i=r.fn,s=r.options,c=void 0===s?{}:s,d=r.name;"function"==typeof i&&(a=i({state:a,options:c,name:d,instance:h})||a)}else a.reset=!1,o=-1}}},update:(r=function(){return new Promise((function(e){h.forceUpdate(),e(a)}))},function(){return s||(s=new Promise((function(e){Promise.resolve().then((function(){s=void 0,e(r())}))}))),s}),destroy:function(){d(),l=!0}};if(!cn(e,t))return h;function d(){c.forEach((function(e){return e()})),c=[]}return h.setOptions(n).then((function(e){!l&&n.onFirstUpdate&&n.onFirstUpdate(e)})),h}}({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,o=e.options,r=o.scroll,i=void 0===r||r,s=o.resize,a=void 0===s||s,c=vt(t.elements.popper),l=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&l.forEach((function(e){e.addEventListener("scroll",n.update,Bt)})),a&&c.addEventListener("resize",n.update,Bt),function(){i&&l.forEach((function(e){e.removeEventListener("scroll",n.update,Bt)})),a&&c.removeEventListener("resize",n.update,Bt)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=Xt({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,o=n.gpuAcceleration,r=void 0===o||o,i=n.adaptive,s=void 0===i||i,a=n.roundOffsets,c=void 0===a||a,l={placement:jt(t.placement),variation:Rt(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,Nt(Object.assign({},l,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:c})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,Nt(Object.assign({},l,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},_t,{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,o=e.name,r=n.offset,i=void 0===r?[0,0]:r,s=mt.reduce((function(e,n){return e[n]=(o=n,r=t.rects,s=i,a=jt(o),c=[dt,ct].indexOf(a)>=0?-1:1,l="function"==typeof s?s(Object.assign({},r,{placement:o})):s,h=l[0],d=l[1],h=h||0,d=(d||0)*c,[dt,ht].indexOf(a)>=0?{x:d,y:h}:{x:h,y:d}),e;var o,r,s,a,c,l,h,d}),{}),a=s[t.placement],c=a.x,l=a.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=l),t.modifiersData[o]=s}},{name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,o=e.name;if(!t.modifiersData[o]._skip){for(var r=n.mainAxis,i=void 0===r||r,s=n.altAxis,a=void 0===s||s,c=n.fallbackPlacements,l=n.padding,h=n.boundary,d=n.rootBoundary,u=n.altBoundary,p=n.flipVariations,m=void 0===p||p,f=n.allowedAutoPlacements,g=t.options.placement,v=jt(g),y=c||(v!==g&&m?function(e){if("auto"===jt(e))return[];var t=Ut(e);return[qt(e),t,qt(t)]}(g):[Ut(g)]),b=[g].concat(y).reduce((function(e,n){return e.concat("auto"===jt(n)?function(e,t){void 0===t&&(t={});var n=t,o=n.placement,r=n.boundary,i=n.rootBoundary,s=n.padding,a=n.flipVariations,c=n.allowedAutoPlacements,l=void 0===c?mt:c,h=Rt(o),d=h?a?pt:pt.filter((function(e){return Rt(e)===h})):ut,u=d.filter((function(e){return l.indexOf(e)>=0}));0===u.length&&(u=d);var p=u.reduce((function(t,n){return t[n]=en(e,{placement:n,boundary:r,rootBoundary:i,padding:s})[jt(n)],t}),{});return Object.keys(p).sort((function(e,t){return p[e]-p[t]}))}(t,{placement:n,boundary:h,rootBoundary:d,padding:l,flipVariations:m,allowedAutoPlacements:f}):n)}),[]),w=t.rects.reference,_=t.rects.popper,j=new Map,C=!0,x=b[0],k=0;k<b.length;k++){var E=b[k],S=jt(E),P="start"===Rt(E),O=[ct,lt].indexOf(S)>=0,A=O?"width":"height",L=en(t,{placement:E,boundary:h,rootBoundary:d,altBoundary:u,padding:l}),T=O?P?ht:dt:P?lt:ct;w[A]>_[A]&&(T=Ut(T));var F=Ut(T),z=[];if(i&&z.push(L[S]<=0),a&&z.push(L[T]<=0,L[F]<=0),z.every((function(e){return e}))){x=E,C=!1;break}j.set(E,z)}if(C)for(var M=function(e){var t=b.find((function(t){var n=j.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return x=t,"break"},I=m?3:1;I>0&&"break"!==M(I);I--);t.placement!==x&&(t.modifiersData[o]._skip=!0,t.placement=x,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},on,{name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n,o,r=e.state,i=e.name,s=e.options,a=r.elements.arrow,c=r.modifiersData.popperOffsets,l=jt(r.placement),h=zt(l),d=[dt,ht].indexOf(l)>=0?"height":"width";if(a&&c){var u=(n=s.padding,o=r,It("number"!=typeof(n="function"==typeof n?n(Object.assign({},o.rects,{placement:o.placement})):n)?n:Dt(n,ut))),p=St(a),m="y"===h?ct:dt,f="y"===h?lt:ht,g=r.rects.reference[d]+r.rects.reference[h]-c[h]-r.rects.popper[d],v=c[h]-r.rects.reference[h],y=Ft(a),b=y?"y"===h?y.clientHeight||0:y.clientWidth||0:0,w=g/2-v/2,_=u[m],j=b-p[d]-u[f],C=b/2-p[d]/2+w,x=Mt(_,C,j),k=h;r.modifiersData[i]=((t={})[k]=x,t.centerOffset=x-C,t)}},effect:function(e){var t=e.state,n=e.options.element,o=void 0===n?"[data-popper-arrow]":n;null!=o&&("string"!=typeof o||(o=t.elements.popper.querySelector(o)))&&Pt(t.elements.popper,o)&&(t.elements.arrow=o)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,o=t.rects.reference,r=t.rects.popper,i=t.modifiersData.preventOverflow,s=en(t,{elementContext:"reference"}),a=en(t,{altBoundary:!0}),c=tn(s,o),l=tn(a,r,i),h=nn(c),d=nn(l);t.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:l,isReferenceHidden:h,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":d})}}]});const hn={hideOnClickOutside:!0,hideOnEmojiSelect:!0,hideOnEscape:!0,position:"auto",showCloseButton:!0};!function(e,t){void 0===t&&(t={});var n=t.insertAt;if("undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&o.firstChild?o.insertBefore(r,o.firstChild):o.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}(".popupPicker_popupContainer__-DboI {\n  display: flex;\n  flex-direction: column;\n}\n\n.popupPicker_closeButton__j1nuQ {\n  position: absolute;\n  opacity: 0;\n  background: transparent;\n  border: none;\n  z-index: 1;\n  right: 0;\n  top: 0;\n  cursor: pointer;\n  padding: 4px;\n  align-self: flex-end;\n  transform: translate(50%, -50%);\n  background: #999999;\n  width: 1.5rem;\n  height: 1.5rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50%;\n}\n.popupPicker_closeButton__j1nuQ:hover {\n  background: var(--accent-color);\n}\n.popupPicker_closeButton__j1nuQ svg {\n  fill: white;\n  width: 1.25rem;\n  height: 1.25rem;\n}");class dn{constructor(e,t){this.isOpen=!1,this.externalEvents=new at,this.options=Object.assign(Object.assign({},function(e={}){return Object.assign(Object.assign(Object.assign({},hn),{rootElement:document.body}),e)}(t)),X(e)),this.popupEl=document.createElement("div"),this.popupEl.classList.add("popupPicker_popupContainer__-DboI"),this.popupEl.classList.add(this.options.theme),t.className&&this.popupEl.classList.add(t.className),this.options.showCloseButton&&(this.closeButton=document.createElement("button"),this.closeButton.classList.add("popupPicker_closeButton__j1nuQ"),this.closeButton.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512">\x3c!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --\x3e<path d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>',this.popupEl.appendChild(this.closeButton));const n=document.createElement("div");this.popupEl.appendChild(n),this.picker=function(e){const t=X(e),n=((null==t?void 0:t.custom)||[]).map((e=>Object.assign(Object.assign({},e),{custom:!0,tags:["custom",...e.tags||[]]}))),o=new ie,r=_((s=t).locale,s.dataStore,s.messages,s.emojiData),i=new rt(t.i18n);var s;r.then((e=>{o.emit("data:ready",e)})).catch((e=>{o.emit("error",e)}));const a=new nt({events:o,i18n:i,customEmojis:n,renderer:t.renderer,options:t,emojiData:r,pickerId:`picmo-${Date.now()}-${it++}`}).create(tt);return a.renderSync(),a}(Object.assign(Object.assign({},this.options),{rootElement:n})),this.focusTrap=new j,this.picker.addEventListener("data:ready",(()=>{this.focusTrap.activate(this.picker.el),this.picker.setInitialFocus()})),this.options.hideOnEmojiSelect&&this.picker.addEventListener("emoji:select",(()=>{this.close()})),this.options.hideOnClickOutside&&(this.onDocumentClick=this.onDocumentClick.bind(this),document.addEventListener("click",this.onDocumentClick)),this.options.hideOnEscape&&(this.handleKeydown=this.handleKeydown.bind(this),this.popupEl.addEventListener("keydown",this.handleKeydown))}addEventListener(e,t){this.externalEvents.on(e,t),this.picker.addEventListener(e,t)}removeEventListener(e,t){this.externalEvents.off(e,t),this.picker.removeEventListener(e,t)}handleKeydown(e){"Escape"===e.key&&this.close()}destroy(){return st(this,void 0,void 0,(function*(){this.isOpen&&(yield this.close()),document.removeEventListener("click",this.onDocumentClick),this.picker.destroy(),this.externalEvents.removeAll()}))}toggle(){return this.isOpen?this.close():this.open()}open(){return st(this,void 0,void 0,(function*(){this.isOpen||(yield this.initiateOpenStateChange(!0),this.options.rootElement.appendChild(this.popupEl),this.setPosition(),this.picker.reset(),yield this.animatePopup(!0),yield this.animateCloseButton(!0),this.picker.setInitialFocus(),this.externalEvents.emit("picker:open"))}))}close(){var e,t;return st(this,void 0,void 0,(function*(){this.isOpen&&(yield this.initiateOpenStateChange(!1),yield this.animateCloseButton(!1),yield this.animatePopup(!1),this.popupEl.remove(),this.picker.reset(),null===(e=this.positionCleanup)||void 0===e||e.call(this),this.focusTrap.deactivate(),null===(t=this.options.triggerElement)||void 0===t||t.focus(),this.externalEvents.emit("picker:close"))}))}getRunningAnimations(){return this.picker.el.getAnimations().filter((e=>"running"===e.playState))}setPosition(){var e;null===(e=this.positionCleanup)||void 0===e||e.call(this),this.positionCleanup=function(e,t,n){if(!n)throw new Error("Must provide a positioning option");return"string"==typeof n?function(e,t,n){if(!t)throw new Error("Reference element is required for relative positioning");const o=ln(t,e,{placement:n,modifiers:[{name:"offset",options:{offset:[0,5]}}]});return()=>o.destroy()}(e,t,n):(r=n,(o=e).style.position="fixed",Object.entries(r).forEach((([e,t])=>{o.style[e]=t})),()=>{});var o,r}(this.popupEl,this.options.referenceElement,this.options.position)}awaitPendingAnimations(){return Promise.all(this.getRunningAnimations().map((e=>e.finished)))}onDocumentClick(e){var t;const n=e.target,o=null===(t=this.options.triggerElement)||void 0===t?void 0:t.contains(n);!this.isOpen||this.picker.isPickerClick(e)||o||this.close()}animatePopup(e){return g(this.picker.el,{opacity:[0,1],transform:["scale(0.9)","scale(1)"]},{duration:150,id:e?"show-picker":"hide-picker",easing:"ease-in-out",direction:e?"normal":"reverse",fill:"both"},this.options)}animateCloseButton(e){if(this.closeButton)return g(this.closeButton,{opacity:[0,1]},{duration:25,id:e?"show-close":"hide-close",easing:"ease-in-out",direction:e?"normal":"reverse",fill:"both"},this.options)}initiateOpenStateChange(e){return st(this,void 0,void 0,(function*(){this.isOpen=e,yield this.awaitPendingAnimations()}))}}logseq.ready((async function(){const e=await logseq.App.getUserConfigs(),t=document.createElement("div");t.classList.add("emoji-picker-trigger"),document.getElementById("app").appendChild(t);let n=null,o=()=>{if(n)return n;var o;return o={theme:{dark:U,light:H}[e.preferredThemeMode],custom:[{emoji:"doge",label:"Doge",url:"https://i.imgur.com/HeGEEbu.jpeg",tags:["dog","doge","meme"],data:{id:1}},{emoji:"logseq",label:"Logseq",url:"https://raw.githubusercontent.com/logseq/logseq/master/resources/icons/logseq.png",tags:["logo","logseq"],data:{id:2}},{emoji:"nyancat",label:"Nyan cat",url:"https://i.imgur.com/MjeqeUP.gif",tags:["cat","rainbow","meme"],data:{id:3}},{emoji:"partyparrot",label:"party parrot",url:"https://i.imgur.com/XQrvNBV.gif",tags:["party","parrot","meme"],data:{id:4}}],autoFocusSearch:!0,animate:!1},n=new dn(o,{triggerElement:t,referenceElement:t,position:"bottom-start",showCloseButton:!1}),n.addEventListener("emoji:select",(async e=>{if(logseq.hideMainUI(),e.url){const t=document.createElement("img");t.src=e.url,t.alt=e.emoji,t.setAttribute("style","max-height:1em;width:auto;height:auto;display:inline-block");const n=t.outerHTML.replace(">"," />");await logseq.Editor.insertAtEditingCursor(n)}else await logseq.Editor.insertAtEditingCursor(e.emoji)})),document.addEventListener("keydown",(function(e){27===e.keyCode&&logseq.hideMainUI({restoreEditingCursor:!0}),e.stopPropagation()}),!1),document.addEventListener("click",(e=>{e.target.closest('div[class*="EmojiPicker_picker"]')||logseq.hideMainUI({restoreEditingCursor:!0})})),n};logseq.Editor.registerSlashCommand("😀 Emoji picker",(async()=>{const{left:e,top:n,rect:r}=await logseq.Editor.getEditingCursorPosition();Object.assign(t.style,{top:n+r.top+"px",left:e+r.left+"px"}),logseq.showMainUI(),setTimeout((()=>{o().open()}),100)}))})).catch(console.error);