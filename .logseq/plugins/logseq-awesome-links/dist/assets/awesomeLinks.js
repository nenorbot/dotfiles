(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const O of document.querySelectorAll('link[rel="modulepreload"]'))J(O);new MutationObserver(O=>{for(const F of O)if(F.type==="childList")for(const U of F.addedNodes)U.tagName==="LINK"&&U.rel==="modulepreload"&&J(U)}).observe(document,{childList:!0,subtree:!0});function k(O){const F={};return O.integrity&&(F.integrity=O.integrity),O.referrerpolicy&&(F.referrerPolicy=O.referrerpolicy),O.crossorigin==="use-credentials"?F.credentials="include":O.crossorigin==="anonymous"?F.credentials="omit":F.credentials="same-origin",F}function J(O){if(O.ep)return;O.ep=!0;const F=k(O);fetch(O.href,F)}})();var Vt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Pn={exports:{}};/*! For license information please see lsplugin.user.js.LICENSE.txt */(function(h,l){(function(k,J){h.exports=J()})(self,()=>(()=>{var k={227:(U,g,j)=>{var p=j(155);g.formatArgs=function(S){if(S[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+S[0]+(this.useColors?"%c ":" ")+"+"+U.exports.humanize(this.diff),!this.useColors)return;const W="color: "+this.color;S.splice(1,0,W,"color: inherit");let C=0,b=0;S[0].replace(/%[a-zA-Z%]/g,A=>{A!=="%%"&&(C++,A==="%c"&&(b=C))}),S.splice(b,0,W)},g.save=function(S){try{S?g.storage.setItem("debug",S):g.storage.removeItem("debug")}catch{}},g.load=function(){let S;try{S=g.storage.getItem("debug")}catch{}return!S&&p!==void 0&&"env"in p&&(S=p.env.DEBUG),S},g.useColors=function(){return!(typeof window>"u"||!window.process||window.process.type!=="renderer"&&!window.process.__nwjs)||(typeof navigator>"u"||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},g.storage=function(){try{return localStorage}catch{}}(),g.destroy=(()=>{let S=!1;return()=>{S||(S=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),g.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],g.log=console.debug||console.log||(()=>{}),U.exports=j(447)(g);const{formatters:y}=U.exports;y.j=function(S){try{return JSON.stringify(S)}catch(W){return"[UnexpectedJSONParseError]: "+W.message}}},447:(U,g,j)=>{U.exports=function(p){function y(C){let b,A,L,X=null;function z(...q){if(!z.enabled)return;const ee=z,D=Number(new Date),Q=D-(b||D);ee.diff=Q,ee.prev=b,ee.curr=D,b=D,q[0]=y.coerce(q[0]),typeof q[0]!="string"&&q.unshift("%O");let c=0;q[0]=q[0].replace(/%([a-zA-Z%])/g,(f,w)=>{if(f==="%%")return"%";c++;const P=y.formatters[w];if(typeof P=="function"){const ne=q[c];f=P.call(ee,ne),q.splice(c,1),c--}return f}),y.formatArgs.call(ee,q),(ee.log||y.log).apply(ee,q)}return z.namespace=C,z.useColors=y.useColors(),z.color=y.selectColor(C),z.extend=S,z.destroy=y.destroy,Object.defineProperty(z,"enabled",{enumerable:!0,configurable:!1,get:()=>X!==null?X:(A!==y.namespaces&&(A=y.namespaces,L=y.enabled(C)),L),set:q=>{X=q}}),typeof y.init=="function"&&y.init(z),z}function S(C,b){const A=y(this.namespace+(b===void 0?":":b)+C);return A.log=this.log,A}function W(C){return C.toString().substring(2,C.toString().length-2).replace(/\.\*\?$/,"*")}return y.debug=y,y.default=y,y.coerce=function(C){return C instanceof Error?C.stack||C.message:C},y.disable=function(){const C=[...y.names.map(W),...y.skips.map(W).map(b=>"-"+b)].join(",");return y.enable(""),C},y.enable=function(C){let b;y.save(C),y.namespaces=C,y.names=[],y.skips=[];const A=(typeof C=="string"?C:"").split(/[\s,]+/),L=A.length;for(b=0;b<L;b++)A[b]&&((C=A[b].replace(/\*/g,".*?"))[0]==="-"?y.skips.push(new RegExp("^"+C.slice(1)+"$")):y.names.push(new RegExp("^"+C+"$")))},y.enabled=function(C){if(C[C.length-1]==="*")return!0;let b,A;for(b=0,A=y.skips.length;b<A;b++)if(y.skips[b].test(C))return!1;for(b=0,A=y.names.length;b<A;b++)if(y.names[b].test(C))return!0;return!1},y.humanize=j(824),y.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(p).forEach(C=>{y[C]=p[C]}),y.names=[],y.skips=[],y.formatters={},y.selectColor=function(C){let b=0;for(let A=0;A<C.length;A++)b=(b<<5)-b+C.charCodeAt(A),b|=0;return y.colors[Math.abs(b)%y.colors.length]},y.enable(y.load()),y}},856:function(U){U.exports=function(){function g(Z){return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},g(Z)}function j(Z,E){return j=Object.setPrototypeOf||function(B,ae){return B.__proto__=ae,B},j(Z,E)}function p(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function y(Z,E,B){return y=p()?Reflect.construct:function(ae,be,De){var nt=[null];nt.push.apply(nt,be);var Ye=new(Function.bind.apply(ae,nt));return De&&j(Ye,De.prototype),Ye},y.apply(null,arguments)}function S(Z){return function(E){if(Array.isArray(E))return W(E)}(Z)||function(E){if(typeof Symbol<"u"&&E[Symbol.iterator]!=null||E["@@iterator"]!=null)return Array.from(E)}(Z)||function(E,B){if(E){if(typeof E=="string")return W(E,B);var ae=Object.prototype.toString.call(E).slice(8,-1);return ae==="Object"&&E.constructor&&(ae=E.constructor.name),ae==="Map"||ae==="Set"?Array.from(E):ae==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ae)?W(E,B):void 0}}(Z)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function W(Z,E){(E==null||E>Z.length)&&(E=Z.length);for(var B=0,ae=new Array(E);B<E;B++)ae[B]=Z[B];return ae}var C=Object.hasOwnProperty,b=Object.setPrototypeOf,A=Object.isFrozen,L=Object.getPrototypeOf,X=Object.getOwnPropertyDescriptor,z=Object.freeze,q=Object.seal,ee=Object.create,D=typeof Reflect<"u"&&Reflect,Q=D.apply,c=D.construct;Q||(Q=function(Z,E,B){return Z.apply(E,B)}),z||(z=function(Z){return Z}),q||(q=function(Z){return Z}),c||(c=function(Z,E){return y(Z,S(E))});var f,w=m(Array.prototype.forEach),P=m(Array.prototype.pop),ne=m(Array.prototype.push),oe=m(String.prototype.toLowerCase),fe=m(String.prototype.match),ge=m(String.prototype.replace),Ne=m(String.prototype.indexOf),Te=m(String.prototype.trim),me=m(RegExp.prototype.test),Ge=(f=TypeError,function(){for(var Z=arguments.length,E=new Array(Z),B=0;B<Z;B++)E[B]=arguments[B];return c(f,E)});function m(Z){return function(E){for(var B=arguments.length,ae=new Array(B>1?B-1:0),be=1;be<B;be++)ae[be-1]=arguments[be];return Q(Z,E,ae)}}function u(Z,E){b&&b(Z,null);for(var B=E.length;B--;){var ae=E[B];if(typeof ae=="string"){var be=oe(ae);be!==ae&&(A(E)||(E[B]=be),ae=be)}Z[ae]=!0}return Z}function $(Z){var E,B=ee(null);for(E in Z)Q(C,Z,[E])&&(B[E]=Z[E]);return B}function re(Z,E){for(;Z!==null;){var B=X(Z,E);if(B){if(B.get)return m(B.get);if(typeof B.value=="function")return m(B.value)}Z=L(Z)}return function(ae){return console.warn("fallback value for",ae),null}}var Fe=z(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Ce=z(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),te=z(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),de=z(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Se=z(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),ke=z(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Le=z(["#text"]),_e=z(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),we=z(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),le=z(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),r=z(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),s=q(/\{\{[\w\W]*|[\w\W]*\}\}/gm),i=q(/<%[\w\W]*|[\w\W]*%>/gm),_=q(/^data-[\-\w.\u00B7-\uFFFF]/),N=q(/^aria-[\-\w]+$/),R=q(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),ie=q(/^(?:\w+script|data):/i),he=q(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),ye=q(/^html$/i),je=function(){return typeof window>"u"?null:window},Ke=function(Z,E){if(g(Z)!=="object"||typeof Z.createPolicy!="function")return null;var B=null,ae="data-tt-policy-suffix";E.currentScript&&E.currentScript.hasAttribute(ae)&&(B=E.currentScript.getAttribute(ae));var be="dompurify"+(B?"#"+B:"");try{return Z.createPolicy(be,{createHTML:function(De){return De}})}catch{return console.warn("TrustedTypes policy "+be+" could not be created."),null}};return function Z(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:je(),B=function(o){return Z(o)};if(B.version="2.3.8",B.removed=[],!E||!E.document||E.document.nodeType!==9)return B.isSupported=!1,B;var ae=E.document,be=E.document,De=E.DocumentFragment,nt=E.HTMLTemplateElement,Ye=E.Node,Qt=E.Element,Lt=E.NodeFilter,vt=E.NamedNodeMap,Tt=vt===void 0?E.NamedNodeMap||E.MozNamedAttrMap:vt,Kt=E.HTMLFormElement,Et=E.DOMParser,Yt=E.trustedTypes,ut=Qt.prototype,Xt=re(ut,"cloneNode"),en=re(ut,"nextSibling"),wn=re(ut,"childNodes"),Ot=re(ut,"parentNode");if(typeof nt=="function"){var _t=be.createElement("template");_t.content&&_t.content.ownerDocument&&(be=_t.content.ownerDocument)}var We=Ke(Yt,ae),tn=We?We.createHTML(""):"",ue=be,wt=ue.implementation,ft=ue.createNodeIterator,Ft=ue.createDocumentFragment,nn=ue.getElementsByTagName,rn=ae.importNode,It={};try{It=$(be).documentMode?be.documentMode:{}}catch{}var He={};B.isSupported=typeof Ot=="function"&&wt&&wt.createHTMLDocument!==void 0&&It!==9;var dt,Xe,jt=s,xt=i,xn=_,Cn=N,Sn=ie,on=he,Ct=R,Ee=null,an=u({},[].concat(S(Fe),S(Ce),S(te),S(Se),S(Le))),Ie=null,Pt=u({},[].concat(S(_e),S(we),S(le),S(r))),Ae=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),rt=null,Nt=null,sn=!0,Rt=!0,cn=!1,it=!1,ze=!1,ot=!1,Mt=!1,at=!1,St=!1,ht=!1,Dt=!0,st=!0,pt=!1,Je={},ct=null,ln=u({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Ht=null,Ve=u({},["audio","video","img","source","image","track"]),Ut=null,un=u({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),gt="http://www.w3.org/1998/Math/MathML",qt="http://www.w3.org/2000/svg",Ze="http://www.w3.org/1999/xhtml",kt=Ze,fn=!1,dn=["application/xhtml+xml","text/html"],zt="text/html",lt=null,kn=be.createElement("form"),hn=function(o){return o instanceof RegExp||o instanceof Function},$t=function(o){lt&&lt===o||(o&&g(o)==="object"||(o={}),o=$(o),Ee="ALLOWED_TAGS"in o?u({},o.ALLOWED_TAGS):an,Ie="ALLOWED_ATTR"in o?u({},o.ALLOWED_ATTR):Pt,Ut="ADD_URI_SAFE_ATTR"in o?u($(un),o.ADD_URI_SAFE_ATTR):un,Ht="ADD_DATA_URI_TAGS"in o?u($(Ve),o.ADD_DATA_URI_TAGS):Ve,ct="FORBID_CONTENTS"in o?u({},o.FORBID_CONTENTS):ln,rt="FORBID_TAGS"in o?u({},o.FORBID_TAGS):{},Nt="FORBID_ATTR"in o?u({},o.FORBID_ATTR):{},Je="USE_PROFILES"in o&&o.USE_PROFILES,sn=o.ALLOW_ARIA_ATTR!==!1,Rt=o.ALLOW_DATA_ATTR!==!1,cn=o.ALLOW_UNKNOWN_PROTOCOLS||!1,it=o.SAFE_FOR_TEMPLATES||!1,ze=o.WHOLE_DOCUMENT||!1,at=o.RETURN_DOM||!1,St=o.RETURN_DOM_FRAGMENT||!1,ht=o.RETURN_TRUSTED_TYPE||!1,Mt=o.FORCE_BODY||!1,Dt=o.SANITIZE_DOM!==!1,st=o.KEEP_CONTENT!==!1,pt=o.IN_PLACE||!1,Ct=o.ALLOWED_URI_REGEXP||Ct,kt=o.NAMESPACE||Ze,o.CUSTOM_ELEMENT_HANDLING&&hn(o.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ae.tagNameCheck=o.CUSTOM_ELEMENT_HANDLING.tagNameCheck),o.CUSTOM_ELEMENT_HANDLING&&hn(o.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ae.attributeNameCheck=o.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),o.CUSTOM_ELEMENT_HANDLING&&typeof o.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Ae.allowCustomizedBuiltInElements=o.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),dt=dt=dn.indexOf(o.PARSER_MEDIA_TYPE)===-1?zt:o.PARSER_MEDIA_TYPE,Xe=dt==="application/xhtml+xml"?function(M){return M}:oe,it&&(Rt=!1),St&&(at=!0),Je&&(Ee=u({},S(Le)),Ie=[],Je.html===!0&&(u(Ee,Fe),u(Ie,_e)),Je.svg===!0&&(u(Ee,Ce),u(Ie,we),u(Ie,r)),Je.svgFilters===!0&&(u(Ee,te),u(Ie,we),u(Ie,r)),Je.mathMl===!0&&(u(Ee,Se),u(Ie,le),u(Ie,r))),o.ADD_TAGS&&(Ee===an&&(Ee=$(Ee)),u(Ee,o.ADD_TAGS)),o.ADD_ATTR&&(Ie===Pt&&(Ie=$(Ie)),u(Ie,o.ADD_ATTR)),o.ADD_URI_SAFE_ATTR&&u(Ut,o.ADD_URI_SAFE_ATTR),o.FORBID_CONTENTS&&(ct===ln&&(ct=$(ct)),u(ct,o.FORBID_CONTENTS)),st&&(Ee["#text"]=!0),ze&&u(Ee,["html","head","body"]),Ee.table&&(u(Ee,["tbody"]),delete rt.tbody),z&&z(o),lt=o)},$e=u({},["mi","mo","mn","ms","mtext"]),mt=u({},["foreignobject","desc","title","annotation-xml"]),pn=u({},["title","style","font","a","script"]),et=u({},Ce);u(et,te),u(et,de);var Bt=u({},Se);u(Bt,ke);var gn=function(o){var M=Ot(o);M&&M.tagName||(M={namespaceURI:Ze,tagName:"template"});var T=oe(o.tagName),ce=oe(M.tagName);return o.namespaceURI===qt?M.namespaceURI===Ze?T==="svg":M.namespaceURI===gt?T==="svg"&&(ce==="annotation-xml"||$e[ce]):Boolean(et[T]):o.namespaceURI===gt?M.namespaceURI===Ze?T==="math":M.namespaceURI===qt?T==="math"&&mt[ce]:Boolean(Bt[T]):o.namespaceURI===Ze&&!(M.namespaceURI===qt&&!mt[ce])&&!(M.namespaceURI===gt&&!$e[ce])&&!Bt[T]&&(pn[T]||!et[T])},Be=function(o){ne(B.removed,{element:o});try{o.parentNode.removeChild(o)}catch{try{o.outerHTML=tn}catch{o.remove()}}},Gt=function(o,M){try{ne(B.removed,{attribute:M.getAttributeNode(o),from:M})}catch{ne(B.removed,{attribute:null,from:M})}if(M.removeAttribute(o),o==="is"&&!Ie[o])if(at||St)try{Be(M)}catch{}else try{M.setAttribute(o,"")}catch{}},mn=function(o){var M,T;if(Mt)o="<remove></remove>"+o;else{var ce=fe(o,/^[\r\n\t ]+/);T=ce&&ce[0]}dt==="application/xhtml+xml"&&(o='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+o+"</body></html>");var xe=We?We.createHTML(o):o;if(kt===Ze)try{M=new Et().parseFromString(xe,dt)}catch{}if(!M||!M.documentElement){M=wt.createDocument(kt,"template",null);try{M.documentElement.innerHTML=fn?"":xe}catch{}}var t=M.body||M.documentElement;return o&&T&&t.insertBefore(be.createTextNode(T),t.childNodes[0]||null),kt===Ze?nn.call(M,ze?"html":"body")[0]:ze?M.documentElement:t},At=function(o){return ft.call(o.ownerDocument||o,o,Lt.SHOW_ELEMENT|Lt.SHOW_COMMENT|Lt.SHOW_TEXT,null,!1)},An=function(o){return o instanceof Kt&&(typeof o.nodeName!="string"||typeof o.textContent!="string"||typeof o.removeChild!="function"||!(o.attributes instanceof Tt)||typeof o.removeAttribute!="function"||typeof o.setAttribute!="function"||typeof o.namespaceURI!="string"||typeof o.insertBefore!="function")},yt=function(o){return g(Ye)==="object"?o instanceof Ye:o&&g(o)==="object"&&typeof o.nodeType=="number"&&typeof o.nodeName=="string"},Re=function(o,M,T){He[o]&&w(He[o],function(ce){ce.call(B,M,T,lt)})},bt=function(o){var M;if(Re("beforeSanitizeElements",o,null),An(o)||me(/[\u0080-\uFFFF]/,o.nodeName))return Be(o),!0;var T=Xe(o.nodeName);if(Re("uponSanitizeElement",o,{tagName:T,allowedTags:Ee}),o.hasChildNodes()&&!yt(o.firstElementChild)&&(!yt(o.content)||!yt(o.content.firstElementChild))&&me(/<[/\w]/g,o.innerHTML)&&me(/<[/\w]/g,o.textContent)||T==="select"&&me(/<template/i,o.innerHTML))return Be(o),!0;if(!Ee[T]||rt[T]){if(!rt[T]&&Wt(T)&&(Ae.tagNameCheck instanceof RegExp&&me(Ae.tagNameCheck,T)||Ae.tagNameCheck instanceof Function&&Ae.tagNameCheck(T)))return!1;if(st&&!ct[T]){var ce=Ot(o)||o.parentNode,xe=wn(o)||o.childNodes;if(xe&&ce)for(var t=xe.length-1;t>=0;--t)ce.insertBefore(Xt(xe[t],!0),en(o))}return Be(o),!0}return o instanceof Qt&&!gn(o)?(Be(o),!0):T!=="noscript"&&T!=="noembed"||!me(/<\/no(script|embed)/i,o.innerHTML)?(it&&o.nodeType===3&&(M=o.textContent,M=ge(M,jt," "),M=ge(M,xt," "),o.textContent!==M&&(ne(B.removed,{element:o.cloneNode()}),o.textContent=M)),Re("afterSanitizeElements",o,null),!1):(Be(o),!0)},yn=function(o,M,T){if(Dt&&(M==="id"||M==="name")&&(T in be||T in kn))return!1;if(!(Rt&&!Nt[M]&&me(xn,M))){if(!(sn&&me(Cn,M))){if(!Ie[M]||Nt[M]){if(!(Wt(o)&&(Ae.tagNameCheck instanceof RegExp&&me(Ae.tagNameCheck,o)||Ae.tagNameCheck instanceof Function&&Ae.tagNameCheck(o))&&(Ae.attributeNameCheck instanceof RegExp&&me(Ae.attributeNameCheck,M)||Ae.attributeNameCheck instanceof Function&&Ae.attributeNameCheck(M))||M==="is"&&Ae.allowCustomizedBuiltInElements&&(Ae.tagNameCheck instanceof RegExp&&me(Ae.tagNameCheck,T)||Ae.tagNameCheck instanceof Function&&Ae.tagNameCheck(T))))return!1}else if(!Ut[M]){if(!me(Ct,ge(T,on,""))){if((M!=="src"&&M!=="xlink:href"&&M!=="href"||o==="script"||Ne(T,"data:")!==0||!Ht[o])&&!(cn&&!me(Sn,ge(T,on,"")))){if(T)return!1}}}}}return!0},Wt=function(o){return o.indexOf("-")>0},bn=function(o){var M,T,ce,xe;Re("beforeSanitizeAttributes",o,null);var t=o.attributes;if(t){var e={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Ie};for(xe=t.length;xe--;){var n=M=t[xe],a=n.name,d=n.namespaceURI;if(T=a==="value"?M.value:Te(M.value),ce=Xe(a),e.attrName=ce,e.attrValue=T,e.keepAttr=!0,e.forceKeepAttr=void 0,Re("uponSanitizeAttribute",o,e),T=e.attrValue,!e.forceKeepAttr&&(Gt(a,o),e.keepAttr))if(me(/\/>/i,T))Gt(a,o);else{it&&(T=ge(T,jt," "),T=ge(T,xt," "));var v=Xe(o.nodeName);if(yn(v,ce,T))try{d?o.setAttributeNS(d,a,T):o.setAttribute(a,T),P(B.removed)}catch{}}}Re("afterSanitizeAttributes",o,null)}},Ln=function o(M){var T,ce=At(M);for(Re("beforeSanitizeShadowDOM",M,null);T=ce.nextNode();)Re("uponSanitizeShadowNode",T,null),bt(T)||(T.content instanceof De&&o(T.content),bn(T));Re("afterSanitizeShadowDOM",M,null)};return B.sanitize=function(o,M){var T,ce,xe,t,e;if((fn=!o)&&(o="<!-->"),typeof o!="string"&&!yt(o)){if(typeof o.toString!="function")throw Ge("toString is not a function");if(typeof(o=o.toString())!="string")throw Ge("dirty is not a string, aborting")}if(!B.isSupported){if(g(E.toStaticHTML)==="object"||typeof E.toStaticHTML=="function"){if(typeof o=="string")return E.toStaticHTML(o);if(yt(o))return E.toStaticHTML(o.outerHTML)}return o}if(ot||$t(M),B.removed=[],typeof o=="string"&&(pt=!1),pt){if(o.nodeName){var n=Xe(o.nodeName);if(!Ee[n]||rt[n])throw Ge("root node is forbidden and cannot be sanitized in-place")}}else if(o instanceof Ye)(ce=(T=mn("<!---->")).ownerDocument.importNode(o,!0)).nodeType===1&&ce.nodeName==="BODY"||ce.nodeName==="HTML"?T=ce:T.appendChild(ce);else{if(!at&&!it&&!ze&&o.indexOf("<")===-1)return We&&ht?We.createHTML(o):o;if(!(T=mn(o)))return at?null:ht?tn:""}T&&Mt&&Be(T.firstChild);for(var a=At(pt?o:T);xe=a.nextNode();)xe.nodeType===3&&xe===t||bt(xe)||(xe.content instanceof De&&Ln(xe.content),bn(xe),t=xe);if(t=null,pt)return o;if(at){if(St)for(e=Ft.call(T.ownerDocument);T.firstChild;)e.appendChild(T.firstChild);else e=T;return Ie.shadowroot&&(e=rn.call(ae,e,!0)),e}var d=ze?T.outerHTML:T.innerHTML;return ze&&Ee["!doctype"]&&T.ownerDocument&&T.ownerDocument.doctype&&T.ownerDocument.doctype.name&&me(ye,T.ownerDocument.doctype.name)&&(d="<!DOCTYPE "+T.ownerDocument.doctype.name+`>
`+d),it&&(d=ge(d,jt," "),d=ge(d,xt," ")),We&&ht?We.createHTML(d):d},B.setConfig=function(o){$t(o),ot=!0},B.clearConfig=function(){lt=null,ot=!1},B.isValidAttribute=function(o,M,T){lt||$t({});var ce=Xe(o),xe=Xe(M);return yn(ce,xe,T)},B.addHook=function(o,M){typeof M=="function"&&(He[o]=He[o]||[],ne(He[o],M))},B.removeHook=function(o){if(He[o])return P(He[o])},B.removeHooks=function(o){He[o]&&(He[o]=[])},B.removeAllHooks=function(){He={}},B}()}()},729:U=>{var g=Object.prototype.hasOwnProperty,j="~";function p(){}function y(b,A,L){this.fn=b,this.context=A,this.once=L||!1}function S(b,A,L,X,z){if(typeof L!="function")throw new TypeError("The listener must be a function");var q=new y(L,X||b,z),ee=j?j+A:A;return b._events[ee]?b._events[ee].fn?b._events[ee]=[b._events[ee],q]:b._events[ee].push(q):(b._events[ee]=q,b._eventsCount++),b}function W(b,A){--b._eventsCount==0?b._events=new p:delete b._events[A]}function C(){this._events=new p,this._eventsCount=0}Object.create&&(p.prototype=Object.create(null),new p().__proto__||(j=!1)),C.prototype.eventNames=function(){var b,A,L=[];if(this._eventsCount===0)return L;for(A in b=this._events)g.call(b,A)&&L.push(j?A.slice(1):A);return Object.getOwnPropertySymbols?L.concat(Object.getOwnPropertySymbols(b)):L},C.prototype.listeners=function(b){var A=j?j+b:b,L=this._events[A];if(!L)return[];if(L.fn)return[L.fn];for(var X=0,z=L.length,q=new Array(z);X<z;X++)q[X]=L[X].fn;return q},C.prototype.listenerCount=function(b){var A=j?j+b:b,L=this._events[A];return L?L.fn?1:L.length:0},C.prototype.emit=function(b,A,L,X,z,q){var ee=j?j+b:b;if(!this._events[ee])return!1;var D,Q,c=this._events[ee],f=arguments.length;if(c.fn){switch(c.once&&this.removeListener(b,c.fn,void 0,!0),f){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,A),!0;case 3:return c.fn.call(c.context,A,L),!0;case 4:return c.fn.call(c.context,A,L,X),!0;case 5:return c.fn.call(c.context,A,L,X,z),!0;case 6:return c.fn.call(c.context,A,L,X,z,q),!0}for(Q=1,D=new Array(f-1);Q<f;Q++)D[Q-1]=arguments[Q];c.fn.apply(c.context,D)}else{var w,P=c.length;for(Q=0;Q<P;Q++)switch(c[Q].once&&this.removeListener(b,c[Q].fn,void 0,!0),f){case 1:c[Q].fn.call(c[Q].context);break;case 2:c[Q].fn.call(c[Q].context,A);break;case 3:c[Q].fn.call(c[Q].context,A,L);break;case 4:c[Q].fn.call(c[Q].context,A,L,X);break;default:if(!D)for(w=1,D=new Array(f-1);w<f;w++)D[w-1]=arguments[w];c[Q].fn.apply(c[Q].context,D)}}return!0},C.prototype.on=function(b,A,L){return S(this,b,A,L,!1)},C.prototype.once=function(b,A,L){return S(this,b,A,L,!0)},C.prototype.removeListener=function(b,A,L,X){var z=j?j+b:b;if(!this._events[z])return this;if(!A)return W(this,z),this;var q=this._events[z];if(q.fn)q.fn!==A||X&&!q.once||L&&q.context!==L||W(this,z);else{for(var ee=0,D=[],Q=q.length;ee<Q;ee++)(q[ee].fn!==A||X&&!q[ee].once||L&&q[ee].context!==L)&&D.push(q[ee]);D.length?this._events[z]=D.length===1?D[0]:D:W(this,z)}return this},C.prototype.removeAllListeners=function(b){var A;return b?(A=j?j+b:b,this._events[A]&&W(this,A)):(this._events=new p,this._eventsCount=0),this},C.prototype.off=C.prototype.removeListener,C.prototype.addListener=C.prototype.on,C.prefixed=j,C.EventEmitter=C,U.exports=C},824:U=>{var g=1e3,j=60*g,p=60*j,y=24*p;function S(W,C,b,A){var L=C>=1.5*b;return Math.round(W/b)+" "+A+(L?"s":"")}U.exports=function(W,C){C=C||{};var b,A,L=typeof W;if(L==="string"&&W.length>0)return function(X){if(!((X=String(X)).length>100)){var z=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(X);if(z){var q=parseFloat(z[1]);switch((z[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*q;case"weeks":case"week":case"w":return 6048e5*q;case"days":case"day":case"d":return q*y;case"hours":case"hour":case"hrs":case"hr":case"h":return q*p;case"minutes":case"minute":case"mins":case"min":case"m":return q*j;case"seconds":case"second":case"secs":case"sec":case"s":return q*g;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return q;default:return}}}}(W);if(L==="number"&&isFinite(W))return C.long?(b=W,(A=Math.abs(b))>=y?S(b,A,y,"day"):A>=p?S(b,A,p,"hour"):A>=j?S(b,A,j,"minute"):A>=g?S(b,A,g,"second"):b+" ms"):function(X){var z=Math.abs(X);return z>=y?Math.round(X/y)+"d":z>=p?Math.round(X/p)+"h":z>=j?Math.round(X/j)+"m":z>=g?Math.round(X/g)+"s":X+"ms"}(W);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(W))}},520:(U,g,j)=>{var p=j(155),y=p.platform==="win32",S=j(539);function W(c,f){for(var w=[],P=0;P<c.length;P++){var ne=c[P];ne&&ne!=="."&&(ne===".."?w.length&&w[w.length-1]!==".."?w.pop():f&&w.push(".."):w.push(ne))}return w}function C(c){for(var f=c.length-1,w=0;w<=f&&!c[w];w++);for(var P=f;P>=0&&!c[P];P--);return w===0&&P===f?c:w>P?[]:c.slice(w,P+1)}var b=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,A=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,L={};function X(c){var f=b.exec(c),w=(f[1]||"")+(f[2]||""),P=f[3]||"",ne=A.exec(P);return[w,ne[1],ne[2],ne[3]]}function z(c){var f=b.exec(c),w=f[1]||"",P=!!w&&w[1]!==":";return{device:w,isUnc:P,isAbsolute:P||!!f[2],tail:f[3]}}function q(c){return"\\\\"+c.replace(/^[\\\/]+/,"").replace(/[\\\/]+/g,"\\")}L.resolve=function(){for(var c="",f="",w=!1,P=arguments.length-1;P>=-1;P--){var ne;if(P>=0?ne=arguments[P]:c?(ne=p.env["="+c])&&ne.substr(0,3).toLowerCase()===c.toLowerCase()+"\\"||(ne=c+"\\"):ne=p.cwd(),!S.isString(ne))throw new TypeError("Arguments to path.resolve must be strings");if(ne){var oe=z(ne),fe=oe.device,ge=oe.isUnc,Ne=oe.isAbsolute,Te=oe.tail;if((!fe||!c||fe.toLowerCase()===c.toLowerCase())&&(c||(c=fe),w||(f=Te+"\\"+f,w=Ne),c&&w))break}}return ge&&(c=q(c)),c+(w?"\\":"")+(f=W(f.split(/[\\\/]+/),!w).join("\\"))||"."},L.normalize=function(c){var f=z(c),w=f.device,P=f.isUnc,ne=f.isAbsolute,oe=f.tail,fe=/[\\\/]$/.test(oe);return(oe=W(oe.split(/[\\\/]+/),!ne).join("\\"))||ne||(oe="."),oe&&fe&&(oe+="\\"),P&&(w=q(w)),w+(ne?"\\":"")+oe},L.isAbsolute=function(c){return z(c).isAbsolute},L.join=function(){for(var c=[],f=0;f<arguments.length;f++){var w=arguments[f];if(!S.isString(w))throw new TypeError("Arguments to path.join must be strings");w&&c.push(w)}var P=c.join("\\");return/^[\\\/]{2}[^\\\/]/.test(c[0])||(P=P.replace(/^[\\\/]{2,}/,"\\")),L.normalize(P)},L.relative=function(c,f){c=L.resolve(c),f=L.resolve(f);for(var w=c.toLowerCase(),P=f.toLowerCase(),ne=C(f.split("\\")),oe=C(w.split("\\")),fe=C(P.split("\\")),ge=Math.min(oe.length,fe.length),Ne=ge,Te=0;Te<ge;Te++)if(oe[Te]!==fe[Te]){Ne=Te;break}if(Ne==0)return f;var me=[];for(Te=Ne;Te<oe.length;Te++)me.push("..");return(me=me.concat(ne.slice(Ne))).join("\\")},L._makeLong=function(c){if(!S.isString(c))return c;if(!c)return"";var f=L.resolve(c);return/^[a-zA-Z]\:\\/.test(f)?"\\\\?\\"+f:/^\\\\[^?.]/.test(f)?"\\\\?\\UNC\\"+f.substring(2):c},L.dirname=function(c){var f=X(c),w=f[0],P=f[1];return w||P?(P&&(P=P.substr(0,P.length-1)),w+P):"."},L.basename=function(c,f){var w=X(c)[2];return f&&w.substr(-1*f.length)===f&&(w=w.substr(0,w.length-f.length)),w},L.extname=function(c){return X(c)[3]},L.format=function(c){if(!S.isObject(c))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof c);var f=c.root||"";if(!S.isString(f))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof c.root);var w=c.dir,P=c.base||"";return w?w[w.length-1]===L.sep?w+P:w+L.sep+P:P},L.parse=function(c){if(!S.isString(c))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof c);var f=X(c);if(!f||f.length!==4)throw new TypeError("Invalid path '"+c+"'");return{root:f[0],dir:f[0]+f[1].slice(0,-1),base:f[2],ext:f[3],name:f[2].slice(0,f[2].length-f[3].length)}},L.sep="\\",L.delimiter=";";var ee=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,D={};function Q(c){return ee.exec(c).slice(1)}D.resolve=function(){for(var c="",f=!1,w=arguments.length-1;w>=-1&&!f;w--){var P=w>=0?arguments[w]:p.cwd();if(!S.isString(P))throw new TypeError("Arguments to path.resolve must be strings");P&&(c=P+"/"+c,f=P[0]==="/")}return(f?"/":"")+(c=W(c.split("/"),!f).join("/"))||"."},D.normalize=function(c){var f=D.isAbsolute(c),w=c&&c[c.length-1]==="/";return(c=W(c.split("/"),!f).join("/"))||f||(c="."),c&&w&&(c+="/"),(f?"/":"")+c},D.isAbsolute=function(c){return c.charAt(0)==="/"},D.join=function(){for(var c="",f=0;f<arguments.length;f++){var w=arguments[f];if(!S.isString(w))throw new TypeError("Arguments to path.join must be strings");w&&(c+=c?"/"+w:w)}return D.normalize(c)},D.relative=function(c,f){c=D.resolve(c).substr(1),f=D.resolve(f).substr(1);for(var w=C(c.split("/")),P=C(f.split("/")),ne=Math.min(w.length,P.length),oe=ne,fe=0;fe<ne;fe++)if(w[fe]!==P[fe]){oe=fe;break}var ge=[];for(fe=oe;fe<w.length;fe++)ge.push("..");return(ge=ge.concat(P.slice(oe))).join("/")},D._makeLong=function(c){return c},D.dirname=function(c){var f=Q(c),w=f[0],P=f[1];return w||P?(P&&(P=P.substr(0,P.length-1)),w+P):"."},D.basename=function(c,f){var w=Q(c)[2];return f&&w.substr(-1*f.length)===f&&(w=w.substr(0,w.length-f.length)),w},D.extname=function(c){return Q(c)[3]},D.format=function(c){if(!S.isObject(c))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof c);var f=c.root||"";if(!S.isString(f))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof c.root);return(c.dir?c.dir+D.sep:"")+(c.base||"")},D.parse=function(c){if(!S.isString(c))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof c);var f=Q(c);if(!f||f.length!==4)throw new TypeError("Invalid path '"+c+"'");return f[1]=f[1]||"",f[2]=f[2]||"",f[3]=f[3]||"",{root:f[0],dir:f[0]+f[1].slice(0,-1),base:f[2],ext:f[3],name:f[2].slice(0,f[2].length-f[3].length)}},D.sep="/",D.delimiter=":",U.exports=y?L:D,U.exports.posix=D,U.exports.win32=L},155:U=>{var g,j,p=U.exports={};function y(){throw new Error("setTimeout has not been defined")}function S(){throw new Error("clearTimeout has not been defined")}function W(D){if(g===setTimeout)return setTimeout(D,0);if((g===y||!g)&&setTimeout)return g=setTimeout,setTimeout(D,0);try{return g(D,0)}catch{try{return g.call(null,D,0)}catch{return g.call(this,D,0)}}}(function(){try{g=typeof setTimeout=="function"?setTimeout:y}catch{g=y}try{j=typeof clearTimeout=="function"?clearTimeout:S}catch{j=S}})();var C,b=[],A=!1,L=-1;function X(){A&&C&&(A=!1,C.length?b=C.concat(b):L=-1,b.length&&z())}function z(){if(!A){var D=W(X);A=!0;for(var Q=b.length;Q;){for(C=b,b=[];++L<Q;)C&&C[L].run();L=-1,Q=b.length}C=null,A=!1,function(c){if(j===clearTimeout)return clearTimeout(c);if((j===S||!j)&&clearTimeout)return j=clearTimeout,clearTimeout(c);try{j(c)}catch{try{return j.call(null,c)}catch{return j.call(this,c)}}}(D)}}function q(D,Q){this.fun=D,this.array=Q}function ee(){}p.nextTick=function(D){var Q=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)Q[c-1]=arguments[c];b.push(new q(D,Q)),b.length!==1||A||W(z)},q.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=ee,p.addListener=ee,p.once=ee,p.off=ee,p.removeListener=ee,p.removeAllListeners=ee,p.emit=ee,p.prependListener=ee,p.prependOnceListener=ee,p.listeners=function(D){return[]},p.binding=function(D){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(D){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},496:U=>{typeof Object.create=="function"?U.exports=function(g,j){g.super_=j,g.prototype=Object.create(j.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}})}:U.exports=function(g,j){g.super_=j;var p=function(){};p.prototype=j.prototype,g.prototype=new p,g.prototype.constructor=g}},384:U=>{U.exports=function(g){return g&&typeof g=="object"&&typeof g.copy=="function"&&typeof g.fill=="function"&&typeof g.readUInt8=="function"}},539:(U,g,j)=>{var p=j(155),y=/%[sdj%]/g;g.format=function(m){if(!c(m)){for(var u=[],$=0;$<arguments.length;$++)u.push(C(arguments[$]));return u.join(" ")}$=1;for(var re=arguments,Fe=re.length,Ce=String(m).replace(y,function(de){if(de==="%%")return"%";if($>=Fe)return de;switch(de){case"%s":return String(re[$++]);case"%d":return Number(re[$++]);case"%j":try{return JSON.stringify(re[$++])}catch{return"[Circular]"}default:return de}}),te=re[$];$<Fe;te=re[++$])D(te)||!P(te)?Ce+=" "+te:Ce+=" "+C(te);return Ce},g.deprecate=function(m,u){if(f(j.g.process))return function(){return g.deprecate(m,u).apply(this,arguments)};if(p.noDeprecation===!0)return m;var $=!1;return function(){if(!$){if(p.throwDeprecation)throw new Error(u);p.traceDeprecation?console.trace(u):console.error(u),$=!0}return m.apply(this,arguments)}};var S,W={};function C(m,u){var $={seen:[],stylize:A};return arguments.length>=3&&($.depth=arguments[2]),arguments.length>=4&&($.colors=arguments[3]),ee(u)?$.showHidden=u:u&&g._extend($,u),f($.showHidden)&&($.showHidden=!1),f($.depth)&&($.depth=2),f($.colors)&&($.colors=!1),f($.customInspect)&&($.customInspect=!0),$.colors&&($.stylize=b),L($,m,$.depth)}function b(m,u){var $=C.styles[u];return $?"\x1B["+C.colors[$][0]+"m"+m+"\x1B["+C.colors[$][1]+"m":m}function A(m,u){return m}function L(m,u,$){if(m.customInspect&&u&&fe(u.inspect)&&u.inspect!==g.inspect&&(!u.constructor||u.constructor.prototype!==u)){var re=u.inspect($,m);return c(re)||(re=L(m,re,$)),re}var Fe=function(we,le){if(f(le))return we.stylize("undefined","undefined");if(c(le)){var r="'"+JSON.stringify(le).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return we.stylize(r,"string")}return Q(le)?we.stylize(""+le,"number"):ee(le)?we.stylize(""+le,"boolean"):D(le)?we.stylize("null","null"):void 0}(m,u);if(Fe)return Fe;var Ce=Object.keys(u),te=function(we){var le={};return we.forEach(function(r,s){le[r]=!0}),le}(Ce);if(m.showHidden&&(Ce=Object.getOwnPropertyNames(u)),oe(u)&&(Ce.indexOf("message")>=0||Ce.indexOf("description")>=0))return X(u);if(Ce.length===0){if(fe(u)){var de=u.name?": "+u.name:"";return m.stylize("[Function"+de+"]","special")}if(w(u))return m.stylize(RegExp.prototype.toString.call(u),"regexp");if(ne(u))return m.stylize(Date.prototype.toString.call(u),"date");if(oe(u))return X(u)}var Se,ke="",Le=!1,_e=["{","}"];return q(u)&&(Le=!0,_e=["[","]"]),fe(u)&&(ke=" [Function"+(u.name?": "+u.name:"")+"]"),w(u)&&(ke=" "+RegExp.prototype.toString.call(u)),ne(u)&&(ke=" "+Date.prototype.toUTCString.call(u)),oe(u)&&(ke=" "+X(u)),Ce.length!==0||Le&&u.length!=0?$<0?w(u)?m.stylize(RegExp.prototype.toString.call(u),"regexp"):m.stylize("[Object]","special"):(m.seen.push(u),Se=Le?function(we,le,r,s,i){for(var _=[],N=0,R=le.length;N<R;++N)Ge(le,String(N))?_.push(z(we,le,r,s,String(N),!0)):_.push("");return i.forEach(function(ie){ie.match(/^\d+$/)||_.push(z(we,le,r,s,ie,!0))}),_}(m,u,$,te,Ce):Ce.map(function(we){return z(m,u,$,te,we,Le)}),m.seen.pop(),function(we,le,r){return we.reduce(function(s,i){return i.indexOf(`
`),s+i.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?r[0]+(le===""?"":le+`
 `)+" "+we.join(`,
  `)+" "+r[1]:r[0]+le+" "+we.join(", ")+" "+r[1]}(Se,ke,_e)):_e[0]+ke+_e[1]}function X(m){return"["+Error.prototype.toString.call(m)+"]"}function z(m,u,$,re,Fe,Ce){var te,de,Se;if((Se=Object.getOwnPropertyDescriptor(u,Fe)||{value:u[Fe]}).get?de=Se.set?m.stylize("[Getter/Setter]","special"):m.stylize("[Getter]","special"):Se.set&&(de=m.stylize("[Setter]","special")),Ge(re,Fe)||(te="["+Fe+"]"),de||(m.seen.indexOf(Se.value)<0?(de=D($)?L(m,Se.value,null):L(m,Se.value,$-1)).indexOf(`
`)>-1&&(de=Ce?de.split(`
`).map(function(ke){return"  "+ke}).join(`
`).substr(2):`
`+de.split(`
`).map(function(ke){return"   "+ke}).join(`
`)):de=m.stylize("[Circular]","special")),f(te)){if(Ce&&Fe.match(/^\d+$/))return de;(te=JSON.stringify(""+Fe)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(te=te.substr(1,te.length-2),te=m.stylize(te,"name")):(te=te.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),te=m.stylize(te,"string"))}return te+": "+de}function q(m){return Array.isArray(m)}function ee(m){return typeof m=="boolean"}function D(m){return m===null}function Q(m){return typeof m=="number"}function c(m){return typeof m=="string"}function f(m){return m===void 0}function w(m){return P(m)&&ge(m)==="[object RegExp]"}function P(m){return typeof m=="object"&&m!==null}function ne(m){return P(m)&&ge(m)==="[object Date]"}function oe(m){return P(m)&&(ge(m)==="[object Error]"||m instanceof Error)}function fe(m){return typeof m=="function"}function ge(m){return Object.prototype.toString.call(m)}function Ne(m){return m<10?"0"+m.toString(10):m.toString(10)}g.debuglog=function(m){if(f(S)&&(S=p.env.NODE_DEBUG||""),m=m.toUpperCase(),!W[m])if(new RegExp("\\b"+m+"\\b","i").test(S)){var u=p.pid;W[m]=function(){var $=g.format.apply(g,arguments);console.error("%s %d: %s",m,u,$)}}else W[m]=function(){};return W[m]},g.inspect=C,C.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},C.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},g.isArray=q,g.isBoolean=ee,g.isNull=D,g.isNullOrUndefined=function(m){return m==null},g.isNumber=Q,g.isString=c,g.isSymbol=function(m){return typeof m=="symbol"},g.isUndefined=f,g.isRegExp=w,g.isObject=P,g.isDate=ne,g.isError=oe,g.isFunction=fe,g.isPrimitive=function(m){return m===null||typeof m=="boolean"||typeof m=="number"||typeof m=="string"||typeof m=="symbol"||m===void 0},g.isBuffer=j(384);var Te=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function me(){var m=new Date,u=[Ne(m.getHours()),Ne(m.getMinutes()),Ne(m.getSeconds())].join(":");return[m.getDate(),Te[m.getMonth()],u].join(" ")}function Ge(m,u){return Object.prototype.hasOwnProperty.call(m,u)}g.log=function(){console.log("%s - %s",me(),g.format.apply(g,arguments))},g.inherits=j(496),g._extend=function(m,u){if(!u||!P(u))return m;for(var $=Object.keys(u),re=$.length;re--;)m[$[re]]=u[$[re]];return m}}},J={};function O(U){var g=J[U];if(g!==void 0)return g.exports;var j=J[U]={exports:{}};return k[U].call(j.exports,j,j.exports,O),j.exports}O.n=U=>{var g=U&&U.__esModule?()=>U.default:()=>U;return O.d(g,{a:g}),g},O.d=(U,g)=>{for(var j in g)O.o(g,j)&&!O.o(U,j)&&Object.defineProperty(U,j,{enumerable:!0,get:g[j]})},O.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),O.o=(U,g)=>Object.prototype.hasOwnProperty.call(U,g),O.r=U=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(U,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(U,"__esModule",{value:!0})};var F={};return(()=>{O.r(F),O.d(F,{LSPluginUser:()=>ce,setupPluginUserInstance:()=>xe});var U=O(520);O(856);const g=function(t,e){return t===e||t!=t&&e!=e},j=function(t,e){for(var n=t.length;n--;)if(g(t[n][0],e))return n;return-1};var p=Array.prototype.splice;function y(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var a=t[e];this.set(a[0],a[1])}}y.prototype.clear=function(){this.__data__=[],this.size=0},y.prototype.delete=function(t){var e=this.__data__,n=j(e,t);return!(n<0||(n==e.length-1?e.pop():p.call(e,n,1),--this.size,0))},y.prototype.get=function(t){var e=this.__data__,n=j(e,t);return n<0?void 0:e[n][1]},y.prototype.has=function(t){return j(this.__data__,t)>-1},y.prototype.set=function(t,e){var n=this.__data__,a=j(n,t);return a<0?(++this.size,n.push([t,e])):n[a][1]=e,this};const S=y,W=typeof Vt=="object"&&Vt&&Vt.Object===Object&&Vt;var C=typeof self=="object"&&self&&self.Object===Object&&self;const b=W||C||Function("return this")(),A=b.Symbol;var L=Object.prototype,X=L.hasOwnProperty,z=L.toString,q=A?A.toStringTag:void 0,ee=Object.prototype.toString,D=A?A.toStringTag:void 0;const Q=function(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":D&&D in Object(t)?function(e){var n=X.call(e,q),a=e[q];try{e[q]=void 0;var d=!0}catch{}var v=z.call(e);return d&&(n?e[q]=a:delete e[q]),v}(t):function(e){return ee.call(e)}(t)},c=function(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")},f=function(t){if(!c(t))return!1;var e=Q(t);return e=="[object Function]"||e=="[object GeneratorFunction]"||e=="[object AsyncFunction]"||e=="[object Proxy]"},w=b["__core-js_shared__"];var P,ne=(P=/[^.]+$/.exec(w&&w.keys&&w.keys.IE_PROTO||""))?"Symbol(src)_1."+P:"",oe=Function.prototype.toString,fe=/^\[object .+?Constructor\]$/,ge=Function.prototype,Ne=Object.prototype,Te=ge.toString,me=Ne.hasOwnProperty,Ge=RegExp("^"+Te.call(me).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const m=function(t){return!(!c(t)||(e=t,ne&&ne in e))&&(f(t)?Ge:fe).test(function(n){if(n!=null){try{return oe.call(n)}catch{}try{return n+""}catch{}}return""}(t));var e},u=function(t,e){var n=function(a,d){return a?.[d]}(t,e);return m(n)?n:void 0},$=u(b,"Map"),re=u(Object,"create");var Fe=Object.prototype.hasOwnProperty,Ce=Object.prototype.hasOwnProperty;function te(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var a=t[e];this.set(a[0],a[1])}}te.prototype.clear=function(){this.__data__=re?re(null):{},this.size=0},te.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},te.prototype.get=function(t){var e=this.__data__;if(re){var n=e[t];return n==="__lodash_hash_undefined__"?void 0:n}return Fe.call(e,t)?e[t]:void 0},te.prototype.has=function(t){var e=this.__data__;return re?e[t]!==void 0:Ce.call(e,t)},te.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=re&&e===void 0?"__lodash_hash_undefined__":e,this};const de=te,Se=function(t,e){var n,a,d=t.__data__;return((a=typeof(n=e))=="string"||a=="number"||a=="symbol"||a=="boolean"?n!=="__proto__":n===null)?d[typeof e=="string"?"string":"hash"]:d.map};function ke(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var a=t[e];this.set(a[0],a[1])}}ke.prototype.clear=function(){this.size=0,this.__data__={hash:new de,map:new($||S),string:new de}},ke.prototype.delete=function(t){var e=Se(this,t).delete(t);return this.size-=e?1:0,e},ke.prototype.get=function(t){return Se(this,t).get(t)},ke.prototype.has=function(t){return Se(this,t).has(t)},ke.prototype.set=function(t,e){var n=Se(this,t),a=n.size;return n.set(t,e),this.size+=n.size==a?0:1,this};const Le=ke;function _e(t){var e=this.__data__=new S(t);this.size=e.size}_e.prototype.clear=function(){this.__data__=new S,this.size=0},_e.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},_e.prototype.get=function(t){return this.__data__.get(t)},_e.prototype.has=function(t){return this.__data__.has(t)},_e.prototype.set=function(t,e){var n=this.__data__;if(n instanceof S){var a=n.__data__;if(!$||a.length<199)return a.push([t,e]),this.size=++n.size,this;n=this.__data__=new Le(a)}return n.set(t,e),this.size=n.size,this};const we=_e,le=function(){try{var t=u(Object,"defineProperty");return t({},"",{}),t}catch{}}(),r=function(t,e,n){e=="__proto__"&&le?le(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n},s=function(t,e,n){(n!==void 0&&!g(t[e],n)||n===void 0&&!(e in t))&&r(t,e,n)},i=function(t,e,n){for(var a=-1,d=Object(t),v=n(t),x=v.length;x--;){var H=v[++a];if(e(d[H],H,d)===!1)break}return t};var _=l&&!l.nodeType&&l,N=_&&!0&&h&&!h.nodeType&&h,R=N&&N.exports===_?b.Buffer:void 0,ie=R?R.allocUnsafe:void 0;const he=b.Uint8Array,ye=function(t,e){var n,a,d=e?(n=t.buffer,a=new n.constructor(n.byteLength),new he(a).set(new he(n)),a):t.buffer;return new t.constructor(d,t.byteOffset,t.length)};var je=Object.create;const Ke=function(){function t(){}return function(e){if(!c(e))return{};if(je)return je(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),Z=(E=Object.getPrototypeOf,B=Object,function(t){return E(B(t))});var E,B,ae=Object.prototype;const be=function(t){var e=t&&t.constructor;return t===(typeof e=="function"&&e.prototype||ae)},De=function(t){return t!=null&&typeof t=="object"},nt=function(t){return De(t)&&Q(t)=="[object Arguments]"};var Ye=Object.prototype,Qt=Ye.hasOwnProperty,Lt=Ye.propertyIsEnumerable;const vt=nt(function(){return arguments}())?nt:function(t){return De(t)&&Qt.call(t,"callee")&&!Lt.call(t,"callee")},Tt=Array.isArray,Kt=function(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=9007199254740991},Et=function(t){return t!=null&&Kt(t.length)&&!f(t)};var Yt=l&&!l.nodeType&&l,ut=Yt&&!0&&h&&!h.nodeType&&h,Xt=ut&&ut.exports===Yt?b.Buffer:void 0;const en=(Xt?Xt.isBuffer:void 0)||function(){return!1};var wn=Function.prototype,Ot=Object.prototype,_t=wn.toString,We=Ot.hasOwnProperty,tn=_t.call(Object),ue={};ue["[object Float32Array]"]=ue["[object Float64Array]"]=ue["[object Int8Array]"]=ue["[object Int16Array]"]=ue["[object Int32Array]"]=ue["[object Uint8Array]"]=ue["[object Uint8ClampedArray]"]=ue["[object Uint16Array]"]=ue["[object Uint32Array]"]=!0,ue["[object Arguments]"]=ue["[object Array]"]=ue["[object ArrayBuffer]"]=ue["[object Boolean]"]=ue["[object DataView]"]=ue["[object Date]"]=ue["[object Error]"]=ue["[object Function]"]=ue["[object Map]"]=ue["[object Number]"]=ue["[object Object]"]=ue["[object RegExp]"]=ue["[object Set]"]=ue["[object String]"]=ue["[object WeakMap]"]=!1;var wt=l&&!l.nodeType&&l,ft=wt&&!0&&h&&!h.nodeType&&h,Ft=ft&&ft.exports===wt&&W.process,nn=function(){try{return ft&&ft.require&&ft.require("util").types||Ft&&Ft.binding&&Ft.binding("util")}catch{}}(),rn=nn&&nn.isTypedArray;const It=rn?function(t){return function(e){return t(e)}}(rn):function(t){return De(t)&&Kt(t.length)&&!!ue[Q(t)]},He=function(t,e){if((e!=="constructor"||typeof t[e]!="function")&&e!="__proto__")return t[e]};var dt=Object.prototype.hasOwnProperty;const Xe=function(t,e,n){var a=t[e];dt.call(t,e)&&g(a,n)&&(n!==void 0||e in t)||r(t,e,n)};var jt=/^(?:0|[1-9]\d*)$/;const xt=function(t,e){var n=typeof t;return!!(e=e??9007199254740991)&&(n=="number"||n!="symbol"&&jt.test(t))&&t>-1&&t%1==0&&t<e};var xn=Object.prototype.hasOwnProperty;const Cn=function(t,e){var n=Tt(t),a=!n&&vt(t),d=!n&&!a&&en(t),v=!n&&!a&&!d&&It(t),x=n||a||d||v,H=x?function(K,Y){for(var se=-1,pe=Array(K);++se<K;)pe[se]=Y(se);return pe}(t.length,String):[],G=H.length;for(var I in t)!e&&!xn.call(t,I)||x&&(I=="length"||d&&(I=="offset"||I=="parent")||v&&(I=="buffer"||I=="byteLength"||I=="byteOffset")||xt(I,G))||H.push(I);return H};var Sn=Object.prototype.hasOwnProperty;const on=function(t){if(!c(t))return function(d){var v=[];if(d!=null)for(var x in Object(d))v.push(x);return v}(t);var e=be(t),n=[];for(var a in t)(a!="constructor"||!e&&Sn.call(t,a))&&n.push(a);return n},Ct=function(t){return Et(t)?Cn(t,!0):on(t)},Ee=function(t){return function(e,n,a,d){var v=!a;a||(a={});for(var x=-1,H=n.length;++x<H;){var G=n[x],I=d?d(a[G],e[G],G,a,e):void 0;I===void 0&&(I=e[G]),v?r(a,G,I):Xe(a,G,I)}return a}(t,Ct(t))},an=function(t,e,n,a,d,v,x){var H,G=He(t,n),I=He(e,n),K=x.get(I);if(K)s(t,n,K);else{var Y=v?v(G,I,n+"",t,e,x):void 0,se=Y===void 0;if(se){var pe=Tt(I),Pe=!pe&&en(I),tt=!pe&&!Pe&&It(I);Y=I,pe||Pe||tt?Tt(G)?Y=G:De(H=G)&&Et(H)?Y=function(ve,qe){var Ue=-1,Jt=ve.length;for(qe||(qe=Array(Jt));++Ue<Jt;)qe[Ue]=ve[Ue];return qe}(G):Pe?(se=!1,Y=function(ve,qe){if(qe)return ve.slice();var Ue=ve.length,Jt=ie?ie(Ue):new ve.constructor(Ue);return ve.copy(Jt),Jt}(I,!0)):tt?(se=!1,Y=ye(I,!0)):Y=[]:function(ve){if(!De(ve)||Q(ve)!="[object Object]")return!1;var qe=Z(ve);if(qe===null)return!0;var Ue=We.call(qe,"constructor")&&qe.constructor;return typeof Ue=="function"&&Ue instanceof Ue&&_t.call(Ue)==tn}(I)||vt(I)?(Y=G,vt(G)?Y=Ee(G):c(G)&&!f(G)||(Y=function(ve){return typeof ve.constructor!="function"||be(ve)?{}:Ke(Z(ve))}(I))):se=!1}se&&(x.set(I,Y),d(Y,I,a,v,x),x.delete(I)),s(t,n,Y)}},Ie=function t(e,n,a,d,v){e!==n&&i(n,function(x,H){if(v||(v=new we),c(x))an(e,n,H,a,t,d,v);else{var G=d?d(He(e,H),x,H+"",e,n,v):void 0;G===void 0&&(G=x),s(e,H,G)}},Ct)},Pt=function(t){return t},Ae=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)};var rt=Math.max;const Nt=le?function(t,e){return le(t,"toString",{configurable:!0,enumerable:!1,value:(n=e,function(){return n}),writable:!0});var n}:Pt;var sn=Date.now;const Rt=function(t){var e=0,n=0;return function(){var a=sn(),d=16-(a-n);if(n=a,d>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(Nt),cn=function(t,e){return Rt(function(n,a,d){return a=rt(a===void 0?n.length-1:a,0),function(){for(var v=arguments,x=-1,H=rt(v.length-a,0),G=Array(H);++x<H;)G[x]=v[a+x];x=-1;for(var I=Array(a+1);++x<a;)I[x]=v[x];return I[a]=d(G),Ae(n,this,I)}}(t,e,Pt),t+"")},it=(ze=function(t,e,n){Ie(t,e,n)},cn(function(t,e){var n=-1,a=e.length,d=a>1?e[a-1]:void 0,v=a>2?e[2]:void 0;for(d=ze.length>3&&typeof d=="function"?(a--,d):void 0,v&&function(H,G,I){if(!c(I))return!1;var K=typeof G;return!!(K=="number"?Et(I)&&xt(G,I.length):K=="string"&&G in I)&&g(I[G],H)}(e[0],e[1],v)&&(d=a<3?void 0:d,a=1),t=Object(t);++n<a;){var x=e[n];x&&ze(t,x,n)}return t}));var ze,ot=function(){return ot=Object.assign||function(t){for(var e,n=1,a=arguments.length;n<a;n++)for(var d in e=arguments[n])Object.prototype.hasOwnProperty.call(e,d)&&(t[d]=e[d]);return t},ot.apply(this,arguments)};function Mt(t){return t.toLowerCase()}var at=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],St=/[^A-Z0-9]+/gi;function ht(t,e,n){return e instanceof RegExp?t.replace(e,n):e.reduce(function(a,d){return a.replace(d,n)},t)}const Dt=navigator.platform.toLowerCase()==="win32"?U.win32:U.posix,st=function(t,e){return e===void 0&&(e={}),function(n,a){return a===void 0&&(a={}),function(d,v){v===void 0&&(v={});for(var x=v.splitRegexp,H=x===void 0?at:x,G=v.stripRegexp,I=G===void 0?St:G,K=v.transform,Y=K===void 0?Mt:K,se=v.delimiter,pe=se===void 0?" ":se,Pe=ht(ht(d,H,"$1\0$2"),I,"\0"),tt=0,ve=Pe.length;Pe.charAt(tt)==="\0";)tt++;for(;Pe.charAt(ve-1)==="\0";)ve--;return Pe.slice(tt,ve).split("\0").map(Y).join(pe)}(n,ot({delimiter:"."},a))}(t,ot({delimiter:"_"},e))},pt=it;function Je(t,e){let n,a,d=!1;const v=H=>G=>{t&&clearTimeout(t),H(G),d=!0},x=new Promise((H,G)=>{n=v(H),a=v(G),t&&(t=setTimeout(()=>a(new Error(`[deferred timeout] ${e}`)),t))});return{created:Date.now(),setTag:H=>e=H,resolve:n,reject:a,promise:x,get settled(){return d}}}const ct=new Map;window.__injectedUIEffects=ct;var ln=O(227),Ht=O.n(ln);const Ve="application/x-postmate-v1+json";let Ut=0;const un={handshake:1,"handshake-reply":1,call:1,emit:1,reply:1,request:1},gt=(t,e)=>!(typeof e=="string"&&t.origin!==e||!t.data||typeof t.data=="object"&&!("postmate"in t.data)||t.data.type!==Ve||!un[t.data.postmate]);class qt{parent;frame;child;events={};childOrigin;listener;constructor(e){this.parent=e.parent,this.frame=e.frame,this.child=e.child,this.childOrigin=e.childOrigin,this.listener=n=>{if(!gt(n,this.childOrigin))return!1;const{data:a,name:d}=((n||{}).data||{}).value||{};n.data.postmate==="emit"&&d in this.events&&this.events[d].forEach(v=>{v.call(this,a)})},this.parent.addEventListener("message",this.listener,!1)}get(e){return new Promise(n=>{const a=++Ut,d=v=>{v.data.uid===a&&v.data.postmate==="reply"&&(this.parent.removeEventListener("message",d,!1),n(v.data.value))};this.parent.addEventListener("message",d,!1),this.child.postMessage({postmate:"request",type:Ve,property:e,uid:a},this.childOrigin)})}call(e,n){this.child.postMessage({postmate:"call",type:Ve,property:e,data:n},this.childOrigin)}on(e,n){this.events[e]||(this.events[e]=[]),this.events[e].push(n)}destroy(){window.removeEventListener("message",this.listener,!1),this.frame.parentNode.removeChild(this.frame)}}class Ze{model;parent;parentOrigin;child;constructor(e){this.model=e.model,this.parent=e.parent,this.parentOrigin=e.parentOrigin,this.child=e.child,this.child.addEventListener("message",n=>{if(!gt(n,this.parentOrigin))return;const{property:a,uid:d,data:v}=n.data;n.data.postmate!=="call"?((x,H)=>{const G=typeof x[H]=="function"?x[H]():x[H];return Promise.resolve(G)})(this.model,a).then(x=>{n.source.postMessage({property:a,postmate:"reply",type:Ve,uid:d,value:x},n.origin)}):a in this.model&&typeof this.model[a]=="function"&&this.model[a](v)})}emit(e,n){this.parent.postMessage({postmate:"emit",type:Ve,value:{name:e,data:n}},this.parentOrigin)}}class kt{static debug=!1;container;parent;frame;child;childOrigin;url;model;static Model;constructor(e){this.container=e.container,this.url=e.url,this.parent=window,this.frame=document.createElement("iframe"),e.id&&(this.frame.id=e.id),e.name&&(this.frame.name=e.name),this.frame.classList.add.apply(this.frame.classList,e.classListArray||[]),this.container.appendChild(this.frame),this.child=this.frame.contentWindow,this.model=e.model||{}}sendHandshake(e){const n=(v=>{const x=document.createElement("a");x.href=v;const H=x.protocol.length>4?x.protocol:window.location.protocol,G=x.host.length?x.port==="80"||x.port==="443"?x.hostname:x.host:window.location.host;return x.origin||`${H}//${G}`})(e=e||this.url);let a,d=0;return new Promise((v,x)=>{const H=I=>!!gt(I,n)&&(I.data.postmate==="handshake-reply"?(clearInterval(a),this.parent.removeEventListener("message",H,!1),this.childOrigin=I.origin,v(new qt(this))):x("Failed handshake"));this.parent.addEventListener("message",H,!1);const G=()=>{d++,this.child.postMessage({postmate:"handshake",type:Ve,model:this.model},n),d===5&&clearInterval(a)};this.frame.addEventListener("load",()=>{G(),a=setInterval(G,500)}),this.frame.src=e})}destroy(){this.frame.parentNode.removeChild(this.frame)}}class fn{child;model;parent;parentOrigin;constructor(e){this.child=window,this.model=e,this.parent=this.child.parent}sendHandshakeReply(){return new Promise((e,n)=>{const a=d=>{if(d.data.postmate){if(d.data.postmate==="handshake"){this.child.removeEventListener("message",a,!1),d.source.postMessage({postmate:"handshake-reply",type:Ve},d.origin),this.parentOrigin=d.origin;const v=d.data.model;return v&&Object.keys(v).forEach(x=>{this.model[x]=v[x]}),e(new Ze(this))}return n("Handshake Reply Failed")}};this.child.addEventListener("message",a,!1)})}}var dn=O(729),zt=O.n(dn);const{importHTML:lt,createSandboxContainer:kn}=window.QSandbox||{};function hn(t,e){return t.startsWith("http")?fetch(t,e):(t=t.replace("file://",""),new Promise(async(n,a)=>{try{const d=await window.apis.doAction(["readFile",t]);n({text:()=>d})}catch(d){console.error(d),a(d)}}))}class $t extends zt(){_pluginLocal;_frame;_root;_loaded=!1;_unmountFns=[];constructor(e){super(),this._pluginLocal=e,e._dispose(()=>{this._unmount()})}async load(){const{name:e,entry:n}=this._pluginLocal.options;if(this.loaded||!n)return;const{template:a,execScripts:d}=await lt(n,{fetch:hn});this._mount(a,document.body);const v=kn(e,{elementGetter:()=>this._root?.firstChild}).instance.proxy;v.__shadow_mode__=!0,v.LSPluginLocal=this._pluginLocal,v.LSPluginShadow=this,v.LSPluginUser=v.logseq=new ce(this._pluginLocal.toJSON(),this._pluginLocal.caller);const x=await d(v,!0);this._unmountFns.push(x.unmount),this._loaded=!0}_mount(e,n){const a=this._frame=document.createElement("div");a.classList.add("lsp-shadow-sandbox"),a.id=this._pluginLocal.id,this._root=a.attachShadow({mode:"open"}),this._root.innerHTML=`<div>${e}</div>`,n.appendChild(a),this.emit("mounted")}_unmount(){for(const e of this._unmountFns)e&&e.call(null)}destroy(){this.frame?.parentNode?.removeChild(this.frame)}get loaded(){return this._loaded}get document(){return this._root?.firstChild}get frame(){return this._frame}}const $e=Ht()("LSPlugin:caller"),mt="#await#response#",pn="#lspmsg#error#",et=t=>`#lspmsg#${t}`;class Bt extends zt(){_pluginLocal;_connected=!1;_parent;_child;_shadow;_status;_userModel={};_call;_callUserModel;_debugTag="";constructor(e){super(),this._pluginLocal=e,e&&(this._debugTag=e.debugTag)}async connectToChild(){if(this._connected)return;const{shadow:e}=this._pluginLocal;e?await this._setupShadowSandbox():await this._setupIframeSandbox()}async connectToParent(e={}){if(this._connected)return;const n=this,a=this._pluginLocal!=null;let d=0;const v=new Map,x=Je(6e4),H=this._extendUserModel({"#lspmsg#ready#":async I=>{H[et(I?.pid)]=({type:K,payload:Y})=>{$e(`[host (_call) -> *user] ${this._debugTag}`,K,Y),n.emit(K,Y)},await x.resolve()},"#lspmsg#beforeunload#":async I=>{const K=Je(1e4);n.emit("beforeunload",Object.assign({actor:K},I)),await K.promise},"#lspmsg#settings#":async({type:I,payload:K})=>{n.emit("settings:changed",K)},"#lspmsg#":async({ns:I,type:K,payload:Y})=>{$e(`[host (async) -> *user] ${this._debugTag} ns=${I} type=${K}`,Y),I&&I.startsWith("hook")?n.emit(`${I}:${K}`,Y):n.emit(K,Y)},"#lspmsg#reply#":({_sync:I,result:K})=>{if($e(`[sync host -> *user] #${I}`,K),v.has(I)){const Y=v.get(I);Y&&(K?.hasOwnProperty(pn)?Y.reject(K[pn]):Y.resolve(K),v.delete(I))}},...e});if(a)return await x.promise,JSON.parse(JSON.stringify(this._pluginLocal?.toJSON()));const G=new fn(H).sendHandshakeReply();return this._status="pending",await G.then(I=>{this._child=I,this._connected=!0,this._call=async(K,Y={},se)=>{if(se){const pe=++d;v.set(pe,se),Y._sync=pe,se.setTag(`async call #${pe}`),$e(`async call #${pe}`)}return I.emit(et(H.baseInfo.id),{type:K,payload:Y}),se?.promise},this._callUserModel=async(K,Y)=>{try{H[K](Y)}catch{$e(`[model method] #${K} not existed`)}},setInterval(()=>{if(v.size>100)for(const[K,Y]of v)Y.settled&&v.delete(K)},18e5)}).finally(()=>{this._status=void 0}),await x.promise,H.baseInfo}async call(e,n={}){return this._call?.call(this,e,n)}async callAsync(e,n={}){const a=Je(1e4);return this._call?.call(this,e,n,a)}async callUserModel(e,n={}){return this._callUserModel?.call(this,e,n)}async _setupIframeSandbox(){const e=this._pluginLocal,n=e.id,a=`${n}_lsp_main`,d=new URL(e.options.entry);d.searchParams.set("__v__",e.options.version);const v=document.querySelector(`#${a}`);v&&v.parentElement.removeChild(v);const x=document.createElement("div");x.classList.add("lsp-iframe-sandbox-container"),x.id=a,x.dataset.pid=n;try{const K=(await this._pluginLocal._loadLayoutsData())?.$$0;if(K){x.dataset.inited_layout="true";const{width:Y,height:se,left:pe,top:Pe}=K;Object.assign(x.style,{width:Y+"px",height:se+"px",left:pe+"px",top:Pe+"px"})}}catch(K){console.error("[Restore Layout Error]",K)}document.body.appendChild(x);const H=new kt({id:n+"_iframe",container:x,url:d.href,classListArray:["lsp-iframe-sandbox"],model:{baseInfo:JSON.parse(JSON.stringify(e.toJSON()))}});let G,I=H.sendHandshake();return this._status="pending",new Promise((K,Y)=>{G=setTimeout(()=>{Y(new Error("handshake Timeout")),H.destroy()},4e3),I.then(se=>{this._parent=se,this._connected=!0,this.emit("connected"),se.on(et(e.id),({type:pe,payload:Pe})=>{$e("[user -> *host] ",pe,Pe),this._pluginLocal?.emit(pe,Pe||{})}),this._call=async(...pe)=>{await se.call(et(e.id),{type:pe[0],payload:Object.assign(pe[1]||{},{$$pid:e.id})})},this._callUserModel=async(pe,Pe)=>{if(pe.startsWith(mt))return await se.get(pe.replace(mt,""));se.call(pe,Pe)},K(null)}).catch(se=>{Y(se)}).finally(()=>{clearTimeout(G)})}).catch(K=>{throw $e("[iframe sandbox] error",K),K}).finally(()=>{this._status=void 0})}async _setupShadowSandbox(){const e=this._pluginLocal,n=this._shadow=new $t(e);try{this._status="pending",await n.load(),this._connected=!0,this.emit("connected"),this._call=async(a,d={},v)=>(v&&(d.actor=v),this._pluginLocal?.emit(a,Object.assign(d,{$$pid:e.id})),v?.promise),this._callUserModel=async(...a)=>{let d=a[0];d?.startsWith(mt)&&(d=d.replace(mt,""));const v=a[1]||{},x=this._userModel[d];typeof x=="function"&&await x.call(null,v)}}catch(a){throw $e("[shadow sandbox] error",a),a}finally{this._status=void 0}}_extendUserModel(e){return Object.assign(this._userModel,e)}_getSandboxIframeContainer(){return this._parent?.frame.parentNode}_getSandboxShadowContainer(){return this._shadow?.frame.parentNode}_getSandboxIframeRoot(){return this._parent?.frame}_getSandboxShadowRoot(){return this._shadow?.frame}set debugTag(e){this._debugTag=e}async destroy(){let e=null;this._parent&&(e=this._getSandboxIframeContainer(),await this._parent.destroy()),this._shadow&&(e=this._getSandboxShadowContainer(),this._shadow.destroy()),e?.parentNode.removeChild(e)}}class gn{ctx;opts;constructor(e,n){this.ctx=e,this.opts=n}get ctxId(){return this.ctx.baseInfo.id}setItem(e,n){return this.ctx.caller.callAsync("api:call",{method:"write-plugin-storage-file",args:[this.ctxId,e,n,this.opts?.assets]})}getItem(e){return this.ctx.caller.callAsync("api:call",{method:"read-plugin-storage-file",args:[this.ctxId,e,this.opts?.assets]})}removeItem(e){return this.ctx.caller.call("api:call",{method:"unlink-plugin-storage-file",args:[this.ctxId,e,this.opts?.assets]})}allKeys(){return this.ctx.caller.callAsync("api:call",{method:"list-plugin-storage-files",args:[this.ctxId,this.opts?.assets]})}clear(){return this.ctx.caller.call("api:call",{method:"clear-plugin-storage-files",args:[this.ctxId,this.opts?.assets]})}hasItem(e){return this.ctx.caller.callAsync("api:call",{method:"exist-plugin-storage-file",args:[this.ctxId,e,this.opts?.assets]})}}class Be{ctx;constructor(e){this.ctx=e}get React(){return this.ensureHostScope().React}get ReactDOM(){return this.ensureHostScope().ReactDOM}get pluginLocal(){return this.ensureHostScope().LSPluginCore.ensurePlugin(this.ctx.baseInfo.id)}invokeExperMethod(e,...n){const a=this.ensureHostScope();return e=st(e)?.toLowerCase(),a.logseq.api["exper_"+e]?.apply(a,n)}async loadScripts(...e){(e=e.map(n=>n?.startsWith("http")?n:this.ctx.resolveResourceFullUrl(n))).unshift(this.ctx.baseInfo.id),await this.invokeExperMethod("loadScripts",...e)}registerFencedCodeRenderer(e,n){return this.ensureHostScope().logseq.api.exper_register_fenced_code_renderer(this.ctx.baseInfo.id,e,n)}registerExtensionsEnhancer(e,n){const a=this.ensureHostScope();return e==="katex"&&a.katex&&n(a.katex).catch(console.error),a.logseq.api.exper_register_extensions_enhancer(this.ctx.baseInfo.id,e,n)}ensureHostScope(){if(window===top)throw new Error("Can not access host scope!");return top}}const Gt=t=>`task_callback_${t}`;class mn{_client;_requestId;_requestOptions;_promise;_aborted=!1;constructor(e,n,a={}){this._client=e,this._requestId=n,this._requestOptions=a,this._promise=new Promise((H,G)=>{if(!this._requestId)return G(null);this._client.once(Gt(this._requestId),I=>{I&&I instanceof Error?G(I):H(I)})});const{success:d,fail:v,final:x}=this._requestOptions;this._promise.then(H=>{d?.(H)}).catch(H=>{v?.(H)}).finally(()=>{x?.()})}abort(){this._requestOptions.abortable&&!this._aborted&&(this._client.ctx._execCallableAPI("http_request_abort",this._requestId),this._aborted=!0)}get promise(){return this._promise}get client(){return this._client}get requestId(){return this._requestId}}class At extends dn.EventEmitter{_ctx;constructor(e){super(),this._ctx=e,this.ctx.caller.on("#lsp#request#callback",n=>{const a=n?.requestId;a&&this.emit(Gt(a),n?.payload)})}static createRequestTask(e,n,a){return new mn(e,n,a)}async _request(e){const n=this.ctx.baseInfo.id,{success:a,fail:d,final:v,...x}=e,H=this.ctx.Experiments.invokeExperMethod("request",n,x),G=At.createRequestTask(this.ctx.Request,H,e);return x.abortable?G:G.promise}get ctx(){return this._ctx}}const An=Symbol.for("proxy-continue"),yt=Ht()("LSPlugin:user");function Re(t,e,n){if(typeof n!="function")return!1;const{key:a,label:d,desc:v,palette:x,keybinding:H,extras:G}=e,I=`SimpleCommandHook${a}${++Wt}`;this.Editor["on"+I](n),this.caller?.call("api:call",{method:"register-plugin-simple-command",args:[this.baseInfo.id,[{key:a,label:d,type:t,desc:v,keybinding:H,extras:G},["editor/hook",I]],x]})}let bt=null;const yn={async getInfo(t){return bt||(bt=await this._execCallableAPIAsync("get-app-info")),typeof t=="string"?bt[t]:bt},registerCommand:Re,registerCommandPalette(t,e){const{key:n,label:a,keybinding:d}=t;return Re.call(this,"$palette$",{key:n,label:a,palette:!0,keybinding:d},e)},registerCommandShortcut(t,e){const{binding:n}=t,a="$shortcut$",d=a+st(n);return Re.call(this,a,{key:d,palette:!1,keybinding:t},e)},registerUIItem(t,e){const n=this.baseInfo.id;this.caller?.call("api:call",{method:"register-plugin-ui-item",args:[n,t,e]})},registerPageMenuItem(t,e){if(typeof e!="function")return!1;const n=t+"_"+this.baseInfo.id,a=t;Re.call(this,"page-menu-item",{key:n,label:a},e)},setFullScreen(t){const e=(...n)=>this._callWin("setFullScreen",...n);t==="toggle"?this._callWin("isFullScreen").then(n=>{n?e():e(!0)}):t?e(!0):e()}};let Wt=0;const bn={newBlockUUID(){return this._execCallableAPIAsync("new_block_uuid")},registerSlashCommand(t,e){yt("Register slash command #",this.baseInfo.id,t,e),typeof e=="function"&&(e=[["editor/clear-current-slash",!1],["editor/restore-saved-cursor"],["editor/hook",e]]),e=e.map(n=>{const[a,...d]=n;if(a==="editor/hook"){let v=d[0],x=()=>{this.caller?.callUserModel(v)};typeof v=="function"&&(x=v);const H=`SlashCommandHook${a}${++Wt}`;n[1]=H,this.Editor["on"+H](x)}return n}),this.caller?.call("api:call",{method:"register-plugin-slash-command",args:[this.baseInfo.id,[t,e]]})},registerBlockContextMenuItem(t,e){if(typeof e!="function")return!1;const n=t+"_"+this.baseInfo.id;Re.call(this,"block-context-menu-item",{key:n,label:t},e)},registerHighlightContextMenuItem(t,e,n){if(typeof e!="function")return!1;const a=t+"_"+this.baseInfo.id;Re.call(this,"highlight-context-menu-item",{key:a,label:t,extras:n},e)},scrollToBlockInPage(t,e,n){const a="block-content-"+e;n?.replaceState?this.App.replaceState("page",{name:t},{anchor:a}):this.App.pushState("page",{name:t},{anchor:a})}},Ln={onBlockChanged(t,e){const n=this.baseInfo.id,a=`hook:db:${st(`block:${t}`)}`,d=({block:v,txData:x,txMeta:H})=>{v.uuid===t&&e(v,x,H)};return this.caller.on(a,d),this.App._installPluginHook(n,a),()=>{this.caller.off(a,d),this.App._uninstallPluginHook(n,a)}}},o={},M={},T={makeSandboxStorage(){return new gn(this,{assets:!0})}};class ce extends zt(){_baseInfo;_caller;_version="0.0.10";_debugTag="";_settingsSchema;_connected=!1;_ui=new Map;_mFileStorage;_mRequest;_mExperiments;_beforeunloadCallback;constructor(e,n){super(),this._baseInfo=e,this._caller=n,n.on("sys:ui:visible",a=>{a?.toggle&&this.toggleMainUI()}),n.on("settings:changed",a=>{const d=Object.assign({},this.settings),v=Object.assign(this._baseInfo.settings,a);this.emit("settings:changed",{...v},d)}),n.on("beforeunload",async a=>{const{actor:d,...v}=a,x=this._beforeunloadCallback;try{x&&await x(v),d?.resolve(null)}catch(H){console.debug(`${n.debugTag} [beforeunload] `,H),d?.reject(H)}})}async ready(e,n){if(!this._connected)try{typeof e=="function"&&(n=e,e={});let a=await this._caller.connectToParent(e);this._connected=!0,a=pt(this._baseInfo,a),this._settingsSchema&&(a.settings=function(d,v){const x=(v||[]).reduce((H,G)=>("default"in G&&(H[G.key]=G.default),H),{});return Object.assign(x,d)}(a.settings,this._settingsSchema),await this.useSettingsSchema(this._settingsSchema)),a?.id&&(this._debugTag=this._caller.debugTag=`#${a.id} [${a.name}]`);try{await this._execCallableAPIAsync("setSDKMetadata",{version:this._version})}catch(d){console.warn(d)}n&&n.call(this,a)}catch(a){console.error(`${this._debugTag} [Ready Error]`,a)}}ensureConnected(){if(!this._connected)throw new Error("not connected")}beforeunload(e){typeof e=="function"&&(this._beforeunloadCallback=e)}provideModel(e){return this.caller._extendUserModel(e),this}provideTheme(e){return this.caller.call("provider:theme",e),this}provideStyle(e){return this.caller.call("provider:style",e),this}provideUI(e){return this.caller.call("provider:ui",e),this}useSettingsSchema(e){return this.connected&&this.caller.call("settings:schema",{schema:e,isSync:!0}),this._settingsSchema=e,this}updateSettings(e){this.caller.call("settings:update",e)}onSettingsChanged(e){const n="settings:changed";return this.on(n,e),()=>this.off(n,e)}showSettingsUI(){this.caller.call("settings:visible:changed",{visible:!0})}hideSettingsUI(){this.caller.call("settings:visible:changed",{visible:!1})}setMainUIAttrs(e){this.caller.call("main-ui:attrs",e)}setMainUIInlineStyle(e){this.caller.call("main-ui:style",e)}hideMainUI(e){const n={key:0,visible:!1,cursor:e?.restoreEditingCursor};this.caller.call("main-ui:visible",n),this.emit("ui:visible:changed",n),this._ui.set(n.key,n)}showMainUI(e){const n={key:0,visible:!0,autoFocus:e?.autoFocus};this.caller.call("main-ui:visible",n),this.emit("ui:visible:changed",n),this._ui.set(n.key,n)}toggleMainUI(){const e=this._ui.get(0);e&&e.visible?this.hideMainUI():this.showMainUI()}get version(){return this._version}get isMainUIVisible(){const e=this._ui.get(0);return Boolean(e&&e.visible)}get connected(){return this._connected}get baseInfo(){return this._baseInfo}get settings(){return this.baseInfo?.settings}get caller(){return this._caller}resolveResourceFullUrl(e){if(this.ensureConnected(),e)return e=e.replace(/^[.\\/]+/,""),function(n,...a){try{const d=new URL(n);if(!d.origin)throw new Error(null);const v=Dt.join(n.substr(d.origin.length),...a);return d.origin+v}catch{return Dt.join(n,...a)}}(this._baseInfo.lsr,e)}_makeUserProxy(e,n){const a=this,d=this.caller;return new Proxy(e,{get(v,x,H){const G=v[x];return function(...I){if(G){const Y=G.apply(a,I.concat(n));if(Y!==An)return Y}if(n){const Y=x.toString().match(/^(once|off|on)/i);if(Y!=null){const se=Y[0].toLowerCase(),pe=Y.input.slice(se.length),Pe=se==="off",tt=a.baseInfo.id,ve=`hook:${n}:${st(pe)}`,qe=I[0];d[se](ve,qe);const Ue=()=>{d.off(ve,qe),d.listenerCount(ve)||a.App._uninstallPluginHook(tt,ve)};return Pe?void Ue():(a.App._installPluginHook(tt,ve),Ue)}}let K=x;return["git","ui","assets"].includes(n)&&(K=n+"_"+K),d.callAsync("api:call",{tag:n,method:K,args:I})}}})}_execCallableAPIAsync(e,...n){return this._caller.callAsync("api:call",{method:e,args:n})}_execCallableAPI(e,...n){this._caller.call("api:call",{method:e,args:n})}_callWin(...e){return this._execCallableAPIAsync("_callMainWin",...e)}get App(){return this._makeUserProxy(yn,"app")}get Editor(){return this._makeUserProxy(bn,"editor")}get DB(){return this._makeUserProxy(Ln,"db")}get Git(){return this._makeUserProxy(o,"git")}get UI(){return this._makeUserProxy(M,"ui")}get Assets(){return this._makeUserProxy(T,"assets")}get FileStorage(){let e=this._mFileStorage;return e||(e=this._mFileStorage=new gn(this)),e}get Request(){let e=this._mRequest;return e||(e=this._mRequest=new At(this)),e}get Experiments(){let e=this._mExperiments;return e||(e=this._mExperiments=new Be(this)),e}}function xe(t,e){return new ce(t,e)}if(window.__LSP__HOST__==null){const t=new Bt(null);window.logseq=xe({},t)}})(),F})())})(Pn,Pn.exports);const Xn={title:"Awesome Links",icon:"./icon.png",id:"logseq-awesome-links"},V={pluginID:Xn.id,pluginConfig:null,isPluginEnabled:"is-awLi-enabled",extLinksSelector:".external-link",pageLinksSelector:".page-ref:not(.page-property-key), .tag, .references li a",titleSelector:".page-title, .journal-title .title",sidebarLinkSelector:".nav-contents-container .page-title",tabLinkSelector:".logseq-tab:not(.close-all) .logseq-tab-title",tagHasBg:!1,themeBg:"",favIconsCache:Object.create(null),defaultPageProps:Object.create(null),defaultJournalProps:Object.create(null),doc:parent.document,root:parent.document.documentElement,body:parent.document.body,appContainer:parent.document.getElementById("app-container"),tabsPluginIframe:parent.document.getElementById("logseq-tabs_iframe")};let Me,Nn,Qe,En,Oe;const er=()=>{Me=parent.document,Nn=Me.documentElement,Qe=Me.body,En=Me.getElementById("app-container"),Oe=Me.getElementById("logseq-tabs_iframe")};var Rn={exports:{}};(function(h){(function(l){var k=/^\s+/,J=/\s+$/,O=0,F=l.round,U=l.min,g=l.max,j=l.random;function p(r,s){if(r=r||"",s=s||{},r instanceof p)return r;if(!(this instanceof p))return new p(r,s);var i=y(r);this._originalInput=r,this._r=i.r,this._g=i.g,this._b=i.b,this._a=i.a,this._roundA=F(100*this._a)/100,this._format=s.format||i.format,this._gradientType=s.gradientType,this._r<1&&(this._r=F(this._r)),this._g<1&&(this._g=F(this._g)),this._b<1&&(this._b=F(this._b)),this._ok=i.ok,this._tc_id=O++}p.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var r=this.toRgb();return(r.r*299+r.g*587+r.b*114)/1e3},getLuminance:function(){var r=this.toRgb(),s,i,_,N,R,ie;return s=r.r/255,i=r.g/255,_=r.b/255,s<=.03928?N=s/12.92:N=l.pow((s+.055)/1.055,2.4),i<=.03928?R=i/12.92:R=l.pow((i+.055)/1.055,2.4),_<=.03928?ie=_/12.92:ie=l.pow((_+.055)/1.055,2.4),.2126*N+.7152*R+.0722*ie},setAlpha:function(r){return this._a=m(r),this._roundA=F(100*this._a)/100,this},toHsv:function(){var r=b(this._r,this._g,this._b);return{h:r.h*360,s:r.s,v:r.v,a:this._a}},toHsvString:function(){var r=b(this._r,this._g,this._b),s=F(r.h*360),i=F(r.s*100),_=F(r.v*100);return this._a==1?"hsv("+s+", "+i+"%, "+_+"%)":"hsva("+s+", "+i+"%, "+_+"%, "+this._roundA+")"},toHsl:function(){var r=W(this._r,this._g,this._b);return{h:r.h*360,s:r.s,l:r.l,a:this._a}},toHslString:function(){var r=W(this._r,this._g,this._b),s=F(r.h*360),i=F(r.s*100),_=F(r.l*100);return this._a==1?"hsl("+s+", "+i+"%, "+_+"%)":"hsla("+s+", "+i+"%, "+_+"%, "+this._roundA+")"},toHex:function(r){return L(this._r,this._g,this._b,r)},toHexString:function(r){return"#"+this.toHex(r)},toHex8:function(r){return X(this._r,this._g,this._b,this._a,r)},toHex8String:function(r){return"#"+this.toHex8(r)},toRgb:function(){return{r:F(this._r),g:F(this._g),b:F(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+F(this._r)+", "+F(this._g)+", "+F(this._b)+")":"rgba("+F(this._r)+", "+F(this._g)+", "+F(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:F(u(this._r,255)*100)+"%",g:F(u(this._g,255)*100)+"%",b:F(u(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+F(u(this._r,255)*100)+"%, "+F(u(this._g,255)*100)+"%, "+F(u(this._b,255)*100)+"%)":"rgba("+F(u(this._r,255)*100)+"%, "+F(u(this._g,255)*100)+"%, "+F(u(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:me[L(this._r,this._g,this._b,!0)]||!1},toFilter:function(r){var s="#"+z(this._r,this._g,this._b,this._a),i=s,_=this._gradientType?"GradientType = 1, ":"";if(r){var N=p(r);i="#"+z(N._r,N._g,N._b,N._a)}return"progid:DXImageTransform.Microsoft.gradient("+_+"startColorstr="+s+",endColorstr="+i+")"},toString:function(r){var s=!!r;r=r||this._format;var i=!1,_=this._a<1&&this._a>=0,N=!s&&_&&(r==="hex"||r==="hex6"||r==="hex3"||r==="hex4"||r==="hex8"||r==="name");return N?r==="name"&&this._a===0?this.toName():this.toRgbString():(r==="rgb"&&(i=this.toRgbString()),r==="prgb"&&(i=this.toPercentageRgbString()),(r==="hex"||r==="hex6")&&(i=this.toHexString()),r==="hex3"&&(i=this.toHexString(!0)),r==="hex4"&&(i=this.toHex8String(!0)),r==="hex8"&&(i=this.toHex8String()),r==="name"&&(i=this.toName()),r==="hsl"&&(i=this.toHslString()),r==="hsv"&&(i=this.toHsvString()),i||this.toHexString())},clone:function(){return p(this.toString())},_applyModification:function(r,s){var i=r.apply(null,[this].concat([].slice.call(s)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(Q,arguments)},brighten:function(){return this._applyModification(c,arguments)},darken:function(){return this._applyModification(f,arguments)},desaturate:function(){return this._applyModification(q,arguments)},saturate:function(){return this._applyModification(ee,arguments)},greyscale:function(){return this._applyModification(D,arguments)},spin:function(){return this._applyModification(w,arguments)},_applyCombination:function(r,s){return r.apply(null,[this].concat([].slice.call(s)))},analogous:function(){return this._applyCombination(ge,arguments)},complement:function(){return this._applyCombination(P,arguments)},monochromatic:function(){return this._applyCombination(Ne,arguments)},splitcomplement:function(){return this._applyCombination(fe,arguments)},triad:function(){return this._applyCombination(ne,arguments)},tetrad:function(){return this._applyCombination(oe,arguments)}},p.fromRatio=function(r,s){if(typeof r=="object"){var i={};for(var _ in r)r.hasOwnProperty(_)&&(_==="a"?i[_]=r[_]:i[_]=de(r[_]));r=i}return p(r,s)};function y(r){var s={r:0,g:0,b:0},i=1,_=null,N=null,R=null,ie=!1,he=!1;return typeof r=="string"&&(r=we(r)),typeof r=="object"&&(_e(r.r)&&_e(r.g)&&_e(r.b)?(s=S(r.r,r.g,r.b),ie=!0,he=String(r.r).substr(-1)==="%"?"prgb":"rgb"):_e(r.h)&&_e(r.s)&&_e(r.v)?(_=de(r.s),N=de(r.v),s=A(r.h,_,N),ie=!0,he="hsv"):_e(r.h)&&_e(r.s)&&_e(r.l)&&(_=de(r.s),R=de(r.l),s=C(r.h,_,R),ie=!0,he="hsl"),r.hasOwnProperty("a")&&(i=r.a)),i=m(i),{ok:ie,format:r.format||he,r:U(255,g(s.r,0)),g:U(255,g(s.g,0)),b:U(255,g(s.b,0)),a:i}}function S(r,s,i){return{r:u(r,255)*255,g:u(s,255)*255,b:u(i,255)*255}}function W(r,s,i){r=u(r,255),s=u(s,255),i=u(i,255);var _=g(r,s,i),N=U(r,s,i),R,ie,he=(_+N)/2;if(_==N)R=ie=0;else{var ye=_-N;switch(ie=he>.5?ye/(2-_-N):ye/(_+N),_){case r:R=(s-i)/ye+(s<i?6:0);break;case s:R=(i-r)/ye+2;break;case i:R=(r-s)/ye+4;break}R/=6}return{h:R,s:ie,l:he}}function C(r,s,i){var _,N,R;r=u(r,360),s=u(s,100),i=u(i,100);function ie(je,Ke,Z){return Z<0&&(Z+=1),Z>1&&(Z-=1),Z<1/6?je+(Ke-je)*6*Z:Z<1/2?Ke:Z<2/3?je+(Ke-je)*(2/3-Z)*6:je}if(s===0)_=N=R=i;else{var he=i<.5?i*(1+s):i+s-i*s,ye=2*i-he;_=ie(ye,he,r+1/3),N=ie(ye,he,r),R=ie(ye,he,r-1/3)}return{r:_*255,g:N*255,b:R*255}}function b(r,s,i){r=u(r,255),s=u(s,255),i=u(i,255);var _=g(r,s,i),N=U(r,s,i),R,ie,he=_,ye=_-N;if(ie=_===0?0:ye/_,_==N)R=0;else{switch(_){case r:R=(s-i)/ye+(s<i?6:0);break;case s:R=(i-r)/ye+2;break;case i:R=(r-s)/ye+4;break}R/=6}return{h:R,s:ie,v:he}}function A(r,s,i){r=u(r,360)*6,s=u(s,100),i=u(i,100);var _=l.floor(r),N=r-_,R=i*(1-s),ie=i*(1-N*s),he=i*(1-(1-N)*s),ye=_%6,je=[i,ie,R,R,he,i][ye],Ke=[he,i,i,ie,R,R][ye],Z=[R,R,he,i,i,ie][ye];return{r:je*255,g:Ke*255,b:Z*255}}function L(r,s,i,_){var N=[te(F(r).toString(16)),te(F(s).toString(16)),te(F(i).toString(16))];return _&&N[0].charAt(0)==N[0].charAt(1)&&N[1].charAt(0)==N[1].charAt(1)&&N[2].charAt(0)==N[2].charAt(1)?N[0].charAt(0)+N[1].charAt(0)+N[2].charAt(0):N.join("")}function X(r,s,i,_,N){var R=[te(F(r).toString(16)),te(F(s).toString(16)),te(F(i).toString(16)),te(Se(_))];return N&&R[0].charAt(0)==R[0].charAt(1)&&R[1].charAt(0)==R[1].charAt(1)&&R[2].charAt(0)==R[2].charAt(1)&&R[3].charAt(0)==R[3].charAt(1)?R[0].charAt(0)+R[1].charAt(0)+R[2].charAt(0)+R[3].charAt(0):R.join("")}function z(r,s,i,_){var N=[te(Se(_)),te(F(r).toString(16)),te(F(s).toString(16)),te(F(i).toString(16))];return N.join("")}p.equals=function(r,s){return!r||!s?!1:p(r).toRgbString()==p(s).toRgbString()},p.random=function(){return p.fromRatio({r:j(),g:j(),b:j()})};function q(r,s){s=s===0?0:s||10;var i=p(r).toHsl();return i.s-=s/100,i.s=$(i.s),p(i)}function ee(r,s){s=s===0?0:s||10;var i=p(r).toHsl();return i.s+=s/100,i.s=$(i.s),p(i)}function D(r){return p(r).desaturate(100)}function Q(r,s){s=s===0?0:s||10;var i=p(r).toHsl();return i.l+=s/100,i.l=$(i.l),p(i)}function c(r,s){s=s===0?0:s||10;var i=p(r).toRgb();return i.r=g(0,U(255,i.r-F(255*-(s/100)))),i.g=g(0,U(255,i.g-F(255*-(s/100)))),i.b=g(0,U(255,i.b-F(255*-(s/100)))),p(i)}function f(r,s){s=s===0?0:s||10;var i=p(r).toHsl();return i.l-=s/100,i.l=$(i.l),p(i)}function w(r,s){var i=p(r).toHsl(),_=(i.h+s)%360;return i.h=_<0?360+_:_,p(i)}function P(r){var s=p(r).toHsl();return s.h=(s.h+180)%360,p(s)}function ne(r){var s=p(r).toHsl(),i=s.h;return[p(r),p({h:(i+120)%360,s:s.s,l:s.l}),p({h:(i+240)%360,s:s.s,l:s.l})]}function oe(r){var s=p(r).toHsl(),i=s.h;return[p(r),p({h:(i+90)%360,s:s.s,l:s.l}),p({h:(i+180)%360,s:s.s,l:s.l}),p({h:(i+270)%360,s:s.s,l:s.l})]}function fe(r){var s=p(r).toHsl(),i=s.h;return[p(r),p({h:(i+72)%360,s:s.s,l:s.l}),p({h:(i+216)%360,s:s.s,l:s.l})]}function ge(r,s,i){s=s||6,i=i||30;var _=p(r).toHsl(),N=360/i,R=[p(r)];for(_.h=(_.h-(N*s>>1)+720)%360;--s;)_.h=(_.h+N)%360,R.push(p(_));return R}function Ne(r,s){s=s||6;for(var i=p(r).toHsv(),_=i.h,N=i.s,R=i.v,ie=[],he=1/s;s--;)ie.push(p({h:_,s:N,v:R})),R=(R+he)%1;return ie}p.mix=function(r,s,i){i=i===0?0:i||50;var _=p(r).toRgb(),N=p(s).toRgb(),R=i/100,ie={r:(N.r-_.r)*R+_.r,g:(N.g-_.g)*R+_.g,b:(N.b-_.b)*R+_.b,a:(N.a-_.a)*R+_.a};return p(ie)},p.readability=function(r,s){var i=p(r),_=p(s);return(l.max(i.getLuminance(),_.getLuminance())+.05)/(l.min(i.getLuminance(),_.getLuminance())+.05)},p.isReadable=function(r,s,i){var _=p.readability(r,s),N,R;switch(R=!1,N=le(i),N.level+N.size){case"AAsmall":case"AAAlarge":R=_>=4.5;break;case"AAlarge":R=_>=3;break;case"AAAsmall":R=_>=7;break}return R},p.mostReadable=function(r,s,i){var _=null,N=0,R,ie,he,ye;i=i||{},ie=i.includeFallbackColors,he=i.level,ye=i.size;for(var je=0;je<s.length;je++)R=p.readability(r,s[je]),R>N&&(N=R,_=p(s[je]));return p.isReadable(r,_,{level:he,size:ye})||!ie?_:(i.includeFallbackColors=!1,p.mostReadable(r,["#fff","#000"],i))};var Te=p.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},me=p.hexNames=Ge(Te);function Ge(r){var s={};for(var i in r)r.hasOwnProperty(i)&&(s[r[i]]=i);return s}function m(r){return r=parseFloat(r),(isNaN(r)||r<0||r>1)&&(r=1),r}function u(r,s){Fe(r)&&(r="100%");var i=Ce(r);return r=U(s,g(0,parseFloat(r))),i&&(r=parseInt(r*s,10)/100),l.abs(r-s)<1e-6?1:r%s/parseFloat(s)}function $(r){return U(1,g(0,r))}function re(r){return parseInt(r,16)}function Fe(r){return typeof r=="string"&&r.indexOf(".")!=-1&&parseFloat(r)===1}function Ce(r){return typeof r=="string"&&r.indexOf("%")!=-1}function te(r){return r.length==1?"0"+r:""+r}function de(r){return r<=1&&(r=r*100+"%"),r}function Se(r){return l.round(parseFloat(r)*255).toString(16)}function ke(r){return re(r)/255}var Le=function(){var r="[-\\+]?\\d+%?",s="[-\\+]?\\d*\\.\\d+%?",i="(?:"+s+")|(?:"+r+")",_="[\\s|\\(]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")\\s*\\)?",N="[\\s|\\(]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")\\s*\\)?";return{CSS_UNIT:new RegExp(i),rgb:new RegExp("rgb"+_),rgba:new RegExp("rgba"+N),hsl:new RegExp("hsl"+_),hsla:new RegExp("hsla"+N),hsv:new RegExp("hsv"+_),hsva:new RegExp("hsva"+N),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function _e(r){return!!Le.CSS_UNIT.exec(r)}function we(r){r=r.replace(k,"").replace(J,"").toLowerCase();var s=!1;if(Te[r])r=Te[r],s=!0;else if(r=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var i;return(i=Le.rgb.exec(r))?{r:i[1],g:i[2],b:i[3]}:(i=Le.rgba.exec(r))?{r:i[1],g:i[2],b:i[3],a:i[4]}:(i=Le.hsl.exec(r))?{h:i[1],s:i[2],l:i[3]}:(i=Le.hsla.exec(r))?{h:i[1],s:i[2],l:i[3],a:i[4]}:(i=Le.hsv.exec(r))?{h:i[1],s:i[2],v:i[3]}:(i=Le.hsva.exec(r))?{h:i[1],s:i[2],v:i[3],a:i[4]}:(i=Le.hex8.exec(r))?{r:re(i[1]),g:re(i[2]),b:re(i[3]),a:ke(i[4]),format:s?"name":"hex8"}:(i=Le.hex6.exec(r))?{r:re(i[1]),g:re(i[2]),b:re(i[3]),format:s?"name":"hex"}:(i=Le.hex4.exec(r))?{r:re(i[1]+""+i[1]),g:re(i[2]+""+i[2]),b:re(i[3]+""+i[3]),a:ke(i[4]+""+i[4]),format:s?"name":"hex8"}:(i=Le.hex3.exec(r))?{r:re(i[1]+""+i[1]),g:re(i[2]+""+i[2]),b:re(i[3]+""+i[3]),format:s?"name":"hex"}:!1}function le(r){var s,i;return r=r||{level:"AA",size:"small"},s=(r.level||"AA").toUpperCase(),i=(r.size||"small").toLowerCase(),s!=="AA"&&s!=="AAA"&&(s="AA"),i!=="small"&&i!=="large"&&(i="small"),{level:s,size:i}}h.exports?h.exports=p:window.tinycolor=p})(Math)})(Rn);const tr=Rn.exports,nr=(h,l)=>Object.keys(h).filter(J=>J==="presetCustom"?!1:h[J]!==l[J]),rr=async()=>{const h=await fetch(`https://api.github.com/repos/yoyurec/${V.pluginID}/releases/latest`,{headers:{Accept:"application/vnd.github.v3+json"}});if(!h.ok){const k=`An error has occured: ${h.status}`;throw new Error(k)}const l=await h.json();l&&l.tag_name.replace("v","").localeCompare(V.pluginVersion,void 0,{numeric:!0,sensitivity:"base"})==1&&logseq.UI.showMsg(`"${V.pluginID}" new version is available! Please, update!`,"warning",{timeout:3e4})},ir=async h=>{let l;try{l=await fetch(h)}catch{return""}const k=await l.blob();return new Promise(J=>{const O=new FileReader;O.readAsDataURL(k),O.onloadend=()=>{const F=O.result;J(F)}})},or=h=>tr.readability(h,V.themeBg)<1.7,_n=h=>{const l=Object.create(null),k=h.split(`
`),J=k.find(F=>F.includes("icon::"));if(J){const F=J.split("::");F&&(l.icon=F[1].trim())}const O=k.find(F=>F.includes("color::"));if(O){const F=O.split("::");F&&(l.color=F[1].trim())}return l};const ar=[{key:"promoAwesomeStyler",title:"",description:'\u26A1 Also try "Awesome Styler" theme with lots of UI changes and more features! \u26A1 https://github.com/yoyurec/logseq-awesome-styler',type:"boolean",default:!1},{key:"externalHeading",title:"External links",description:"",type:"heading",default:null},{key:"faviconsEnabled",title:"",description:"Enable feature: favicons for external links?",type:"boolean",default:!0},{key:"internalHeading",title:"Internal links",description:"",type:"heading",default:null},{key:"pageIconsEnabled",title:"",description:"Enable feature: icon/color for internal pages?",type:"boolean",default:!0},{key:"inheritingHeading",title:"Inheriting",description:"",type:"heading",default:null},{key:"inheritFromProp",title:"",description:"Inherit page icon/color via custom property (delete to disable)",type:"string",default:"page-type"},{key:"inheritFromHierarchy",title:"",description:"Inherit page icon/color via hierarchy?",type:"boolean",default:!0},{key:"dafaultPropsHeading",title:"Default props",description:"",type:"heading",default:null},{key:"defaultPageProps",title:"",description:"Pages default props: icon (emoji or Nerd icon) and color. (Delete to disable)",type:"string",inputAs:"textarea",default:`icon::\uF0F6
color::`},{key:"defaultJournalProps",title:"",description:"Journal pages default props: icon (emoji or Nerd icon) and color. (Delete to disable)",type:"string",inputAs:"textarea",default:`icon::\uF455
color::`},{key:"nerdFontEnabled",title:"",description:"Enable Nerd font with tons of icons (https://www.nerdfonts.com/cheat-sheet)",type:"boolean",default:!0}],sr=()=>{logseq.useSettingsSchema(ar),V.pluginConfig=logseq.settings,logseq.onSettingsChanged((h,l)=>{cr(h,l)})},cr=(h,l)=>{V.defaultPageProps=_n(V.pluginConfig.defaultPageProps),V.defaultJournalProps=_n(V.pluginConfig.defaultJournalProps),V.pluginConfig={...h};const k=nr({...l},V.pluginConfig);k.includes("faviconsEnabled")&&Pr(),(k.includes("pageIconsEnabled")||k.includes("inheritFromHierarchy")||k.includes("defaultJournalProps")||k.includes("fixLowContrast"))&&xr(),k.includes("nerdFontEnabled")&&Rr()};let On,Mn;const lr=()=>{Mn={childList:!0,subtree:!0},On=new MutationObserver(ur)},ur=function(h){for(let l=0;l<h.length;l++){const J=h[l].addedNodes[0];if(J&&J.childNodes.length&&(V.pluginConfig.pageIconsEnabled&&Wn(J),V.pluginConfig.faviconsEnabled)){const O=[...J.querySelectorAll(V.extLinksSelector)];O.length&&Vn(O)}}},fr=()=>{!En||On.observe(En,Mn)},Fn=()=>{On.disconnect()};let In,Dn;const dr=()=>{Dn={childList:!0,subtree:!0},In=new MutationObserver(hr)},hr=function(h){for(let l=0;l<h.length;l++){const J=h[l].addedNodes[0];if(J&&J.childNodes.length){const O=J.querySelector(".logseq-tab-title");O&&jn(O)}}},pr=()=>{if(Oe){const h=Oe.contentDocument?.querySelector(".logseq-tab-wrapper");h&&In.observe(h,Dn)}},Hn=()=>{In.disconnect()};var Un={exports:{}};(function(h){(function(l){var k=function(){},J=l.requestAnimationFrame||l.webkitRequestAnimationFrame||l.mozRequestAnimationFrame||l.msRequestAnimationFrame||function(y){return setTimeout(y,16)};function O(){var y=this;y.reads=[],y.writes=[],y.raf=J.bind(l)}O.prototype={constructor:O,runTasks:function(y){for(var S;S=y.shift();)S()},measure:function(y,S){var W=S?y.bind(S):y;return this.reads.push(W),F(this),W},mutate:function(y,S){var W=S?y.bind(S):y;return this.writes.push(W),F(this),W},clear:function(y){return g(this.reads,y)||g(this.writes,y)},extend:function(y){if(typeof y!="object")throw new Error("expected object");var S=Object.create(this);return j(S,y),S.fastdom=this,S.initialize&&S.initialize(),S},catch:null};function F(y){y.scheduled||(y.scheduled=!0,y.raf(U.bind(null,y)))}function U(y){var S=y.writes,W=y.reads,C;try{k("flushing reads",W.length),y.runTasks(W),k("flushing writes",S.length),y.runTasks(S)}catch(b){C=b}if(y.scheduled=!1,(W.length||S.length)&&F(y),C)if(k("task errored",C.message),y.catch)y.catch(C);else throw C}function g(y,S){var W=y.indexOf(S);return!!~W&&!!y.splice(W,1)}function j(y,S){for(var W in S)S.hasOwnProperty(W)&&(y[W]=S[W])}var p=l.fastdom=l.fastdom||new O;h.exports=p})(typeof window<"u"?window:Vt)})(Un);const gr=Un.exports,mr=async h=>{const l=`
    [
      :find ?isjournal
      :where
          [?id :block/name "${h}"]
          [?id :block/journal? ?isjournal]
    ]
    `,k=await logseq.DB.datascriptQuery(l);return!!(k[0]&&k[0][0])},Zt=async h=>{let l=Object.create(null);const k=`
    [
      :find ?props
      :where
          [?id :block/name "${h}"]
          [?id :block/properties ?props]
    ]
    `;if(await mr(h))l=V.defaultJournalProps;else{const O=await logseq.DB.datascriptQuery(k);O[0]&&O[0][0]&&O[0][0].icon&&(l.icon=O[0][0].icon),O[0]&&O[0][0]&&O[0][0].color&&(l.color=O[0][0].color.replaceAll('"',""))}return l},qn=async(h,l)=>{let k="";const J=`
    [
      :find ?title
      :where
          [?id :block/name "${h}"]
          [?id :block/properties ?prop]
          [(get ?prop :${l}) ?title]
    ]
    `,O=await logseq.DB.datascriptQuery(J);return O.length&&(k=O[0][0][0].toLowerCase()),k},zn=async h=>{let l="";const k=`
    [
        :find ?origtitle
        :where
            [?id :block/name "${h}"]
            [?origid :block/alias ?id]
            [?origid :block/name ?origtitle]
    ]
    `,J=await logseq.DB.datascriptQuery(k);return J.length&&(l=J[0][0].toLowerCase()),l},yr=async h=>{let l=Object.create(null),k=await Zt(h);return k&&(l={...k}),(!l.icon||!l.color)&&(k=await vr(h),k&&(l={...k,...l}),(!l.icon||!l.color)&&V.pluginConfig.inheritFromProp&&(k=await $n(h),k&&(l={...k,...l}),(!l.icon||!l.color)&&(k=await _r(h),k&&(l={...k,...l}))),V.pluginConfig.inheritFromHierarchy&&h.includes("/")&&(!l.icon||!l.color)&&(k=await br(h),l={...k,...l})),l={...V.defaultPageProps,...l},l.__proto__=null,l},br=async h=>{let l=Object.create(null);h=h.split("/")[0],l=await Zt(h);let k={...l};return(!l.icon||!l.color)&&(l=await $n(h),k={...l,...k}),k},vr=async h=>{let l=Object.create(null);const k=await zn(h);return k&&(l=await Zt(k)),l},$n=async h=>{let l=Object.create(null);const k=await qn(h,V.pluginConfig.inheritFromProp);return k&&(l=await Zt(k)),l},_r=async h=>{let l=Object.create(null);const k=await zn(h);if(k){const J=await qn(k,V.pluginConfig.inheritFromProp);J&&(l=await Zt(J))}return l},wr=`.is-awLi-enabled .page-icon{display:none!important}.awLi-icon{display:inline-block;margin-right:.34em;font-family:var(--icon-font);text-align:center;line-height:1em;width:1.2em}.title .awLi-icon{display:inline-block;width:1.4em;margin-right:.34em;font-family:var(--icon-font);text-align:center;align-self:end;line-height:inherit}.awLi-color:is(.page-ref,.references li a,.page-title,.journal-title .title){color:var(--awLi-color)!important}body:not(.awLi-tagHasBg) .tag.awLi-color{color:var(---awLi-color)!important}.awLi-tagHasBg .tag.awLi-color{color:var(--ls-primary-background-color);background-color:var(--awLi-color)!important}[data-theme=light] .awLi-stroke{-webkit-text-stroke:.3px #00000088}[data-theme=dark] .awLi-stroke{-webkit-text-stroke:.3px #ffffff88}.ls-page-title:before,.journal-title .title:before{display:none!important}.page-ref,.tag{transition:none}
`,xr=()=>{Gn(),V.pluginConfig.pageIconsEnabled&&Bn()},Bn=async()=>{!V.pluginConfig.pageIconsEnabled||(Qe.classList.add("awLi-icons"),logseq.provideStyle({key:"awLi-icon-css",style:wr}),V.defaultPageProps=_n(V.pluginConfig.defaultPageProps),V.defaultJournalProps=_n(V.pluginConfig.defaultJournalProps),Fr(),Tn(),logseq.App.onThemeChanged(()=>{setTimeout(()=>{Tn()},2e3)}),logseq.App.onThemeModeChanged(()=>{setTimeout(()=>{Tn()},2e3)}),logseq.App.onRouteChanged(()=>{Sr()}))},Tn=()=>{Tr(),Lr(),Wn(),Cr()},Gn=()=>{Qe.classList.remove("awLi-icons"),Me.head.querySelector(`style[data-injected-style="awLi-icon-css-${V.pluginID}"]`)?.remove(),Er(),Or(),Ir(),!V.pluginConfig.pageIconsEnabled&&!V.pluginConfig.faviconsEnabled&&Fn(),V.pluginConfig.pageIconsEnabled||Hn()},Wn=async h=>{h||(h=Me);const l=[...h.querySelectorAll(V.titleSelector)];l&&vn(l,!0);const k=[...h.querySelectorAll(V.pageLinksSelector)];k.length&&vn(k,!0);const J=[...h.querySelectorAll(V.sidebarLinkSelector)];J&&vn(J)},Cr=async()=>{if(!!Oe&&Oe.contentDocument){const h=[...Oe.contentDocument.querySelectorAll(V.tabLinkSelector)];h&&vn(h)}},Sr=async()=>{if(Oe&&Oe.contentDocument){const h=Oe.contentDocument.querySelector('.logseq-tab[data-active="true"] .logseq-tab-title');h&&jn(h)}},vn=(h,l)=>{if(!!h.length)for(let k=0;k<h.length;k++){const J=h[k];gr.mutate(()=>{jn(J,l)})}},jn=async(h,l)=>{const k=h.textContent;if(k&&!k.startsWith(" ")){const J=h.getAttribute("data-ref")||h.childNodes[1]?.textContent?.trim().toLowerCase()||h.textContent?.trim().toLowerCase()||"";if(J){const O=await yr(J);O&&(kr(h,O,l),Ar(h,O))}}},kr=async(h,l,k)=>{const J=l.icon;if(!(J===V.defaultPageProps.icon&&k)&&J&&J!=="none"){const O=h.querySelector(".awLi-icon");O?O.innerHTML!==J&&(h.insertAdjacentHTML("afterbegin",`<span class="awLi-icon">${J}</span>`),O.remove()):h.insertAdjacentHTML("afterbegin",`<span class="awLi-icon">${J}</span>`)}},Ar=async(h,l)=>{h.classList.remove("awLi-stroke");const k=l.color;if(k&&k!=="none"){const J=getComputedStyle(h).getPropertyValue("awLi-color");!J&&J!==k&&(h.style.setProperty("--awLi-color",k),h.style.setProperty("--ls-tag-text-color",k),h.classList.add("awLi-color")),V.pluginConfig.fixLowContrast&&or(k)&&h.classList.add("awLi-stroke")}else h.classList.remove("awLi-color"),h.style.removeProperty("--awLi-color"),h.style.removeProperty("--ls-tag-text-color"),h.classList.remove("awLi-stroke")},Lr=()=>{const h=Me.createElement("a");h.classList.add("tag"),Qe.insertAdjacentElement("beforeend",h);const l=getComputedStyle(h).backgroundColor.trim();h.remove(),l!=="rgba(0, 0, 0, 0)"?Qe.classList.add("awLi-tagHasBg"):Qe.classList.remove("awLi-tagHasBg")},Tr=()=>{V.themeBg=getComputedStyle(Nn).getPropertyValue("--ls-primary-background-color").trim()},Er=()=>{const h=[...Me.querySelectorAll(`${V.pageLinksSelector}, ${V.titleSelector}, ${V.sidebarLinkSelector}`)];Jn(h)},Or=()=>{if(!Oe||!Oe.contentDocument)return;const h=[...Oe.contentDocument.querySelectorAll(V.tabLinkSelector)];Jn(h)},Jn=h=>{if(h.length)for(let l=0;l<h.length;l++){const k=h[l];k.style.removeProperty("--awLi-color"),k.classList.remove("awLi-stroke"),k.querySelector(".awLi-icon")?.remove()}},Fr=()=>{!Oe||Oe.contentDocument?.head.insertAdjacentHTML("beforeend",`<style id="awLi-tab-css">
            .logseq-tab-title {
                color: var(--awLi-color) !important;
            }
            .awLi-icon {
                display: inline-block;
                margin-right: 0.34em;
                font-family: 'Fira Code Nerd Font', 'Fira Code', 'Fira Sans';
                text-align: center;
                line-height: 1em;
                width: 1.2em;
            }
            .light .awLi-stroke {
                -webkit-text-stroke: 0.3px #00000088;
            }
            .dark .awLi-stroke {
                -webkit-text-stroke: 0.3px #ffffff88;
            }
            .logseq-tab .text-xs {
                display: none;
            }
        </style>`)},Ir=()=>{!Oe||Oe.contentDocument?.getElementById("awLi-tab-css")?.remove()};const Vn=async h=>{h||(h=[...Me.querySelectorAll(V.extLinksSelector)]);for(let l=0;l<h.length;l++){const k=h[l],J=h[l].querySelector(".awLi-favicon");J&&J.remove();const{hostname:O,protocol:F}=new URL(k.href);if(F==="http:"||F==="https:"){let U=null;V.favIconsCache.has(O)&&(U=V.favIconsCache.get(O)),U||(U=await ir(`https://t3.gstatic.com/faviconV2?url=${F}${O}&size=32&client=social`),V.favIconsCache.set(O,U));const g=Me.createElement("img");g.classList.add("awLi-favicon"),g.src=U,k.insertAdjacentElement("afterbegin",g)}}},jr=()=>{const h=Me.querySelectorAll(".awLi-favicon");if(h.length)for(let l=0;l<h.length;l++)h[l].remove()},Pr=()=>{V.pluginConfig.faviconsEnabled?Zn():Qn()},Zn=async()=>{V.pluginConfig.faviconsEnabled&&setTimeout(()=>{V.favIconsCache=new Map,Vn()},500)},Qn=()=>{V.favIconsCache.clear(),jr(),!V.pluginConfig.pageIconsEnabled&&!V.pluginConfig.faviconsEnabled&&Fn()},Nr=':root{--icon-font: "Fira Code Nerd Font", "Fira Code", "Fira Sans"}@font-face{font-family:Fira Code Nerd Font;font-style:normal;font-weight:400;font-display:swap;src:url('+new URL("../fonts/fira-code-nerd-regular.ttf",import.meta.url).href+`) format("truetype")}.desc-item[data-key=defaultPageProps] .form-input,.desc-item[data-key=defaultJournalProps] .form-input,.page-icon,.awLi-icon,.is-icon-active .page>.relative>.flex-row>.flex-1:before{font-family:var(--icon-font)}
`,Rr=()=>{V.pluginConfig.nerdFontEnabled?Kn():Yn()},Kn=async()=>{!V.pluginConfig.nerdFontEnabled||setTimeout(()=>{Oe&&Oe.contentDocument?.head.insertAdjacentHTML("beforeend",`<style id="awLi-nerd-font-css">
                    @font-face {
                        font-family: "Fira Code Nerd Font";
                        font-style: normal;
                        font-weight: 400;
                        src: url('lsp://logseq.io/${V.pluginID}/dist/fonts/fira-code-nerd-regular.ttf') format('truetype');
                    }
                    .logseq-tab .awLi-tab-icon {
                        font-family: "Fira Code Nerd Font";
                    }
                </style>`),logseq.provideStyle({key:"awLi-nerd-font-css",style:Nr}),Qe.classList.add("awLi-nerd")},1e3)},Yn=()=>{Oe&&Oe.contentDocument?.getElementById("awLi-nerd-font-css")?.remove(),Me.head.querySelector(`style[data-injected-style="awLi-nerd-font-css-${V.pluginID}"]`)?.remove(),Qe.classList.remove("awLi-nerd")},Mr=async()=>{setTimeout(()=>{Me.head&&Me.head.insertAdjacentHTML("beforeend",`<link rel="stylesheet" id="css-awLi" href="lsp://logseq.io/${V.pluginID}/dist/assets/awesomeLinks.css">`)},500)},Dr=async()=>{er(),Qe.classList.add(V.isPluginEnabled),Kn(),setTimeout(()=>{Bn(),Zn()},2e3),setTimeout(()=>{(V.pluginConfig.faviconsEnabled||V.pluginConfig.pageIconsEnabled)&&(lr(),fr()),V.pluginConfig.pageIconsEnabled&&(dr(),pr())},4e3)},Hr=()=>{Qe.classList.remove(V.isPluginEnabled),Gn(),Qn(),Yn(),Fn(),Hn()},Ur=async()=>{console.log("AwesomeIcons: plugin loaded"),Mr(),sr(),Dr(),setTimeout(()=>{logseq.beforeunload(async()=>{Hr()})},2e3),setTimeout(()=>{rr()},8e3)};logseq.ready(Ur).catch(null);
//# sourceMappingURL=awesomeLinks.js.map
